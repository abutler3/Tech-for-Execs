YUI.add("minty_module_toolbar_inbox_message",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_toolbar_inbox_message={base:'<div id="pagetoolbar" class="{{msgliststate}}"> <span class="btn left right"><a href="#" title="{{str_delete_email_attr}}" data-action="delete">{{str_delete}}</a></span> <span class="btn left"><a href="#" title="{{str_reply_attr}}" data-action="reply_sender">{{str_reply}}</a></span><span class="btn right menu" data-action="menu" id="btn-reply"><a href="#" title="{{str_toolbar_reply_menu_toggle_attr}}"><b>{{str_toolbar_reply_menu_toggle}}</b></a></span> <span class="btn left"><a href="#" title="{{str_forward_attr}}" data-action="forward">{{str_forward}}</a></span>{{has_spam_button}}<span class="btn menu" id="btn-move" data-action="menu"><a href="#" class="icon" title="{{str_move_attr}}"><i>{{str_move}}</i><b></b></a></span><span class="btn right"><a href="#" title="{{str_print_attr}}" data-action="print">{{str_print}}</a></span> <span class="btn left right menu" data-action="menu" id="btn-msg-actions"><a href="#" class="icon" title="{{str_actions_email_attr}}"><i>{{str_actions}}</i><b></b></a></span> <span class="btn left"><a class="icon prev" href="#" data-action="prev" title="{{str_next_attr}}"><i>{{str_next}}</i></a></span><span class="btn right"><a class="icon next" href="#" data-action="next" title="{{str_previous_attr}}"><i>{{str_previous}}</i></a></span></div>',has_spam_button:'<span class="btn"><a href="#" title="{{str_spam_attr}}" data-action="{{spam_data_action}}">{{str_spam}}</a></span>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_menus_loading",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_menus_loading={base:'<div role = "menu" id = "loadingMenu" class="optionMenu" aria-live="polite"> <ul> <li><a href="#"><span>{{str_galaxy_status_loading}}</span></a></li> </ul></div>'};},"1.0.0");YUI.add('postlaunch_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_tog_TAESupported":true,"str_rough_errlaunch_message":"We\u2019re sorry, but {{str_branding_mail}} can't load due to a temporary error. You can try back again shortly, or visit our help pages for ways to troubleshoot the issue.","str_rough_try_again_now":"Try again","str_rough_visit_help_page":"Visit Help for troubleshooting instructions","str_rough_errlaunch_troubleshoot":"Temporary error: {{launch_error_code}}","str_menu_accel_d_number":"D then","str_msg-view_scroll_pvw_too_narrow":"Your window isn't wide enough to support this view","str_menu_open":"Open","str_menu_accel_enter":"{{str_enter}}","str_menu_sort_sender":"From","str_menu_sort_attachment":"Attachment","str_menu_sort_flag":"Flag","str_menu_forward":"Forward","str_menu_accel_forward":"F","str_menu_forward_as_attachment":"","str_menu_reply_sender":"Reply to Sender","str_menu_accel_reply_sender":"R","str_menu_reply_all":"Reply to All","str_menu_accel_reply_all":"A","str_menu_move_spam":"Spam","str_menu_move_trash":"Trash","str_menu_new_folder":"New Folder","str_menu_new_folder_attr":"{{str_ctrl_shift}}+E","str_menu_preview_below":"Show preview below message list","str_menu_preview_beside":"Show preview beside message list","str_menu_rename_folder":"Rename Folder","str_menu_delete_folder":"Delete Folder","str_menu_mark_all_read":"Mark All Read","str_menu_print":"Print","str_menu_accel_print":"P","str_menu_mark_read":"Mark as Read","str_menu_accel_mark_read":"K","str_menu_mark_unread":"Mark as Unread","str_menu_accel_mark_unread":"Shift+K","str_menu_flag":"Flag","str_menu_accel_flag":"L","str_menu_clear_flag":"Clear Flag","str_menu_accel_clear_flag":"Shift+L","str_menu_delete_message":"Delete Email...","str_menu_accel_delete":"Delete","str_menu_view_full_headers":"View Full Header","str_menu_encodings":"Set Language Encoding...","str_menu_add_sender_to_contacts":"Add Sender to Contacts","str_menu_move_inbox":"Inbox","str_menu_empty_folder":"","str_menu_empty_spam":"Empty Spam","str_menu_empty_trash":"Empty Trash","str_menu_reedit":"","str_menu_this_is_spam":"This is Spam","str_menu_filter_emails_like_this":"Filter Emails Like This...","str_menu_redirect":"Redirect to...","str_menu_accel_shift_fwdslash":"?","str_menu_print_email":"Print Message...","str_menu_select_all":"Select All","str_menu_accel_ctrl_a":"{{str_ctrl}}+A","str_menu_view_header":"View Full Header","str_menu_enable_hover_preview":"Enable hover preview","str_menu_size_compact":"Compact View","str_menu_size_regular":"Regular View","str_menu_size_open":"Open View","str_menu_select_for_more":"Select a message for more actions","str_menu_thread_expand":"Expand All","str_menu_thread_collapse":"Collapse All","str_menu_thread_read":"Mark All as Read","str_menu_thread_unread":"Mark All as Unread","str_menu_thread_flag":"Flag All","str_menu_thread_unflag":"Clear All Flags","str_menu_thread_encoding":"Set Language Encoding...","str_menu_thread_compose":"Compose Message to All","str_menu_thread_list":"Create Contact List...","str_menu_thread_group":"Create Group Event...","str_menu_email":"Email","str_menu_accel_n":"N","str_menu_im":"Instant Message","str_menu_accel_i":"I","str_menu_sms":"SMS","str_menu_accel_t":"T","str_comp_attach_scanning":"Scanning for viruses...","str_comp_attach_download_attach_header":"Download {{num_attachments_download}} Attachments","str_comp_attach_download_single_attach_header":"Download {{num_attachments_download}} Attachment","str_comp_av_norton_attr":"Go to the Norton AntiVirus site","str_encoding_title":"Set Language Encoding","str_encoding_recent":"Recents","str_encoding_select":"Select a character encoding to view your email message.","str_enctype_default":"{{str_enctype_utf_8}}","str_encoding_default":"Auto-Select (default)","str_encoding_western":"Western","str_enctype_ascii":"ASCII","str_encoding_ascii":"ASCII ({{str_enctype_ascii}})","str_enctype_greek_iso":"ISO-8859-7","str_encoding_greek_iso":"Greek ({{str_enctype_greek_iso}})","str_enctype_greek_win":"WINDOWS-1253","str_encoding_greek_win":"Greek ({{str_enctype_greek_win}})","str_enctype_latin_10":"ISO-8859-16","str_encoding_latin_10":"Latin-10({{str_enctype_latin_10}})","str_enctype_latin_3":"ISO-8859-3","str_encoding_latin_3":"Latin-3({{str_enctype_latin_3}})","str_enctype_latin_6":"ISO-8859-10","str_encoding_latin_6":"Latin-3({{str_enctype_latin_6}})","str_enctype_latin_7":"ISO-8859-13","str_encoding_latin_7":"Latin-3({{str_enctype_latin_7}})","str_enctype_latin_8":"ISO-8859-14","str_encoding_latin_8":"Latin-3({{str_enctype_latin_8}})","str_enctype_latin_9":"ISO-8859-15","str_encoding_latin_9":"Latin-3({{str_enctype_latin_9}})","str_enctype_w_europe_850":"850","str_encoding_w_europe_850":"W. Europe ({{str_enctype_w_europe_850}})","str_enctype_w_europe_cp":"CP858","str_encoding_w_europe_cp":"W.Europe ({{str_enctype_w_europe_cp}})","str_enctype_w_europe_hproman":"HP-ROMAN8","str_encoding_w_europe_hproman":"W.Europe ({{str_enctype_w_europe_hproman}})","str_enctype_w_europe_macroman":"MACROMAN","str_encoding_w_europe_macroman":"W.Europe ({{str_enctype_w_europe_macroman}})","str_enctype_w_europe_win":"WINDOWS-1252","str_encoding_w_europe_win":"W.Europe ({{str_enctype_w_europe_win}})","str_encoding_east_european":"East European","str_enctype_armenian":"ARMSCII-8","str_encoding_armenian":"Armenian ({{str_enctype_armenian}})","str_enctype_baltic_iso":"ISO-8859-4","str_encoding_baltic_iso":"Baltic Rim({{str_enctype_baltic_iso}})","str_enctype_baltic_rim":"WINDOWS-1257","str_encoding_baltic_rim":"Baltic Rim({{str_enctype_baltic_rim}})","str_enctype_cyrilic_1":"866","str_encoding_cyrilic_1":"Cyrilic ({{str_enctype_cyrilic_1}})","str_enctype_cyrilic_2":"ISO-8859-5","str_encoding_cyrilic_2":"Cyrilic ({{str_enctype_cyrilic_2}})","str_enctype_cyrilic_3":"KOI8-R","str_encoding_cyrilic_3":"Cyrilic ({{str_enctype_cyrilic_3}})","str_enctype_cyrilic_4":"KOI8-T","str_encoding_cyrilic_4":"Cyrilic ({{str_enctype_cyrilic_4}})","str_enctype_cyrilic_5":"KOI8-U","str_encoding_cyrilic_5":"Cyrilic ({{str_enctype_cyrilic_5}})","str_enctype_cyrilic_6":"WINDOWS-1251","str_encoding_cyrilic_6":"Cyrilic ({{str_enctype_cyrilic_6}})","str_enctype_latin_2_1":"852","str_encoding_latin_2_1":"Latin-2 ({{str_enctype_latin_2_1}})","str_enctype_latin_2_2":"ISO-8859-2","str_encoding_latin_2_2":"Latin-2 ({{str_enctype_latin_2_2}})","str_enctype_latin_2_3":"WINDOWS-1250","str_encoding_latin_2_3":"Latin-2 ({{str_enctype_latin_2_3}})","str_enctype_turkish_1":"ISO-8859-9","str_encoding_turkish_1":"Turkish ({{str_enctype_turkish_1}})","str_enctype_turkish_2":"WINDOWS-1254","str_encoding_turkish_2":"Turkish ({{str_enctype_turkish_2}})","str_encoding_middle_east":"Middle East","str_enctype_arabic_1":"ISO-8859-6","str_encoding_arabic_1":"Arabic ({{str_enctype_arabic_1}},{{str_enctype_arabic_1b}})","str_enctype_arabic_2":"WINDOWS-1256","str_encoding_arabic_2":"Arabic ({{str_enctype_arabic_2}})","str_enctype_hebrew_1":"856","str_encoding_hebrew_1":"Hebrew ({{str_enctype_hebrew_1}})","str_enctype_hebrew_2":"862","str_encoding_hebrew_2":"Hebrew ({{str_enctype_hebrew_2}})","str_enctype_hebrew_3":"WINDOWS-1255","str_encoding_hebrew_3":"Hebrew ({{str_enctype_hebrew_3}})","str_encoding_east_asia":"East Asia","str_enctype_chinese_simp_1":"GB2312","str_encoding_chinese_simp_1":"Chinese Simplified ({{str_enctype_chinese_simp_1}})","str_enctype_chinese_simp_2":"GB18030","str_encoding_chinese_simp_2":"Chinese Simplified ({{str_enctype_chinese_simp_2}})","str_enctype_chinese_simp_3":"HZ-GB-2312","str_encoding_chinese_simp_3":"Chinese Simplified ({{str_enctype_chinese_simp_3}})","str_enctype_chinese_simp_4":"ISO-2022-CN","str_encoding_chinese_simp_4":"Chinese Simplified ({{str_enctype_chinese_simp_4}})","str_enctype_chinese_simp_5":"WINDOWS-936","str_encoding_chinese_simp_5":"Chinese Simplified ({{str_enctype_chinese_simp_5}})","str_enctype_chinese_trad_hk":"BIG5-HKSCS","str_encoding_chinese_trad_hk":"Chinese Trad.-Hong Kong ({{str_enctype_chinese_trad_hk}})","str_enctype_chinese_trad_1":"BIG5","str_encoding_chinese_trad_1":"Chinese Traditional ({{str_enctype_chinese_trad_1}})","str_enctype_chinese_trad_2":"EUC-TW","str_encoding_chinese_trad_2":"Chinese Traditional ({{str_enctype_chinese_trad_2}})","str_enctype_japanese_1":"SHIFT_JIS","str_encoding_japanese_1":"Japanese ({{str_enctype_japanese_1}})","str_enctype_japanese_2":"EUC-JP","str_encoding_japanese_2":"Japanese ({{str_enctype_japanese_2}})","str_enctype_japanese_3":"ISO-2022-JP","str_encoding_japanese_3":"Japanese ({{str_enctype_japanese_3}})","str_enctype_korean_1":"ISO-2022-KR","str_encoding_korean_1":"Korean ({{str_enctype_korean_1}})","str_enctype_korean_2":"EUC-KR","str_encoding_korean_2":"Korean ({{str_enctype_korean_2}})","str_encoding_southeast_asia":"Southeast Asia","str_enctype_thai_1":"TIS620.2533-0","str_encoding_thai_1":"Thai ({{str_enctype_thai_1}})","str_enctype_thai_2":"WINDOWS-874","str_encoding_thai_2":"Thai ({{str_enctype_thai_2}})","str_enctype_vietnamese_1":"TCVN-5712","str_encoding_vietnamese_1":"Vietnamese ({{str_enctype_vietnamese_1}})","str_enctype_vietnamese_2":"VISCII","str_encoding_vietnamese_2":"Vietnamese ({{str_enctype_vietnamese_2}})","str_enctype_vietnamese_3":"WINDOWS-1258","str_encoding_vietnamese_3":"Vietnamese ({{str_enctype_vietnamese_3}})","str_encoding_universal":"Universal","str_enctype_utf_7":"UTF-7","str_encoding_utf_7":"Unicode ({{str_enctype_utf_7}})","str_enctype_utf_8":"UTF-8","str_encoding_utf_8":"Unicode ({{str_enctype_utf_8}})","str_enctype_utf_16":"UTF-16","str_encoding_utf_16":"Unicode ({{str_enctype_utf_16}})","str_enctype_utf_32":"UTF-32","str_encoding_utf_32":"Unicode ({{str_enctype_utf_32}})","str_enctype_arabic_1b":"ASMO-708","str_done":"Done","str_menu_save":"Save","str_menu_reply_sms":"Reply via SMS","str_menu_accel_shift_t":"Shift+T","str_menu_reply_video":"Reply via Video Call","str_menu_reply_voice":"Reply via Voice Call","str_menu_reply_phone":"Reply via Phone Call","str_msg-view_hd_showmsgs":"Show Messages:","str_msg_view_pane_none":"No Preview Pane","str_msg_view_pane_bottom":"Preview Pane on the Bottom","str_msg_view_pane_right":"Preview Pane on the Right","str_msg-view_scroll_pvw":"In Scrolling List (Show Preview Below)","str_msg-view_scroll_pvw_beside":"In Scrolling List (Show Preview Beside)","str_msg-view_scroll_nopvw":"In Scrolling List (Hide Preview)","str_msg-view_scroll_page":"Page by Page (Classic)","str_menu_cbox_all":"All","str_menu_cbox_none":"None","str_menu_cbox_unread":"Unread","str_menu_cbox_read":"Read","str_menu_cbox_flagged":"Flagged","str_menu_cbox_unflagged":"Unflagged","str_modal_foldername_move_title":"Add Messages to a New Folder","str_modal_foldername_title":"Add a New Folder","str_modal_folder_delete_title":"Delete Folder?","str_modal_folder_delete_note":"Only empty folders can be deleted. Please delete all emails in this folder first.","str_modal_folder_delete_question":"Are you sure you want to permanently delete the empty folder \"{{foldername}}\"?","str_nav_empty_trash":"Empty the Trash folder","str_empty_trash_conf":"Are you sure you want to permanently delete all email in Trash?","str_nav_empty_spam":"Empty the Spam folder","str_empty_spam_conf":"Are you sure you want to permanently delete all email in Spam?","str_nav_empty_folder":"","str_empty_folder_conf":"","str_modal_foldername_err_badcharset":"Folder name contains unsupported characters. Please try again.","str_modal_foldername_err_empty":"Please enter a folder name.","str_modal_foldername_err_length":"Please choose a folder name under 40 characters.","str_modal_folder_exists_title":"Folder Already Exists","str_modal_foldername_err_duplicate":"A folder with that name already exists. Please enter another name.","str_modal_foldername_err_invalid":"Folder name contains invalid characters. Please try again.","str_modal_generic_err":"Sorry, an unknown error has occurred. Please try again. If the issue persists, please contact customer care.","str_modal_foldername":"Folder name:","str_uh_help":"Help","str_ovi_uh_support_mail_terms_attr":"Ovi Mail and Chat powered by {{str_branding}} Terms and Privacy Policy","str_ovi_uh_support_mail_terms":"Mail &amp; Chat Terms &amp; Privacy Policy","str_ovi_uh_support_ovi_terms":"Ovi Terms","str_ovi_uh_support_pp":"Ovi Privacy Policy","str_ovi_uh_support_copyright_attr":"Copyright &copy; 2012 Yahoo!","str_ovi_uh_support_copyright":"Copyright &copy; 2012 Yahoo!","str_print_message":"Print Error","str_print_message_body":"There was a problem printing, most likely caused by a pop-up blocker. Please click {{str_try_again}}.","str_try_again":"Try Again","str_menu_close_window":"Close Window","str_print_header_subject":"Subject:","str_print_header_from":"From:","str_print_header_to":"To:","str_print_header_cc":"Cc:","str_print_header_bcc":"Bcc:","str_print_header_date":"Date:","str_opt_colors_aqua_attr":"Aqua","str_opt_colors_black_attr":"Black","str_opt_colors_blue_attr":"Blue","str_opt_colors_bluegray_attr":"Blue-Gray","str_opt_colors_charcoal_attr":"Charcoal","str_opt_colors_chocolate_attr":"Chocolate","str_opt_colors_dlg_bd":"Preview the themes below and customize {{str_branding_mail}} with your favorite!","str_opt_colors_dlg_hd":"Themes","str_opt_colors_fire_attr":"Fire","str_opt_colors_green_attr":"Green","str_opt_colors_img-army-airborne_attr":"Army Airborne","str_opt_colors_img-army-helicopter_attr":"Army Helicopter","str_opt_colors_img-army-running_attr":"Army Running","str_opt_colors_img-aurora-borealis_attr":"Aurora Borealis","str_opt_colors_img-autumnsun_attr":"Autumn Sun","str_opt_colors_img-bamboo_attr":"Bamboo","str_opt_colors_img-black-dog_attr":"Black Dog","str_opt_colors_img-bluedenim_attr":"Blue Denim","str_opt_colors_img-carbon_attr":"Carbon","str_opt_colors_img-chinese-doll_attr":"Chinese Doll","str_opt_colors_img-christmas-gift_attr":"Christmas Gift","str_opt_colors_img-christmas-night_attr":"Christmas Night","str_opt_colors_img-classical_attr":"Classical","str_opt_colors_img-clouds_attr":"Clouds","str_opt_colors_img-dandelion_attr":"Dandelion","str_opt_colors_img-darkjeans_attr":"Dark Jeans","str_opt_colors_img-dees-diner_attr":"Dees Diner","str_opt_colors_img-dirtygeometry_attr":"Dirty Geometry","str_opt_colors_img-distress_attr":"Distress","str_opt_colors_img-flower-wallpaper_attr":"Flower Wallpaper","str_opt_colors_img-flowers_attr":"Flowers","str_opt_colors_img-gray-wolf_attr":"Gray Wolf","str_opt_colors_img-greengrass_attr":"Green Grass","str_opt_colors_img-hills_attr":"Hills","str_opt_colors_img-hubble-carinanebula_attr":"Hubble Carina Nebula","str_opt_colors_img-hubble-crabnebula_attr":"Hubble Crab Nebula","str_opt_colors_img-hubble-hal_attr":"Hubble Hal","str_opt_colors_img-hubble-mysticmountain_attr":"Hubble Mystic Mountain","str_opt_colors_img-hubble-supernova_attr":"Hubble Supernova","str_opt_colors_img-iwstripes_attr":"Stripes","str_opt_colors_img-loadingdock_attr":"Loading Dock","str_opt_colors_img-lotus_attr":"Lotus","str_opt_colors_img-midnight-geometry_attr":"Midnight Geometry","str_opt_colors_img-mondrianesque_attr":"Mondrianesque","str_opt_colors_img-mountains_attr":"Mountains","str_opt_colors_img-navel_attr":"Navel","str_opt_colors_img-night-lights_attr":"Night Lights","str_opt_colors_img-oceanwave_attr":"Ocean Wave","str_opt_colors_img-octoberfest_attr":"Octoberfest","str_opt_colors_img-papercutting_attr":"Paper Cutting","str_opt_colors_img-purple-raindrops_attr":"Purple Raindrops","str_opt_colors_img-red-cat_attr":"Red Cat","str_opt_colors_img-red-curtain_attr":"Red Curtain","str_opt_colors_img-red-grid_attr":"Red Grid","str_opt_colors_img-scuba_attr":"Scuba","str_opt_colors_img-sea_attr":"Sea","str_opt_colors_img-selvage-jeans_attr":"Selvage Jeans","str_opt_colors_img-silent-night_attr":"Silent Night","str_opt_colors_img-snow-cool_attr":"Snow Cool","str_opt_colors_img-snow-warm_attr":"Snow Warm","str_opt_colors_img-snowfall_attr":"Snowfall","str_opt_colors_img-snowing_attr":"Snowing","str_opt_colors_img-space-shuttle-discovery_attr":"Space Shuttle Discovery","str_opt_colors_img-speckletone_attr":"Speckletone","str_opt_colors_img-squiggly_attr":"Squiggly","str_opt_colors_img-stonewall_attr":"Stonewall","str_opt_colors_img-teak_attr":"Teak","str_opt_colors_img-texture_attr":"Texture","str_opt_colors_img-ufo_attr":"UFO","str_opt_colors_img-water_attr":"Wave","str_opt_colors_img-whimsyclouds_attr":"Whimsy Clouds","str_opt_colors_olive_attr":"Olive","str_opt_colors_orange_attr":"Orange","str_opt_colors_pink_attr":"Pink","str_opt_colors_purple_attr":"Purple","str_opt_colors_steel_attr":"Steel","str_opt_colors_title":"Customize {{str_branding_mail}} with your favorite colors.","str_return":"Return","str_menu_accel_cmd_sqbracket_left":"Cmd+[","str_menu_accel_ctrl_sqbracket_left":"Ctrl+[","str_menu_accel_cmd_sqbracket_right":"Cmd+]","str_menu_accel_ctrl_sqbracket_right":"Ctrl+]","str_menu_accel_cmd_shift_u":"Cmd+Shift+U","str_menu_accel_ctrl_shift_u":"Ctrl+Shift+U","str_menu_accel_cmd_s":"Cmd+S","str_menu_accel_ctrl_s":"Ctrl+S","str_menu_accel_cmd_enter":"Cmd+Return","str_menu_accel_ctrl_enter":"Ctrl+Enter","str_menu_accel_cmd_f":"Cmd+F","str_menu_accel_ctrl_f":"Ctrl+F","str_menu_accel_d_cmd_shift_e":"D then Cmd+Shift+E","str_menu_accel_d_ctrl_shift_e":"D then Ctrl+Shift+E","str_menu_accel_cmd_shift_e":"Cmd+Shift+E","str_menu_accel_ctrl_shift_e":"Ctrl+Shift+E","str_menu_accel_cmd_up_down":"Cmd+Up\/Down","str_menu_accel_ctrl_up_down":"Ctrl+Up\/Down","str_delete_key":"Delete","str_menu_accel_cmd_a":"Cmd+A","str_menu_accel_pc_ctrl_a":"Ctrl+A","str_menu_accel_cmd_up":"Cmd+Up","str_menu_accel_ctrl_up":"Ctrl+Up","str_modal_keys_gen_title":"General Commands","str_menu_accel_m":"M","str_modal_keys_gen_chk_mail":"Check mail (jumps to Inbox)","str_menu_accel_shift_m":"Shift+M","str_modal_keys_gen_chk_all_mail":"Check all mail (includes POP accounts)","str_modal_keys_gen_new_msg":"Start a new email message","str_modal_keys_gen_new_im":"Start a new Instant Message (IM)","str_modal_keys_gen_new_sms":"Start a new SMS message (text)","str_modal_keys_gen_mv_prev_tb":"Move to the previous tab","str_modal_keys_gen_mv_next_tb":"Move to the next tab","str_menu_accel_esc":"Esc","str_modal_keys_gen_close_tab":"Close the current tab","str_menu_accel_s":"S","str_modal_keys_gen_srch":"Search","str_modal_keys_msg_lst_title":"Message Lists","str_menu_accel_up_down":"Up\/Down","str_modal_keys_msg_lst_mv":"Highlight the next message up or down","str_modal_keys_msg_lst_open":"Open a message","str_modal_keys_msg_lst_select_all":"Select all messages","str_menu_accel_v":"V","str_modal_keys_msg_lst_pane_toggle":"Turn Preview Pane on or off (when viewing messages in a scrolling list)","str_modal_keys_wrk_msg_lst_title":"Message Lists (Page by Page)","str_menu_accel_spacebar":"Spacebar","str_modal_keys_wrk_msg_lst_check":"Check or uncheck a message's checkbox","str_modal_keys_wrk_msg_lst_focus":"Move focus up or down the list (preserving selection)","str_modal_keys_msgs_title":"Messages","str_menu_accel_r":"R","str_modal_keys_msgs_rply":"Reply to a message","str_menu_accel_a":"A","str_modal_keys_msgs_rply_all":"Reply all to a message","str_menu_accel_f":"F","str_modal_keys_msgs_fwd":"Forward a message","str_menu_accel_k":"K","str_modal_keys_msgs_read":"Mark as read","str_menu_accel_shift_k":"Shift+K","str_modal_keys_msgs_unread":"Mark as unread","str_menu_accel_l":"L","str_modal_keys_msgs_flag":"Flag a message","str_menu_accel_shift_l":"Shift+L","str_modal_keys_msgs_unflag":"Clear flag","str_modal_keys_msgs_print":"Print message","str_modal_keys_msgs_del":"Delete message","str_modal_keys_msgs_add_sender":"Add sender to contacts","str_menu_accel_d":"D","str_modal_keys_msgs_open_mv_menu":"Open Move menu","str_modal_keys_d_number":"D then number","str_modal_keys_move_numbered_folders":"Move message(s) to one of your first 9 folders","str_modal_keys_move_new_folder":"Move messages(s) to a new folder","str_modal_keys_msgs_new_folder":"Create a new folder","str_menu_accel_ctrl_comma":"Ctrl+,","str_modal_keys_msgs_next_msg_up":"View next message up","str_menu_accel_ctrl_dot":"Ctrl+.","str_modal_keys_msgs_next_msg_down":"View next message down","str_menu_toggle_quick_reply_shortcut":"Shift+R","str_modal_keys_msgs_show_rply_bar":"View or hide the reply bar","str_modal_keys_compose_title":"Compose","str_modal_keys_compose_save":"Save as a draft","str_modal_keys_compose_send":"Send message","str_modal_keys_view_full_list":"View Full List","str_modal_keys_compose_attach":"Attach files (one at a time)","str_modal_upsell_title":"Hide Advertisement","str_modal_upsell_body":"Want more room to view your messages? <b>Yahoo! Mail Plus<\/b> doesn't have graphical ads. And it costs less than $2 a month to upgrade.","str_modal_dont_show_again":"Don\u2019t show this again","str_msg_view_btn_learn_more":"Learn More","str_modal_notnow":"Not Now","str_galaxy_ycw_initFailure":"Oops, looks like our computers processing all of your Updates are a little overworked.<br \/>Please wait a few moments and <a id=\"ycw_failure_retry\">try again<\/a>","str_nav_updates_all":"All Updates","str_nav_updates_checkupdates_attr":"Check for new updates","str_nav_updates_checkupdates":"Check Updates","str_nav_updates_notifications":"Notifications","str_nav_updates_sources":"Sources","str_nav_updates_src_btn_edit_attr":"Add or remove sources from which you receive updates","str_nav_updates_src_btn_edit":"Edit sources","str_nav_updates_yahoo":"{{str_branding}}","str_nav_updates_facebook":"Facebook","str_nav_updates_twitter":"Twitter","str_nav_updates_facebook_add":"Add Facebook","str_nav_updates_facebook_add_attr":"Receive updates from Facebook","str_nav_updates_twitter_add":"Add Twitter","str_nav_updates_twitter_add_attr":"Receive updates from Twitter","str_toolbar_updates_manage":"Manage Updates","str_toolbar_updates_view":"View Profile","str_mark_as_read_single":"Your email has been marked as read","str_mark_as_unread_single":"Your email has been marked as unread","str_flagged_single":"Your email has been flagged","str_unflagged_single":"Your email has been unflagged","str_move_single":"Your email has been moved to {{folderName}}","str_mark_as_read_multiple":"{{totalMsgs}} emails have been marked as read","str_mark_as_unread_multiple":"{{totalMsgs}} emails have been marked as unread","str_flagged_multiple":"{{totalMsgs}} emails have been flagged","str_unflagged_multiple":"{{totalMsgs}} emails have been unflagged","str_move_multiple":"{{totalMsgs}} emails have been moved to {{folderName}}","str_msg-view_modal_switch":"In order to switch view, {{str_branding}} must refresh. Any mail messages you're currently writing will be saved as drafts.","str_comp_title_saveasdraftfail":"Problem Saving Draft","str_nav_left_folders_expanded_attr":"Click to hide folders","str_nav_left_folders_collapsed_attr":"Click to show folders","str_modal_filter_sender":"Sender:","str_modal_filter_recipient":"Recipient:","str_modal_filter_body":"Email Body:","str_modal_filter_empty_name":"Enter the name of the Filter","str_modal_filter_empty_rule":"Enter at least one rule for the Filter","str_modal_filter_success":"Your filter has been added successfully","str_modal_filter_name_err":"Filter with that name already exists","str_modal_filter_name_length_err":"Filter name is too long","str_modal_filter_criteria_err":"Filter with the same criteria already exists","str_modal_filter_alert_max_filters_plus":"You already have set up the maximum number of filters ({{max_filters}}). Please go to Mail Options and delete any filters you are no longer using.","str_modal_filter_alert_max_filters_free":"<p>You already have set up the maximum number of filters ({{max_filters}}) for a free Yahoo! Mail account. Please go to Mail Options and delete any filters you are no longer using.<\/p><p>Did you know that Yahoo! Mail Plus you get up to 200 filters, no graphical ads and more? All for less than $2 a month. <a href=\"{{url_mailplus}}\" title=\"Find out more about Yahoo! Mail Plus\" target=\"_blank\">Find out more<\/a>.<\/p>","str_modal_filter_title":"Add Filter","str_modal_filter_rule_lbl":"If all of the following rules are true","str_modal_filter_move_lbl":"Then move the message to:","str_modal_filter_sl_folder_new":"[New Folder]","str_modal_filter_name_lbl":"Name:","str_modal_filter_sl_contain":"contains","str_modal_filter_sl_not_contain":"does not contain","str_modal_filter_sl_begin":"starts with","str_modal_filter_sl_ends":"ends with","str_save":"Save","str_tabs_options_title":"Mail Options","str_uh_searchcalendar":"Search Calendar","str_uh_search":"Search","str_nav_calendar":"Calendar","str_cal_err_time":"Enter a valid time in the format","str_cal_fmt_add_event_time":"{h}:{mm}{tt}","str_cal_fmt_addEvent_date":"{MM}\/{dd}\/{yyyy}","str_cal_err_date":"Enter a valid date in the format","str_cal_mod_addevent":"Add Event","str_event_AllDay":"All-Day","str_cal_callocation":"Location:"});
}, '1.0.0');YUI.add('subcompose_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_comp_reply_spFWD":"Fw:","str_comp_reply_spRE":"Re:","str_rte_default_font":"times new roman, new york, times, serif","str_rte_default_font_size":"12","str_comp_plaintext_default_font":"arial, helvetica, sans-serif","str_comp_plaintext_default_font_size":"13","str_comp_saveasdraftfail":"Sorry, your draft failed to save","str_comp_autosave":"Draft auto-saved at {{autosave_time}}","str_comp_saved":"Draft saved at {{saved_time}}","str_cfg_tog_isRTL":"false","str_rte_plaintext":"Switch to Plain Text","str_rte_richtext":"Switch to Rich Text","str_comp_conf_plainText":"Converting your message to plain text will lose all formatting and remove inserted items. Continue?","str_comp_createlink_prompt":"Please enter the URL for the link to point to:","str_comp_createlink_default":"http:\/\/","str_comp_dialogheader":"Compose Email","str_comp_still_uploading":"Please wait until all attachments have finished uploading.","str_comp_invalidAddressA":"This is an invalid email address:","str_comp_invalidAddressB":"Please use an email address that looks like user@example.com or a nickname or a distribution list name from your {{str_branding}} contacts.","str_comp_title_invalidAddr":"Invalid Address","str_comp_title_emptyToField":"Please Enter an Email Address","str_comp_emptyToField":"Please specify at least one recipient in the TO: field.","str_modal_send_msg_title":"Send Message?","str_comp_invalidSubjectAndContent":"This email doesn't have any subject or message. Send anyway?","str_comp_send":"Send","str_comp_invalidSubject":"Do you want to send the message without any subject?","str_comp_invalidContent":"Do you want to send the message without any content?","str_tog_spellcheckEnabled":true,"str_rte_attachments_alert_virus_title":"Virus Detected","str_comp_dialogtitle_invalidSendAttachments":"Invalid Attachments","str_rte_attachments_alert_virus":"We have detected a virus in one or more attachments. Please remove infected files before sending this message.","str_comp_dialogbody_invalidSendAttachments":"It looks like there are some attachments that can't be sent. Please remove these attachments and try again.","str_comp_btn_reply_sender":"Reply to Sender","str_comp_btn_reply_all":"Reply to All","str_cfg_intl_fonts":"[]","str_tog_dateformat_rsstime_l10n":"{h}:{mm} {A}","str_comp_savetodrafts":"Save to Drafts","str_comp_closewithoutsaving":"Close Without Saving","str_comp_abandon":"Don\u2019t Save","str_comp_returntomessage":"Return to Message","str_comp_keepwriting":"Keep Writing","str_comp_close_attachmentprocessing":"You still have attachments uploading. Are you sure you want to close?","str_comp_close_confirm":"Your message has not been sent. Do you want to save it in your Drafts folder?","str_comp_close":"Confirm Close","str_comp_label_to":"TO:","str_comp_label_cc":"CC:","str_comp_btn_show_bcc":"Add BCC","str_comp_label_bcc":"BCC:","str_comp_btn_hide_bcc":"Hide BCC","str_comp_label_subject":"SUBJECT:","str_comp_error_email_lozenge_attr":"Double-click to correct this address","str_comp_conf_bcc":"Remove all BCC addresses you've entered?","str_name_format":"{{given_name}} {{middle_name}} {{family_name}}","str_form_lbl_nickname":"Nickname:","str_address_remove_hd":"Delete This Address?","str_sc_remove_bd":"The address <strong>{{name}}<\/strong> appears here because you've used it regularly in the past. Are you sure you want to delete this email address?","str_contacts_remove_bd":"The address <strong>{{name}}<\/strong> appears here because it is in your Contacts. Are you sure you want to delete this email address?","str_address_removed_hd":"Address Deleted","str_address_removed_bd":"The email address <strong>{{name}}<\/strong> has been successfully deleted.","str_comp_attachments_attr":"Attach files to this email; click to open or close","str_comp_attachments":"Attachments","str_comp_emoticons_attr":"Add emoticons; click to open or close","str_comp_emoticons":"Emoticons","str_comp_format_attr":"Change fonts or colors, add Web links, check spelling, and do more; click to open or close","str_comp_format":"Format","str_comp_close_format_attr":"Close the formatting panel","str_comp_close_format":"Close Formatting","str_comp_font_menu_attr":"Select a font","str_rte_font_arial_attr":"arial, helvetica, sans-serif","str_rte_font_arial":"Sans Serif 1","str_rte_font_tahoma_attr":"tahoma, new york, times, serif","str_rte_font_tahoma":"Sans Serif 2","str_rte_font_verdana_attr":"verdana, helvetica, sans-serif","str_rte_font_verdana":"Sans Serif 3","str_rte_font_times_attr":"times new roman, new york, times, serif","str_rte_font_times":"Serif 1","str_rte_font_bookman_attr":"bookman old style, new york, times, serif","str_rte_font_bookman":"Serif 2","str_rte_font_courier_attr":"Courier New, courier, monaco, monospace, sans-serif","str_rte_font_courier":"Courier New","str_rte_font_garamond_attr":"garamond, new york, times, serif","str_rte_font_garamond":"Garamond","str_rte_font_lucida_attr":"lucida console, sans-serif","str_rte_font_lucida":"Lucida Console","str_comp_font_size_attr":"Select a font size","str_rte_font_size_8":"8","str_rte_font_size_10":"10","str_rte_font_size_12":"12","str_rte_font_size_14":"14","str_rte_font_size_18":"18","str_rte_font_size_24":"24","str_rte_font_size_36":"36","str_rte_bold_attr":"Bold","str_rte_bold":"Bold","str_rte_italic_attr":"Italicize","str_rte_italic":"Italic","str_rte_underline_attr":"Underline","str_rte_underline":"Underline","str_rte_color_attr":"Set text color","str_rte_color":"Text color","str_rte_right_to_left":"Right to left","str_rte_left_to_right":"Left to right","str_rte_check_spelling_attr":"Check spelling of text in the selected language","str_rte_check_spelling":"Check spelling","str_toolbar_spelling_menu_toggle_attr":"Select language","str_toolbar_spelling_menu_toggle":"Select Language","str_rte_hilite_color_attr":"Set text highlight color","str_rte_hilite_color":"Text highlight color","str_rte_text_alignment_attr":"Text alignment","str_rte_text_alignment":"Text alignment","str_rte_indentation_attr":"Indentation","str_rte_indent":"Indent","str_rte_list_attr":"List","str_rte_list":"List","str_rte_link_attr":"Add a Web link to selected text; if no text is selected, add a Web link","str_rte_link":"Link","str_menu_indent":"Increase Indent","str_menu_outdent":"Decrease Indent","str_comp_close_emoticons_attr":"Close the emoticon panel","str_comp_close_emoticons":"Close Emoticons","str_emoticon_happy":":) happy","str_emoticon_sad":":( sad","str_emoticon_winking":";) winking","str_emoticon_confused":":-\/ confused","str_emoticon_lovestruck":":x lovestruck","str_emoticon_blushing":":&quot;&gt; blushing","str_emoticon_tongue":":P tongue","str_emoticon_kiss":":-* kiss","str_emoticon_broken_heart":"=(( broken heart","str_emoticon_sigh":":-&lt; sigh","str_emoticon_wits_end":"~X( at wits' end","str_emoticon_surprise":":-O surprise","str_emoticon_angry":"X( angry","str_emoticon_cool":"B-) cool","str_emoticon_devil":"&gt;:) devil","str_emoticon_crying":":(( crying","str_emoticon_straight_face":":| straight face","str_emoticon_raised_eyebrows":"\/:) raised eyebrows","str_emoticon_angel":"O:-) angel","str_emoticon_nerd":":-B nerd","str_emoticon_phbbbbt":"&gt;:P phbbbbt","str_emoticon_wave":":-h wave","str_emoticon_rolling_eyes":"8-| rolling eyes","str_emoticon_sick":":-&amp; sick","str_emoticon_shh":":-$ don't tell anyone shh!","str_emoticon_party":"&lt;:-P party","str_emoticon_yawn":"(:| yawn","str_emoticon_thinking":":-? thinking","str_emoticon_laughing":":)) laughing","str_emoticon_rofl":"=)) rolling on the floor","str_emoticon_big_grin":":D big grin","str_emoticon_cowboy":"&lt;):) cowboy","str_emoticon_wasnt_me":"^#(^ it wasn't me","str_emoticon_batting_eyelashes":";;) batting eyelashes","str_emoticon_big_hug":"&gt;:D&lt; big hug","str_emoticon_smug":":&gt; smug","str_emoticon_worried":":-S worried","str_emoticon_whew":"#:-S whew!","str_emoticon_talk_to_the_hand":"=; talk to the hand","str_emoticon_sleepy":"I-) sleepy","str_emoticon_loser":"L-) loser","str_emoticon_not_talking":"[-( not talking","str_emoticon_on_the_phone":":)] on the phone","str_emoticon_daydreaming":"8-&gt; day dreaming","str_emoticon_clown":":O) clown","str_emoticon_silly":"8-} silly","str_emoticon_drooling":"=P~ drooling","str_emoticon_doh":"#-o d'oh!","str_emoticon_applause":"=D> applause","str_emoticon_nail_biting":":-SS nail biting","str_emoticon_hypnotized":"@-) hypnotized","str_emoticon_liar":":^o liar","str_emoticon_waiting":":-w waiting","str_emoticon_call_me":":-c call me","str_emoticon_cheer":"~^o^~ cheer","str_emoticon_dizzy":"'@^@||| dizzy","str_emoticon_cook":"[]--- cook","str_emoticon_eat":"^O^||3 eat","str_emoticon_give_up":":-(||> give up","str_emoticon_cold":"'+_+ cold","str_emoticon_hot":":::^^::: hot","str_emoticon_music":"o|^_^|o music","str_emoticon_puke":":puke! puke","str_emoticon_sing":"o|\\~ sing","str_emoticon_catch":"o|:-) catch","str_emoticon_exercise":"[]==[] exercise","str_emoticon_high_five":":-)\/\\:-) high five","str_emoticon_play_game":":(game) play game","str_emoticon_search_me":"'@-@ search me","str_emoticon_spooky":":->~~ spooky","str_emoticon_studying":"?@_@? studying","str_emoticon_tv":":(tv) tv","str_emoticon_gift":"&[] gift","str_emoticon_unlucky":"%||:-{ unlucky","str_emoticon_down_on_luck":"%*-{ down on luck","str_emoticon_fight":":(fight) fight","str_comp_close_attachments_attr":"Close the attachment panel","str_comp_close_attachments":"Close Attachments","str_comp_attach_menu_title":"Choose from Uploader options","str_comp_attach_menu_btn":"Uploader options...","str_comp_attach_removeall":"Remove All","str_rte_attachments_try_again":"Try Again","str_rte_attachments_basic_message":"Trouble uploading?","str_rte_attachments_basic_link_text":"Try our Basic Uploader","str_rte_attachments_progress":"{{file_attach_num_transferred}} of {{file_attach_num_files}}","str_rte_attachments_attach_files":"Looking to attach photos & documents?","str_rte_attachments_drag_files":"Drag multiple files into this viewing pane.","str_rte_attachments_num_files":"{{file_attach_num_files}} Files","str_rte_attachments_sizes":"({{transferred_size}} of {{total_size}})","str_comp_messagebody":"Message Body","str_comp_remove":"Remove","str_comp_removeall":"Remove All","str_rte_attachments_megabyte":"MB","str_comp_attach_size_exceeded":"The file(s) you are trying to attach exceed the 25MB attachment size limit.","str_comp_attach_num_files_exceeded":"The file(s) you are trying to attach exceed the maximum number of attachments allowed (50 files).","str_rte_attachments_click_to_retry":"Click to Retry","str_comp_attach_reattach_title":"Try Attaching Again","str_comp_attach_reattach_body":"We're having trouble attaching this file with our standard Flash uploader. Try attaching again. (Flash uploader will be temporarily disabled.)","str_comp_attach_reattach_failure_title":"Unable to Attach File","str_comp_attach_reattach_failure_body":"Sorry, this file cannot be attached. You may want to check your network connection, and check that the file is valid.","str_attach_menu_accel_mac":"Cmd+Shift+F","str_attach_menu_accel_pc":"Ctrl+Shift+F","str_comp_attach_singular":"Attach File","str_rte_attachments_bytes":"bytes","str_rte_attachments_kilobyte":"KB","str_rte_attachments_alert_averror":"Warning! There's a problem scanning this file for a virus.","str_rte_attachments_alert_size":"The file you've selected exceeds the attachment size limit (25 MB).","str_rte_attachments_attachFailedWarning":"Warning! This attachment could not be uploaded:","str_rte_attachments_bd1":"We're sorry you are having problems attaching files.","str_rte_attachments_bd2":"Please try to attach them again using the '{{str_rte_attachments_retry}}' button. If you continue to experience problems, you can try a different way to attach using the '{{str_rte_attachments_switch}}' button. After clicking '{{str_rte_attachments_switch}}', please try to attach your file(s) again. This change is not permanent.","str_rte_attachments_retry":"Retry","str_rte_attachments_switch":"Switch","str_rte_attachments_bp_upsell_header":"Attach files more easily.","str_rte_attachments_bp_upsell_msg":"Attach batches of photos and docs, view and rotate photos and drag photos and docs from your computer.","str_rte_attachments_file_single":"1 File","str_rte_attachments_hd":"Retry attaching your files","str_rte_attachments_noAVScanWarning":"Warning! Could not virus scan:","str_rte_attachments_virusWarning":"Warning! This attachment has a virus and must be removed:","str_rte_attachments_virus_mult":"{{num_virus_files}} files contain a virus and must be removed","str_rte_attachments_virus_single":"1 file contains a virus and must be removed","str_comp_attach_btn_download":"Download","str_comp_attach_cleaned":"Some viruses were detected but cleaned.","str_comp_attach_cleaned_prefix":"[Cleaned]","str_comp_attach_decimalSeparator":".","str_comp_attach_download_network_error":"A network error has occurred. Please check your connection and try again.","str_comp_attach_download_server_error":"A server error has occurred. Please try again later.","str_comp_attach_error":"Attachment Size Limit","str_comp_attach_install_app":"Yahoo! has partnered with {{partner_name}} to offer an alternative for sending large files.  Would you like to use the {{app_name}} application from {{partner_name}}?","str_comp_attach_menuoption_basic":"Basic (single file upload)","str_comp_attach_menuoption_default":"Default (allows multi-select)","str_comp_attach_more":"Attach More","str_comp_attach_multiple_errors":"There were problems scanning the files.  Please see the list below.  You may also want to try downloading files individually.","str_comp_attach_no_scan_prefix":"[Not scanned]","str_comp_attach_no_virus":"Scanning is complete and no viruses were detected.","str_comp_attach_outage_dialog_header":"Server Outage","str_comp_attach_outage_message":"There were problems downloading your files.  Please try again later.<br\/>Error: {{error_num}}","str_comp_attach_reattach_button":"Reattach File","str_comp_attach_refer_app":"Try installing the Attach Large Files application to send files up to 100MB.","str_comp_attach_removeall_attr":"Remove all attachments","str_comp_attach_scan_failed":"Virus scan did not complete.","str_comp_attach_scan_failed_msg":"Files not scanned are available for download but should be treated with caution.","str_comp_attach_size_byte":"B","str_comp_attach_size_kb":"KB","str_comp_attach_size_mb":"MB","str_comp_attach_size_unknown":"Unknown Size","str_comp_attach_virus_found":"Virus detected.","str_comp_attach_virus_found_no_dwnld":"Files marked with a {{warning_icon}} will not be downloaded.","str_comp_attach_virus_prefix":"[Virus found]","str_max_sms_chars":"144","str_close_attr":"Close panel","str_comp_switch_rich_text":"Switch to Rich Text","str_comp_send_attr":"Send this email [{{str_ctrl}}+Enter] | Send this message and keep existing draft [{{str_menu_accel_shift_click}}]","str_comp_cancel_attr":"Close this email without saving","str_comp_cancel":"Cancel","str_comp_savedraft_attr":"Save this email in your Drafts folder [{{str_ctrl}}+S]","str_comp_savedraft":"Save as Draft","str_menu_accel_shift_click":"Shift+click","str_comp_loading":"Loading original email, please wait...","str_comp_loadslow":"{{str_branding_mail}} is taking longer than normal to load the original email.","str_comp_loadretry":"Click here to retry","str_comp_loaderr":"{{str_branding_mail}} is having a problem retrieving the original email for reply or forward","str_comp_loadpopulate":"{{str_branding_mail}} found the original email, but encountered problems displaying it.  Please try again later.","str_comp_ignore_attr":"Ignore this occurrence","str_comp_ignore":"Ignore","str_comp_ignore_all_attr":"Ignore all occurrences of this word","str_comp_ignore_all":"Ignore All","str_rte_bullet_list_attr":"Format text as a bulleted list","str_rte_bullet_list":"Bulleted list","str_rte_numbered_list_attr":"Format text as numbered list","str_rte_numbered_list":"Numbered list","str_rte_align_l":"Flush Left","str_rte_align_c":"Centered","str_rte_align_r":"Flush Right","str_comp_title":"Compose:&nbsp;"});
}, '1.0.0');YUI.add('compose_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_uploading_desc":"","str_upload_success":"","str_upload_failed":"","str_upload_failed_desc":"","str_btn_download":"","str_btn_login":"","str_msg_view_btn_upload_ybox":"","str_rte_spell_lang_auto_select":"Auto-Select Spelling Language","str_rte_spell_lang_english_us":"English (US)","str_rte_spell_lang_english_uk":"English (UK)","str_rte_spell_lang_english_ca":"English (CA)","str_rte_spell_lang_arabic":"Arabic","str_rte_spell_lang_bengali":"Bengali","str_rte_spell_lang_bulgarian":"Bulgarian","str_rte_spell_lang_croatian":"Croatian","str_rte_spell_lang_czech":"Czech","str_rte_spell_lang_danish":"Danish","str_rte_spell_lang_dutch":"Dutch","str_rte_spell_lang_estonian":"Estonian","str_rte_spell_lang_filipino":"Filipino","str_rte_spell_lang_finnish":"Finnish","str_rte_spell_lang_french_canada":"French (Canada)","str_rte_spell_lang_french_france":"French (France)","str_rte_spell_lang_french_switzerland":"French (Switzerland)","str_rte_spell_lang_german_austria":"German (Austria)","str_rte_spell_lang_german_switzerland":"German (Switzerland)","str_rte_spell_lang_german_germany":"German (Germany)","str_rte_spell_lang_greek":"Greek","str_rte_spell_lang_gujarati":"Gujarati","str_rte_spell_lang_hebrew":"Hebrew","str_rte_spell_lang_hindi":"Hindi","str_rte_spell_lang_hungarian":"Hungarian","str_rte_spell_lang_indonesian":"Indonesian","str_rte_spell_lang_italian":"Italian","str_rte_spell_lang_kannada":"Kannada","str_rte_spell_lang_latvian":"Latvian","str_rte_spell_lang_lithuanian":"Lithuanian","str_rte_spell_lang_malay":"Malay","str_rte_spell_lang_malayalam":"Malayalam","str_rte_spell_lang_marathi":"Marathi","str_rte_spell_lang_norwegian_bokmal":"Norwegian Bokmal","str_rte_spell_lang_norwegian_nynorsk":"Norwegian Nynorsk","str_rte_spell_lang_polish":"Polish","str_rte_spell_lang_portuguese_brazil":"Portuguese (Brazil)","str_rte_spell_lang_portuguese_portugal":"Portuguese (Portugal)","str_rte_spell_lang_romanian":"Romanian","str_rte_spell_lang_russian":"Russian","str_rte_spell_lang_serbian":"Serbian","str_rte_spell_lang_slovak":"Slovak","str_rte_spell_lang_slovenian":"Slovenian","str_rte_spell_lang_spanish":"Spanish","str_rte_spell_lang_swedish":"Swedish","str_rte_spell_lang_tamil":"Tamil","str_rte_spell_lang_telugu":"Telugu","str_rte_spell_lang_turkish":"Turkish","str_rte_spell_lang_ukrainian":"Ukrainian","str_rte_spell_lang_vietnamese":"Vietnamese","str_comp_captcha_reader_hint":"Attention users who are both hearing- and vision-impaired: To complete this form you must enter a word that is part of an image or a few digits from an audio recording. If you cannot read the image or hear the audio, {{str_branding}} is happy to assist you. A representative from Customer Care will need to contact you. Please provide your phone number and email address and send your request by visiting this URL - <a href=\"{{conf_url_help_general}}\">{{conf_url_help_general}}<\/a> To request assistance with registration, please first read the {{str_branding}} Terms of Service located at <a href=\"{{conf_url_tos}}\">{{conf_url_tos}}<\/a> before submitting your request.","str_comp_captcha_header":"To help fight spam, please type in the characters from the box below.","str_comp_captcha_help":"Need help?","str_comp_captcha_enter_code":"Enter the code","str_comp_captcha_img_title":"Enter the characters displayed","str_comp_captcha_img_alt":"CAPTCHA Image","str_comp_captcha_numbers_only":"NUMBERS ONLY","str_comp_captcha_audio_playing":"Audio code is playing...","str_comp_captcha_replay":"Replay","str_comp_captcha_btn_audio_code_attr":"Click here for an audio code","str_comp_captcha_btn_audio_code":"Audio code","str_comp_captcha_back_to_visual":"Back to visual code","str_comp_spellcheck_complete_title":"Spell Check Complete","str_comp_spellcheck_complete_message":"Your message contains no spelling errors!","str_comp_no_suggestions":"No Suggestions","str_modal_check_spelling":"Check Spelling","str_modal_mispelled_words":"Misspelled words are now underlined in red. To view a list of suggested corrections for any misspelled word, just {{str_right_click}} it.","str_modal_delete_open_draft":"One or more drafts that you are trying to delete are open. Please close all drafts that you want to delete and try again.","str_modal_full_header":"Full Header","str_modal_message_delete_title":"Delete Message","str_modal_message_delete_single_question":"Are you sure you want to permanently delete the selected message?","str_modal_message_delete_question":"Are you sure you want to permanently delete the selected messages?","str_modal_message_delete_num_question":"Are you sure you want to delete <b>all {{num_selected}}<\/b> of the selected messages?","str_modal_message_delete_all_title":"Delete All Messages","str_modal_no_msg_title":"No Message Selected","str_modal_zero_selected_conv":"You must select at least one conversation to perform this action.","str_modal_zero_selected":"You must select at least one email to perform this action.","str_modal_too_many_msgs_title":"Too Many Messages Selected","str_modal_select_single_message_conv":"This operation can't be performed on more than one conversation. Select a single conversation and try again.","str_modal_select_single_message":"This operation can't be performed on more than one email. Select a single email and try again.","str_modal_last_msg_title":"Reached Last Message","str_modal_first_msg_title":"Reached First Message","str_modal_preview_msg_demo":"<h2>Message Preview<\/h2>Hover over the 'read' column in this list and you'll see a preview of your message.","str_cascd_ExceededMaxTo":"The message To: field exceeds the maximum number of recipients","str_cascd_ExceededMaxCc":"The message Cc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxBcc":"The message Bcc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxRecipients":"The message address fields exceed the maximum number of recipients","str_cascd_ExceededMaxHourlyMessages":"Number of hourly messages exceeded","str_cascd_ExceededMaxDailyMessages":"Number of daily messages exceeded","str_cascd_InvalidRecipientAddress":"The message To: Cc: or Bcc: field contains a malformed email address","str_btn_add_recipient_attr":"Add {{email_id}} to your Contacts","str_comp_original_msg":"Original Message","str_comp_email_sent":"Email Sent","str_comp_done":"Done","str_btn_recipient_lozenge_attr":"{{email_id}}","str_comp_auto_add_to_contacts":"Automatically add new recipients to Contacts","str_comp_recipients":"Recipients","str_toolbar_back_to_message":"Back to Message","str_comp_captcha_msg":"Your message was not sent","str_comp_captcha_msg_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_msg_contact_cust_care":"If this error continues, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}} Customer Care<\/a> for further help.","str_comp_captcha_apology":"We apologize for the inconvenience.","str_comp_captcha_account":"Account has been blocked from sending","str_comp_captcha_account_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_account_contact_cust_care":"To restore the ability to send from your account, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}}<\/a> Customer Care for further help.","str_srch_no_results":"No messages found","str_srch_enter_search_terms":"Please enter one or more search terms","str_srch_find_by_person":"Find messages from a specific person. Type in a name, Yahoo! ID, or email address.","str_srch_type_name":"Type name or email address","str_srch_person_btn_attr":"Search","str_srch_person_btn":"Search","str_srch_find_by_file":"Find messages with attachments such as photos, videos, Word docs, and more.","str_file_all_types":"All attachment types","str_file_pdf":"PDF","str_file_ppt":"PowerPoint","str_file_xls":"Excel","str_file_doc":"Word","str_file_img":"Image","str_file_video":"Video","str_file_audio":"Music","str_srch_find_by_date":"Find messages you received recently:","str_srch_date_today":"Today","str_srch_date_last_week":"Last Week","str_srch_date_last_month":"Last Month","str_comp_message_sent":"Message Sent","str_comp_message_not_sent":"Message Not Sent","str_comp_captcha_modal_header":"Verification"});
}, '1.0.0');YUI.add('contacts_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_form_placeholder_first":"First","str_form_placeholder_middle":"Middle","str_form_placeholder_last":"Last","str_cont_edit_cont":"","str_cont_add_to_cont":"Add to Contacts","str_help":"Help","str_cont_lbl_add_xtra_email":"Add another email address","str_cont_lbl_remove_xtra_email":"Remove email address","str_form_lbl_email":"Email:","str_form_lbl_email_email":"Email","str_form_lbl_email_work":"Work Email","str_form_lbl_email_home":"Home Email","str_form_lbl_im_dont_add":"Don't add to {{str_branding_messenger}}","str_cont_lbl_add_xtra_im":"Add another instant messenger ID","str_cont_lbl_remove_xtra_im":"Remove instant messenger ID","str_form_lbl_im":"Instant Message:","str_form_lbl_im_ymsgr":"{{str_branding_messenger}}","str_form_lbl_im_msn":"Windows Live (MSN)","str_form_lbl_im_aol":"AOL\/AIM","str_form_lbl_im_gtalk":"GTalk","str_form_lbl_im_icq":"ICQ","str_form_lbl_im_irc":"IRC","str_form_lbl_im_qq":"QQ","str_form_lbl_im_skype":"Skype","str_form_lbl_im_ali":"Ali Wangwang","str_form_lbl_im_yjapan":"{{str_branding}} Japan","str_form_lbl_im_jabber":"Jabber","str_form_lbl_im_mslcs":"Microsoft LCS","str_form_lbl_im_lotus":"Lotus Sametime","str_cont_lbl_add_xtra_phone":"Add another phone number","str_cont_lbl_remove_xtra_phone":"Remove phone number","str_form_lbl_phone":"Phone:","str_form_lbl_phone_phone":"Phone","str_form_lbl_phone_mobile":"Mobile","str_form_lbl_phone_home":"Home Phone","str_form_lbl_phone_work":"Work Phone","str_form_lbl_phone_pager":"Pager","str_form_lbl_phone_fax":"Fax","str_cont_add_contact_confirm_short":"Contact has been added.","str_cont_add_contact_confirm_update":"Contact has been updated.","str_cont_add_contact_confirm_long":"will receive an email from you asking permission to share contact info.","str_cont_add_to_cont_confirm":"Contact Added","str_cont_choose_one_selected":"1 selected","str_cont_all_contacts":"All Contacts","str_cont_choose_contacts":"Choose Contacts","str_cont_add_contacts_to_list":"Add Contacts to list {{list_name}}","str_cont_look_for_filter":"View:","str_con_list_look_for_attr":"Start typing a name or address to search","str_cont_look_for":"Look for...","str_cont_list_select_all_cont":"Select All","str_cont_search_no_contacts_found":"No contacts found","str_cont_loading":"Loading Contacts...","str_cont_choose_select_count":"{{contacts_selected}} selected","str_cont_choose_none_selected":"0 selected","str_menu_email_history":"View Messages From...","str_menu_edit_address":"Edit Address","str_menu_copy_address":"Copy Address","str_menu_remove_address":"Remove Address","str_menu_view_contact_details":"View Contact Details","str_menu_add_to_contacts":"Add to Contacts...","str_cont_btn_stop_following_attr":"Stop Following","str_cont_btn_stop_following":"Stop Following","str_cont_btn_follow_attr":"Follow","str_cont_btn_follow":"Follow","str_cont_btn_following":"Following","str_modal_listname_err_duplicate":"A list with that name already exists. Please enter another name.","str_modal_listname_err_empty":"Please enter a list name.","str_modal_listname_err_invalid":"Please use only numbers, letters, \u201c_\u201d, and \u201c-\u201d in the list name.","str_modal_listname_err_length":"The list name is too long. Please try shortening it.","str_modal_listname":"List name:","str_modal_create_new_list":"Create a New List","str_toast_saving":"<b>Saving...<\/b>","str_cont_title_new_list_created":"Your List Has Been Created","str_cont_new_list_created_with_one_contact":"Success! 1 contact has been added to your <strong>{{list_name}}<\/strong> list.","str_cont_new_list_created_with_contacts":"Success! {{contacts_selected}} contacts have been added to your <strong>{{list_name}}<\/strong> list.","str_cont_new_list_created_with_no_contacts":"Success! Your <strong>{{list_name}}<\/strong> list has been created. Add contacts to this list via the <strong>Contacts Tab<\/strong>.","str_cont_title_unable_to_create_list":"Unable To Create a New List","str_cont_new_list_error":"Sorry! We were unable to create your list due to an unknown error.  However, you can still manually create a list via the <strong>Contacts Tab<\/strong>."});
}, '1.0.0');YUI.add('postlaunch_jp_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_unread_fldlist_nofld":"","str_size_gigabyte":"","str_con_list_ctc_name_attr":"{{name}} ({{yid}}) \u2022 {{availability}}","str_con_list_ctc_list_attr":"","str_con_invalid_address":"","str_menu_antispam":"","str_con_contacts_list_title":"","str_btn_edit_contact_attr":"","str_con_group_list_title":"","str_con_list_ctc_action_attr":"Double-click to start an instant message; Single-click to see only email from {{name}}; Right-click to see more commands","str_storage_content":"","str_nav_left_folderlist":"","str_nav_left_contacts":"Contacts","str_nav_left_calendar":"","str_nav_left_notepad":"","str_cal_weekday_jp_short_sunday":"","str_cal_weekday_jp_short_monday":"","str_cal_weekday_jp_short_tuesday":"","str_cal_weekday_jp_short_wednesday":"","str_cal_weekday_jp_short_thursday":"","str_cal_weekday_jp_short_friday":"","str_cal_weekday_jp_short_saturday":"","str_mail_month_january":"January","str_mail_month_february":"February","str_mail_month_march":"March","str_mail_month_april":"April","str_mail_month_may":"May","str_mail_month_june":"June","str_mail_month_july":"July","str_mail_month_august":"August","str_mail_month_september":"September","str_mail_month_october":"October","str_mail_month_november":"November","str_mail_month_december":"December","str_cal_event_add":"","str_cal_event_type_promise":"","str_cal_event_edit":"","str_cal_event_delete":"","str_cal_task_add":"","str_cal_task_edit":"","str_cal_task_delete":"","str_cal_event_list_allday":"","str_cal_task_no_limit":"","str_cal_error":"We are sorry! Something went wrong...","str_cal_error_zero_term":"","str_cal_error_no_exist_day":"","str_cal_date_picker_title":"","str_cal_suffix_year":"","str_cal_show_left_panel":"Left Panel","str_cal_show_todo":"To Dos","str_cal_hide_left_panel":"Hide Left Panel","str_cal_hide_todo":"Hide To Dos","str_cal_event":"","str_cal_event_time_select":"","str_cal_event_term_select":"","str_cal_event_date_pick":"","str_cal_suffix_month":"","str_cal_suffix_day":"","str_cal_suffix_hour":"","str_cal_suffix_minute":"","str_cal_event_allday":"","str_cal_suffix_term_hour":"","str_cal_task_unfinished":"","str_cal_task_finished":"","str_cal_task_title":"","str_cal_task_limit":"","str_cal_task_progress":"","str_cal_task_date_pick":"","str_offline_msg_spam_report_sgplus":"","str_offline_msg_spam_report":"","str_offline_msg_report_move_to_spam":"","str_offline_msg_ham_report_sgplus":"","str_offline_msg_ham_report":"","str_offline_msg_report_move_to_inbox":"","str_toolbar_forward_menu_toggle_attr":"","str_toolbar_forward_menu_toggle":"","str_reedit_attr":"","str_reedit":"","str_form_placeholder_first":"First","str_form_placeholder_middle":"Middle","str_form_placeholder_last":"Last","str_cont_edit_cont":"","str_cont_add_to_cont":"Add to Contacts","str_help":"Help","str_cont_lbl_add_xtra_email":"Add another email address","str_cont_lbl_remove_xtra_email":"Remove email address","str_form_lbl_email":"Email:","str_form_lbl_email_email":"Email","str_form_lbl_email_work":"Work Email","str_form_lbl_email_home":"Home Email","str_form_lbl_im_dont_add":"Don't add to {{str_branding_messenger}}","str_cont_lbl_add_xtra_im":"Add another instant messenger ID","str_cont_lbl_remove_xtra_im":"Remove instant messenger ID","str_form_lbl_im":"Instant Message:","str_form_lbl_im_ymsgr":"{{str_branding_messenger}}","str_form_lbl_im_msn":"Windows Live (MSN)","str_form_lbl_im_aol":"AOL\/AIM","str_form_lbl_im_gtalk":"GTalk","str_form_lbl_im_icq":"ICQ","str_form_lbl_im_irc":"IRC","str_form_lbl_im_qq":"QQ","str_form_lbl_im_skype":"Skype","str_form_lbl_im_ali":"Ali Wangwang","str_form_lbl_im_yjapan":"{{str_branding}} Japan","str_form_lbl_im_jabber":"Jabber","str_form_lbl_im_mslcs":"Microsoft LCS","str_form_lbl_im_lotus":"Lotus Sametime","str_cont_lbl_add_xtra_phone":"Add another phone number","str_cont_lbl_remove_xtra_phone":"Remove phone number","str_form_lbl_phone":"Phone:","str_form_lbl_phone_phone":"Phone","str_form_lbl_phone_mobile":"Mobile","str_form_lbl_phone_home":"Home Phone","str_form_lbl_phone_work":"Work Phone","str_form_lbl_phone_pager":"Pager","str_form_lbl_phone_fax":"Fax","str_menu_view_contact_details":"View Contact Details","str_menu_edit_contact":"","str_menu_add_category":""});
}, '1.0.0');YUI.add("common-ui-menu-helper",function(A){A.namespace("common.ui");A.common.ui.MenuHelper=new function(){function C(G,F,E){if(G.menu){G.unplug(A.Plugin.Menu);}if(F.menu&&(F.menu instanceof A.Node)){F.menu.detachAll();}A.use("common-utils","menus_css","comms-ui-menu-base",function(J){F=F||{};var I,H=J.one("#loadingMenu");if(H){H.remove();}G.plug(J.Plugin.Menu,F);G.menuCreated=true;if(G.menu){if(NeoConfig.intl=="jp"){G.menu._root.on("menu:state",function(K){J.fire("jp:menuhelper:state",K.state);});}I=G.menu.getMenuNode();I.delegate("click",function(N){var O=J.common.Utils.getDataAction(N),M=O.action,L=O.node,K=N.currentTarget.one("a");if(!M||(L&&L.hasClass("disabled"))){N.halt();return;}if(K&&(!K.getAttribute("href")||"#"==K.getAttribute("href"))){N.preventDefault();}if(M.match(/^om:(.*):(.*):(.*)$/)){J.use("om-common-utils",function(P){P.om.common.Utils.fireEvent(M);});}else{I.fire("menuSelected",{dataAction:M,item:L});}try{G.menu&&G.menu.hide();if(F.isContext){I.blur();}else{if(!F.blur){if(G.one("a")){G.one("a").focus();}else{G.focus();}}}}catch(N){}},"li, dd a");J.fire("menu:created",I);if(!F.cbafter&&E){E();}G.menu.show();if(!F.cbafter){return;}}if(E){E();}});}function B(F,E){A.Lang.later(500,this,function(){var M=E?(E.isContext?true:false):false,P=F.get("region"),I=A.one("body").getStyle("direction")=="rtl",N=A.ui.Templates._shared_module_offscreen_bin_menus_loading,O=A.one("window"),R,Q,H,L,J,G,K;if(A.one("#loadingMenu")||F.menuCreated){return;}A.one("body").append(A.common.Utils.substitute(N.base,null,0,0,strings));L=A.one("body").get("lastChild");if(M){R=E.xy||F.getXY();Q=D(F,L,R);}else{L.setStyles({"position":"absolute","visibility":"hidden","display":"block","top":0});Q={"top":P.bottom,"left":P.left,"right":"auto"};J=L.get("region").height;G=O.get("scrollTop");K=O.get("winHeight");if(J>K-(P.bottom-G)&&(J<P.top-G)){Q.top=(P.top-J)+"px";}if(I){Q.left=((P.left+P.width)-(L.get("region").width))+"px";}Q.visibility="visible";}Q.zIndex=4000;L.setStyles(Q);});}function D(M,F,P){var O,K=P[0],J=P[1],L,I,N=15,G,H=M.get("winHeight"),E=A.one("window").get("scrollTop")||0;F.setStyles({"display":"block","bottom":"auto","left":-1000,"right":"auto","position":"absolute"});G=parseInt(F.get("region").height);L=(H-N-J)<G;I=(M.get("docWidth")-N-K)<parseInt(F.get("region").width);O={"top":J+E,"left":K};if(L){O.top=H+E-G-N;}if(I){O.left="auto";O.right=N+"px";}return O;}A.mix(this,{create:C,createLoadingMenu:B});};},"1.0.0",{requires:["_shared_module_offscreen_bin_menus_loading"]});YUI.add("contacts-api-config",function(E){E.namespace("contacts");var A=E.contacts,D={1:"asc",2:"desc"},C={1:"first",3:"last",6:"email"},B;B=function(){var H=this,G=function(I){return !!I;},F={baseHost:{validator:G},uri:{},headers:{},wssid:{},guid:{},requestFn:{},wspath:{value:"/ws/sd",validator:G},start:{},count:{value:"max",validator:G},sortfields:{},out:{value:"name,email,nickname,guid,yahooid,phone,otherid,guid"},prefs:{value:null},sort:{},fields:{},view:{value:[]},rev:{value:0,validator:G},loadSmartContacts:{value:true},reloadOnUpdate:{value:true},fieldsToProcess:{value:[],validator:function(I){return E.Lang.isArray(I);}}};H.addAttrs(F);H.setSortField=function(I){H.set("sortfields",C[I]);return H.get("sortfields");};H.setSortOrder=function(I){H.set("sort",D[I]);return H.get("sort");};};E.augment(B,E.Attribute);A.config=new B();if(A.clientConfig){A.config.setAttrs(A.clientConfig);}},"1.0.0",{requires:["attribute"]});YUI.add("mail-ui-messagepane-warnings",function(D){D.namespace("mail.ui");var A=D.common.Utils.substitute,C=strings;function B(G){if(confirm(A([C["str_warning_msg_read_form_part1"],C["str_warning_msg_read_form_part2"]].join("  "),C))){G.submit();}return false;}function F(G){if(strings.str_cfg_tog_exlink_alert_page){window.open(strings.str_cfg_url_exlink_alert_page+encodeURIComponent(G),"new");return false;}if(confirm(A([C["str_warning_msg_read_link_part1"],C["str_warning_msg_read_link_part2"],C["str_warning_msg_read_link_part3"]].join("  "),C))){window.open(G.href);}return false;}function E(G){if(!G.warningShown){alert(A([C["str_warning_msg_read_password_part1"],C["str_warning_msg_read_password_part2"]].join("  "),C));G.warningShown=1;}}D.mail.ui.Warnings={showFormWarning:B,showLinkWarning:F,showPasswordWarning:E};},"1.0.0",{requires:["common-utils"]});YUI.add("_shared_module_message_display_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_message_display_rollup={base:"{{message_selection}}{{message_selection_else}}",page_conversation_history_else:"<h2>{{str_msg-view_multiple_selected_msgs}}</h2> ",page_conversation_history:"<h2>{{str_msg-view_multiple_selected_convs}}</h2> ",multiple_selected_msgs:"{{page_conversation_history_else}} {{page_conversation_history}} ",page_conversation_history_else1:"<h2>{{str_msg-view_single_selected_msg}}</h2> <div>{{str_msg-view_single_selected_msg_info}}</div> ",page_conversation_history1:"<h2>{{str_msg-view_single_selected_conv}}</h2> <div>{{str_msg-view_single_selected_conv_info}}</div> ",multiple_selected_msgs_else:"{{page_conversation_history_else1}} {{page_conversation_history1}} ",message_selection:'<div class="msgs-selected"> {{multiple_selected_msgs}} {{multiple_selected_msgs_else}} </div>',msg_blocked:'<div class="msg-blocked"> <h3>{{str_msg_view_heading_blocked_images}}</h3> <span class="rht"> <span class="btn left"><a role="button" href="#" title="{{str_msg_view_btn_show_images_attr}}" data-action="show-images">{{str_msg_view_btn_show_images}}</a></span><span class="btn right"><a role="button" href="#" title="{{str_msg_view_btn_options_attr}}" data-action="mail-options">{{str_msg_view_btn_options}}</a></span> </span></div> ',page_loading:"hidden",page_loading_else:"undoreset",inline_cchdr:"<span>{{str_comp_reply_cc}}</span> {{inline_cc_data}}<br> ",inline_attachment_text:'<hr size=1> <div id="inline_attachments"> <div class="inlinemsgheader"> <span>{{str_comp_reply_from}}</span> {{inline_from_data}}<br> <span>{{str_comp_reply_to}}</span> {{inline_to_data}}<br> {{inline_cchdr}} <span>{{str_comp_reply_date}}</span> {{inline_date_data}}<br> <span>{{str_comp_reply_subject}}</span> {{inline_subject_data}}<br><br> </div> {{inlinemsg_text}} </div> ',has_inline_attachments:"{{inline_attachment_text}}  ",page_conversation_history_else2:"{{msg_body_display}} {{has_inline_attachments}} ",page_conversation_timestamp_data:'<h2 class="conv-separator"> <div><b>{{type}}</b> {{timestamp}}</div> </h2>',self:"self",page_message_history:'<li class="{{self}}"> <div class="timestamp"><span>{{timestamp}}</span></div> <div class="msg"> <span class="proper"><span>{{name}}:</span><img class="hidden" src="{{display_img}}" /></span>{{msg}} </div> <div class="fang"></div></li>',page_conversation_history2:'{{page_conversation_timestamp_data}}<ul class="chat-history"> {{page_message_history}}</ul> ',msg_body:'<div {{msg_body_bidi_default_dir}} class="msg-body inner {{page_loading}} {{page_loading_else}}" role="main" aria-label="{{str_msg-view_message_body}}" style="{{msg_body_style}}"> {{page_conversation_history_else2}} {{page_conversation_history2}} </div> ',is_perm:"{{str_comp_loading_error_perm}}",multi_retry:"{{str_comp_multi_retry}} ",multi_retry_else:"{{str_comp_loading_error}} ",is_perm_else:"{{multi_retry}} {{multi_retry_else}} ",can_retry:'<span class="btn left right small"><a role="button" href="#" title="{{str_comp_loading_retry_attr}}" data-action="retry-msg-load">{{str_retry}}</a> </span>',loading_error:"<h2>{{is_perm}} {{is_perm_else}} {{can_retry}} </h2> ",diff_folder_error:"<h2>{{str_error_msg_diff_folder_switch}}</h2> ",loading_slow_msg:"{{str_comp_loading_msg}}",loading_slow_conv:"{{str_comp_loading_conv}}",loading_slow_else:"<h2>{{loading_slow_msg}}{{loading_slow_conv}}</h2> ",loading_slow:'<h2>{{str_comp_slow_loading}} <span class="btn left right small"><a role="button" href="#" title="{{str_comp_loading_retry_attr}}" data-action="retry-msg-load">{{str_retry}}</a> </span> </h2> ',loading_error_else:"{{loading_slow_else}} {{loading_slow}} ",page_loading1:'<div id="loadingpane" class="cm-loadingpane"> {{loading_error}} {{diff_folder_error}} {{loading_error_else}}</div> ',msg_truncated:'<div class="msg-truncated"> <h3>{{str_msg_view_msg_truncated}}</h3> <span class="rht"> <span class="btn left right"><a role="button" href="#" data-action="view-full-msg">{{str_msg_view_btn_view_full}}</a></span> </span></div> ',blocked_images:"{{type}}",blocked_images_else:"image",image:'<div style="background-image:url({{thumbnailurl}});"></div> ',attached_photos:'<li id="{{partId}}" tabindex="0" class="{{blocked_images}}{{blocked_images_else}}" data-action="attach-download"> <div class="file-container" id="photo_field" title="{{str_msg_view_photo_attachment_attr}}"> {{image}} <b></b> </div> <span class="fname">{{filename}}</span> </li> ',msg_has_photo_attachment:'<div class="msg-attachments"> <h3>{{str_photos}}</h3> <ul class="file-attach"> {{attached_photos}} </ul> <span class="btn left right"><a role="button" href="#" class=" btn-downloadattach" data-action="attach-download-all-photos" title="{{str_msg_view_btn_download_all}}">{{str_msg_view_btn_download_all}}</a></span></div> ',image1:'<div style="background-image:url({{thumbnailurl}});"></div> ',attached_files:'<li id="{{partId}}" tabindex="0" tnefid="{{tnefId}}" class="{{type}}" data-action="attach-download"> <div class="file-container" id="attachment_field" title="{{str_msg_view_attachment_attr}}"> {{image1}} <b></b> </div> <span class="fname">{{filename}}</span> </li> ',hide_attachments_else:'<div class="msg-attachments"> <h3>{{str_msg_view_heading_attachments}}</h3> <ul class="file-attach"> {{attached_files}} </ul> <span class="btn left right"><a role="button" id="btn-downloadattach" data-action="attach-download-all" href="#" title="{{str_msg_view_btn_download_all}}">{{str_msg_view_btn_download_all}}</a></span></div> ',msg_has_attachment:"{{hide_attachments_else}} ",folder_message:"{{msg_blocked}} {{msg_body}} {{page_loading1}} {{msg_truncated}} {{msg_has_photo_attachment}} {{msg_has_attachment}} ",details:"details",subanchor:"subanchor",mail_search_enabled:'<a href="http://mail.yahoo.com/" title="{{str_msg_title_search}}" data-action="search" class="{{subanchor}}">',mail_search_enabled1:"</a>",hide_attachments_else1:'<!-- span class="attachments">{{str_msg_hdr_has_attachments}}</span--><span class="btn left right small" data-action="msg-attachments"><a role="button" href="#" class="icon-text attachments" title="{{str_msg_view_btn_download_all}}"><i>{{msg_num_attachments}}</i></a></span> ',msg_has_attachment1:"{{hide_attachments_else1}} ",hidden7:"hidden",hidden6:"hidden",hidden8:"hidden",hidden9:"hidden",hidden5:"hidden",hidden10:"hidden",hidden11:"hidden",hidden12:"hidden",hidden13:"hidden",hidden14:"hidden",show_details:"{{str_show_details_tooltip}}",show_details_else:"{{str_hide_details_tooltip}}",show_details1:"{{str_show_details}}",show_details_else1:"{{str_hide_details}}",message_header_expand:'<div class="header-expand"> <div class="ccto {{hidden7}}"> <div class="baseto {{hidden6}}">{{headerto}} <span class="nobold {{hidden8}}">{{toYou}} {{toPlus}} {{toCount}} {{toMore}}</span><span class="nobold {{hidden9}}">{{tomCount}} {{recip_string}}</span></div> <div class="basecc {{hidden5}}">{{str_msg_hdr_label_cc}} <span class="nobold {{hidden10}}">{{ccmCount}} {{cc_recip_string}}</span><span class="nobold {{hidden11}}">{{str_small_header_you}} {{ccPlus}} {{ccCount}} {{ccMore}}</span></div> <div class="basecc {{hidden12}}">{{str_msg_hdr_label_bcc}} <span class="nobold {{hidden13}}">{{bccmCount}} {{cc_recip_string}}</span><span class="nobold {{hidden14}}">{{str_small_header_you}} {{bccPlus}} {{bccCount}} {{bccMore}}</span></div> </div> <span class="btn small left right"><a role="button" href="#" toggle-on="{{str_show_details}}" toggle-off="{{str_hide_details}}" data-action="toggle-msg-header" title="{{show_details}}{{show_details_else}}">{{show_details1}}{{show_details_else1}}</a></span> </div> ',expanded:"expanded",hidden4:"hidden",hidden:"hidden",is_contact_from:"right ",is_contact_from_else:'<span class="btn lozenge lozengeadd right small btn-kiosk-addcontact" data-action="modal" data-name="{{msg_from}}" data-address="{{msg_from_address}}"> <a role = "button" tabindex="0" title="{{str_btn_add_from_contact_attr}}">&nbsp;<b></b></a> </span>',message_header_from:'<dt class="hdr-info" id="hdr-from">{{str_msg_hdr_label_from}}</dt><dd class="hdr-info"> <ul aria-labelledby="hdr-from" class="inline-items"> <li class="{{hidden}}"> <span class = "lozengeContainer"> <span class="btn lozenge small left {{is_contact_from}}" data-name="{{msg_from}}" data-address="{{msg_from_address}}" data-action="contact-card-menu"> <a role = "button" title="{{str_btn_from_lozenge_attr}}" href="#" tabindex="0" dir="{{msg_display_name_dir}}">{{msg_from}}</a> </span>{{is_contact_from_else}} </span> </li> </ul></dd> ',hidden1:"hidden",is_contact_to:"right ",is_contact_to_else:'<span class="btn lozenge lozengeadd right small btn-kiosk-addcontact" data-action="modal" data-name="{{msg_data_name}}" data-address="{{msg_to_address}}"> <a role = "button" tabindex="0" title="{{str_btn_add_contact_attr}}">&nbsp;<b></b></a> </span>',msg_to:'<li class="{{hidden1}}"> <span class = "lozengeContainer"> <span class="btn lozenge small left {{is_contact_to}}" data-name="{{msg_data_name}}" data-address="{{msg_to_address}}" data-action="contact-card-menu"> <a role = "button" title="{{str_btn_lozenge_attr}}" href="#" tabindex="0" dir="{{msg_display_name_dir}}">{{msg_display_name}}</a> </span>{{is_contact_to_else}} </span> </li> ',more_to:'<li><span class="small btn left right" data-action="more" data-id="to"><a role="button" href="#" title="{{str_msg_hdr_btn_more_attr}}">{{str_msg_hdr_btn_more_to}}</a></span></li> ',message_header_to:'<dt class="hdr-info" id="hdr-to">{{str_msg_hdr_label_to}}</dt><dd class="hdr-info"> <ul aria-labelledby="hdr-to" class="inline-items" id="msg-header-to"> {{msg_to}} {{more_to}} </ul></dd> ',hidden2:"hidden",is_contact_cc:"right ",is_contact_cc_else:'<span class="btn lozenge lozengeadd right small btn-kiosk-addcontact" data-action="modal" data-name="{{msg_data_name}}" data-address="{{msg_cc_address}}"> <a role = "button" tabindex="0" title="{{str_btn_add_contact_attr}}">&nbsp;<b></b></a> </span>',msg_cc:'<li class="{{hidden2}}"> <span class = "lozengeContainer"> <span class="btn lozenge small left {{is_contact_cc}}" data-name="{{msg_data_name}}" data-address="{{msg_cc_address}}" data-action="contact-card-menu"> <a role = "button" title="{{msg_cc_address}}" href="#" tabindex="0" dir="{{msg_display_name_dir}}">{{msg_display_name}}</a> </span>{{is_contact_cc_else}} </span> </li> ',more_cc:'<li><span class="small btn left right" data-action="more" data-id="cc"><a role="button" title="{{str_msg_hdr_btn_more_attr}}">{{str_msg_hdr_btn_more_cc}}</a></span></li> ',message_header_cc:'<dt class="hdr-info" id="hdr-cc">{{str_msg_hdr_label_cc}}</dt><dd class="hdr-info"> <ul aria-labelledby="hdr-cc" class="inline-items" id="msg-header-cc"> {{msg_cc}} {{more_cc}} </ul></dd> ',hidden3:"hidden",is_contact_bcc:"right ",is_contact_bcc_else:'<span class="btn lozenge lozengeadd right small btn-kiosk-addcontact" data-action="modal" data-name="{{msg_data_name}}" data-address="{{msg_bcc_address}}"> <a role = "button" tabindex="0" title="{{str_btn_add_contact_attr}}">&nbsp;<b></b></a> </span>',msg_bcc:'<li class="{{hidden3}}"> <span class = "lozengeContainer"> <span class="btn lozenge small left {{is_contact_bcc}}" data-name="{{msg_data_name}}" data-address="{{msg_bcc_address}}" data-action="contact-card-menu"> <a role = "button" title="{{msg_bcc_address}}" href="#" tabindex="0" dir="{{msg_display_name_dir}}">{{msg_display_name}}</a> </span>{{is_contact_bcc_else}} </span> </li> ',more_bcc:'<li><span class="small btn left right" data-action="more" data-id="bcc"><a role="button" href="#" title="{{str_msg_hdr_btn_more_attr}}">{{str_msg_hdr_btn_more_bcc}}</a></span></li> ',message_header_bcc:'<dt class="hdr-info" id="hdr-bcc">{{str_msg_hdr_label_bcc}}</dt><dd class="hdr-info"> <ul aria-labelledby="hdr-bcc" class="inline-items" id="msg-header-bcc"> {{msg_bcc}} {{more_bcc}} </ul></dd> ',hidden4:"hidden",is_contact_chat:"right ",is_contact_chat_else:'<span class="btn lozenge lozengeadd right small btn-kiosk-addcontact" data-action="modal" data-name="{{msg_data_name}}" data-address="{{msg_participant_address}}"> <a role = "button" tabindex="0" title="{{str_btn_add_participant_contact_attr}}">&nbsp;<b></b></a> </span>',msg_participant:'<li class="{{hidden4}}"> <span class = "lozengeContainer"> <span id="{{msg_participant_address}}" class="btn lozenge small left {{is_contact_chat}}" data-name="{{msg_data_name}}" data-address="{{msg_participant_address}}" data-action="contact-card-menu"> <a role = "button" title="{{str_btn_lozenge_attr}}" href="#" tabindex="0">{{msg_display_name}}</a> </span>{{is_contact_chat_else}} </span> </li> ',more_participants:'<li><span class="small btn left right" data-action="more"><a role="button" title="{{str_msg_hdr_btn_more_participants_attr}}">{{str_msg_hdr_btn_more_participants}}</a></span></li> ',message_header_participants:'<dt class="hdr-info lg" id="hdr-partic">{{str_msg_hdr_label_participants}}</dt><dd class="hdr-info lg"> <ul class="inline-items" aria-labelledby="hdr-partic"> {{msg_participant}} {{more_participants}} </ul></dd> ',hidden5:"hidden",is_contact:"btn-contact ",is_contact_else:"lozengeadd btn-kiosk-addcontact ",is_contact_else1:"modal",is_contact_else2:"{{str_btn_add_contact_attr}}",is_contact1:"{{msg_display_name}} {{msg_to_address}}",msg_with:'<li class="{{hidden5}}"> <span class="btn lozenge {{is_contact}}{{is_contact_else}} left small right" data-name="{{msg_display_name}}" data-address="{{msg_to_address}}" data-action="{{is_contact_else1}}"> <a role="button" title="{{is_contact_else2}}{{is_contact1}}" href="#">{{msg_display_name}}</a> </span> </li> ',message_header_with:'<dt id="hdr-with">{{str_msg_hdr_label_with}}</dt><dd> <ul class="inline-items" aria-labelledby="hdr-with"> {{msg_with}} </ul></dd> ',msg_flagged:'class="flag flagged {{hidden4}}" title="{{str_msg_list_flagged_attr}}"',msg_flagged_else:'class="flag {{hidden4}}" title="{{str_msg_list_flag_attr}}"',message_header_flag:'<div {{msg_flagged}} {{msg_flagged_else}} data-action="msg-flag"> <a role="checkbox" aria-checked="{{msg_flagged_aria_checked}}" href="#">{{str_msg_view_msg_flag}}</a> </div> ',msg:'<div class="msg"><a href="#">{{profile_status_msg}}</a></div>',tumor:'<div class="tumor"></div>',message_header_ycw:'<div class="update hdr-info"> <span class="photo"><img src="{{url_profile_img}}" title="{{title_profile_img}}" /></span> {{msg}} {{tumor}}</div> ',folder_message1:'<div aria-label="{{str_msg-view_message_header}}" role="complementary" class="y-module message-header"> <div class="info"> <h3 "{{msg_subjectDir}}" class="{{details}} hidefocus" tabindex="-1"> {{mail_search_enabled}}{{msg_subject}}{{mail_search_enabled1}} {{msg_has_attachment1}} </h3> {{message_header_expand}} </div> <div id="msg_details"class="info {{expanded}} {{hidden4}}"> <dl class="details"> {{message_header_from}} {{message_header_to}} {{message_header_cc}} {{message_header_bcc}} {{message_header_participants}} {{message_header_with}} </dl> {{message_header_flag}} <div class="date"><span class="{{hidden4}}" >{{received_date}}</span></div> {{message_header_ycw}} </div> </div> ',message_selection_else:"{{folder_message1}}  {{folder_message}}"};
},"1.0.0");YUI.add("mail-ui-mailpane-read",function(B){B.namespace("mail.ui");var J=B.mail,E=J.ui,F=B.common;var D=function(K){var L=this;};function H(Q,L,O){var R=this,M,P;O=O||R.message;P={fid:R.fid,mid:O.mid,pid:Q};M=O.nonImgAttachments;for(var K=0;K<M.length;K++){var N=M[K];if((N.type=="message"||N.type=="text")&&N.partId==Q){P.filename=N.filename;}}if(typeof L!="undefined"&&L!==""&&L!="null"){P.tnefid=L;}C([P]);}function G(T,L,V){var R=this,P,Q=[],K,O;V=V||R.message;K={image:V.imgAttachments,"non-image":V.nonImgAttachments,all:V.attachments};O=K[T]||[];for(var U=0;U<O.length;U++){var N=O[U],M={fid:R.fid,mid:V.mid,pid:N.partId},S=N.tnefId;if(N.type=="message"||N.type=="text"){M.filename=N.filename;}if(typeof S!="undefined"){M.tnefid=S;}Q.push(M);}if(L&&L.target){if(L.target.get("nodeName")=="A"){P={restoreFocusNode:L.target};}else{P={restoreFocusNode:L.target.ancestor("A")};}}if(Q.length){C(Q,P);}}function C(L,K){B.use("mail-common-downloader-v"+(NeoConfig.downloaderVersion||"1"),function(){J.common.downloader.render(L,K);});}function A(){B.fire("openOptions",B.mix(this,{params:{section:"spam"}}));}function I(K,O,N){var P=this,M,L,N=N||P.fid,O=O||P.message;if(O&&!P.loading_slow&&!P.loading_error&&!P.loading_moved&&!O.flags.isRead){M=B.mail.persist.MetaData.get("cg.pref.general.markasreadinterval");if(M!="999"){M=M?parseInt(M)*1000:750;if(isNaN(M)){M=750;}L=M==0;B.use("mail-controller-messages-ops",function(){var Q=function(){var R=J.Controller.batch();R.Messages.flag({fid:N,mid:O,setFlags:{"read":1},enableRetry:true},{suppressCodes:["*"]});return R;};if(!L){P.tmFireRead=setTimeout(function(){var R=Q&&Q();R&&R.execute();},M);}K&&K(L?Q:null);});return true;}}return false;}B.mix(D.prototype,{bindPaneContent:function(){},onSuccess:function(M,K,L){},setFullFormatters:function(){},postRender:function(){},downloadAttachment:H,downloadAllAttachments:G,loadOptions:A,markAsRead:I});B.mail.ui.MailPaneRead=D;},"1.0.0",{requires:["mail-ui-common-string-utils","common-utils","common-utils-stats"]});YUI.add("contacts-api-cache",function(F){F.namespace("contacts");var B=F.contacts,C=F.contacts.config,E,D=F.Lang,A={CONTACT_CHANGED:"contacts:api:contactChanged",CONTACTS_LOADED:"contacts:api:loaded",CONTACT_IMAGE_UPDATED:"contacts:api:imageUpdated"};B.EVENTS=A;E=function(){var O=this,G=false,N=0,L,P={},T={},U={},Q={},R=[],J=null,I,H,K,S,M;I=function(V,Y){var W,X;if(!Y){Q={};}for(W in V){if(V.hasOwnProperty(W)){X=V[W];Q[X.id]=Q[X.id]||X;if(Y){Q[X.id].contacts=Q[X.id].contacts||[];Q[X.id].contacts.push(Y.id);}}}};M=function(a,Z){var V=a.fields,b,d,W,c,Y,X=P[a.id]={typedFields:{},typedFieldValues:{}};if(!V){return;}Z=Z||[];b=Z.length>0;for(Y in V){if(V.hasOwnProperty(Y)){d=V[Y];W=d.value;c=d.type;if(b&&F.Array.indexOf(Z,c)===-1){continue;}if(!X.typedFields[c]){X.typedFields[c]=[];}if(!X.typedFieldValues[c]){X.typedFieldValues[c]=[];}if(c==="name"){if(W.familyName.indexOf("<")!==-1){W.familyName="";}if(W.givenName.indexOf("<")!==-1){W.givenName="";}}X.typedFields[c].push(d);X.typedFieldValues[c].push(W);}}};O.loadSortPrefs=function(V,W){if(!J){J={};}J.sort_order=V;J.sort_field=W;};O.setSortPrefs=function(V,W){O.loadSortPrefs(V,W);F.later(10,O,F.contacts.api.load,[1]);};O.getSortPrefs=function(){return J;};O.load=function(Y){var b,a=C.get("loadSmartContacts"),Z,V=C.get("fieldsToProcess"),W=[];var X=Y.contacts.contact||[];U={};R=[];T={};Q={};P={};for(Z=0;Z<X.length;Z++){b=X[Z];if(!a&&b.isSmartContact){continue;}W.push(b);M(b,V);R[Z]=b.id;U[b.id]=b;H(b);I(b.categories,b);}L=Y;L.contacts.contact=W;L.contacts.count=L.contacts.total=W.length;G=true;F.later(10,O,O.fire,[A.CONTACTS_LOADED]);};O.removeFromCategories=function(V){var X=V.categories||[],W=X.length,Y,Z,a;for(Y=0;Y<W;Y++){Z=X[Y].id;a=Q[Z].contacts;if(a){a.splice(F.Array.indexOf(a,V.id),1);}}};O.update=function(k){var g,f,a,c,b=C.get("fieldsToProcess"),X=[],j=[],d=[],Z=[],e=[],h=[],W=[],V,Y;if(k.syncresult){N=k.syncresult.rev;g=k.syncresult.diff.contacts;W=k.syncresult.results.contacts;}else{if(D.isArray(k)){g=k;}else{g=[k.contact];}}for(Y=0;Y<W.length;Y+=1){f=W[Y];c=f.op;a=U[f.id];switch(c){case"remove":h.push(a);break;case"add":Z.push(f);break;case"update":e.push(f);break;}}for(Y=0;Y<g.length;Y+=1){f=g[Y];c=f.op||"add";a=U[f.id];switch(c){case"remove":if(a){K(a);R.splice(F.Array.indexOf(R,a.id),1);O.removeFromCategories(a);d.push(a);}break;default:if(a){K(a);j.push(f);}else{X.push(f);}M(f,b);I(f.categories,f);U[f.id]=f;H(f);break;}}V={created:X,modified:j,removed:d,createdCurrent:Z,modifiedCurrent:e,removedCurrent:h};if(X.length||j.length){if(C.get("reloadOnUpdate")){F.later(10,O,F.contacts.api.load,[1]);}}else{F.later(10,O,O.fire,[A.CONTACTS_LOADED]);}F.later(10,O,O.fire,[A.CONTACT_CHANGED,V]);return V;};O.updateCategories=function(){var V={categories:Q};if(C.get("reloadOnUpdate")){F.later(10,O,F.contacts.api.load,[1]);}F.later(10,O,O.fire,[A.CONTACT_CHANGED,V]);};H=function(Y){var V,X,Z,W;V=P[Y.id].typedFieldValues.email;if(!V||V.length===0){return;}for(W in V){if(V.hasOwnProperty(W)){X=V[W];Z=X.toLowerCase();T[Z]=T[Z]||[];T[Z].push(Y);}}};K=function(Z){var V,Y,W,b,a,X;V=P[Z.id].typedFieldValues.email||[];a=Z.id;for(X in V){if(V.hasOwnProperty(X)){Y=V[X];b=Y.toLowerCase();W=T[b];if(W&&W[a]){W[a]=undefined;}}}};O.isLoaded=function(){return G;};O.getResponseObject=function(){return L;};O.getContactsData=function(){return P;};O.getContacts=function(){return U;};O.getEmails=function(){return T;};O.getCategories=function(){return Q;};O.getContactOrder=function(){return R;};O.getCurrentRevision=function(){return N;};O.setCurrentRevision=function(V){N=V;};O.loadTinyUserCard=function(W){var Z=W.contacts.contact,a,V=C.get("fieldsToProcess"),Y=[],X;for(X in Z){if(Z.hasOwnProperty(X)){a=Z[X];M(a,V);U[a.id]=a;H(a);Y.push(a);}}F.later(10,O,O.fire,[A.CONTACT_IMAGE_UPDATED,Y]);return Y;};O.getContactsByBucket=function(W,b,Y){var c,d=[],X,Z=W+b,a,V=[];if(Y){X=Q[Y];if(X){d=X.contacts||[];}}else{d=R||[];}for(a=W;a<Z;a++){c=d[a];if(c){V.push(U[c]);}else{break;}}return{contacts:V,total:d.length};};O.removeFlatContact=function(a,Z){var Y=P[a].flatContacts,W,V=Y.length,X;for(W=0;W<V;W++){X=Y[W];if(X.emailField&&X.emailField.id===Z){Y.splice(W,1);break;}}};O.removeField=function(b,Y){var W=U[b];if(W){var V=W.fields,Z,X=V.length,a;for(Z=0;Z<X;Z++){a=V[Z];if(a.id===Y){V.splice(Z,1);if(a.type==="email"){O.removeFlatContact(b,Y);}break;}}}};S=(function(){var V={broadcast:1,emitFacade:true};O.publish(A.CONTACT_CHANGED,V);O.publish(A.CONTACTS_LOADED,V);O.publish(A.CONTACT_IMAGE_UPDATED,V);}());};F.augment(E,F.EventTarget);B.cache=new E();},"1.0.0",{requires:["contacts-api-config","common-utils-stats"]});YUI.add("contacts-api-utils",function(F){F.namespace("contacts");var B=F.contacts,E=B.Contact,C=B.cache,A,D=function(){var G=this;G.getContactsByEmail=function(H){if(!H||H===""){return null;}return C.getEmails()[H.toLowerCase()];};G.isEmailKnown=function(H,I){var J,K;J=G.getContactsByEmail(H);if(I&&J){for(K=0;K<J.length;K++){if(!(J[K].isSmartContact)){return 1;}}return 0;}return(J)?1:0;};G.getContactById=function(I){var H;H=C.getContacts()[I];return H;};G.getContactsByIds=function(I){var J,H;J=[];for(H in I){if(I.hasOwnProperty(H)){J.push(G.getContactById(I[H]));}}return J;};G.getCategoryById=function(I){var H;H=C.getCategories()[I];return H;};G.areContactsLoaded=function(){return C.isLoaded();};G.getResponseObject=function(){return C.getResponseObject();};G.getContacts=function(J){var H,K={},I=C.getContacts();if(!J){return I;}for(H in I){if(I.hasOwnProperty(H)&&I[H].id>=0){K[H]=I[H];}}return K;};G.getSmartContacts=function(){var H,I={};for(H in C.getContacts()){if(C.getContacts().hasOwnProperty(H)&&C.getContacts()[H].id<0){I[H]=C.getContacts()[H];}}return I;};G.getAllContacts=function(){return C.getContacts();};G.getCategories=function(){return C.getCategories();};G.getContactsClone=function(I){var J={};if(I){var H=C.getContactsByBucket(0,C.getContactOrder().length,I).contacts,M=H.length;while(M--){J[H[M].id]=H[M];}}else{var K=G.getContacts(),L;for(L in K){J[L]=K[L];}}return J;};G.getFlatContacts=function(){var I=G.getContacts(),K=[],J,L,H;for(L in I){if(I.hasOwnProperty(L)){J=G.getBasicFlatContacts(I[L]);for(H in J){if(J.hasOwnProperty(H)){K.push(J[H]);}}}}return K;};G.getFieldsByType=function(H,I){return C.getContactsData()[H.id].typedFields[I];};G.getFieldValues=function(I,L,J){var K,H,M;if(!I||!L){return null;}if(J){H=G.getFieldsByType(I,L);if(H){K=[];for(M in H){if(H.hasOwnProperty(M)&&F.Array.indexOf(M.flags,J)){K.push(M.value);}}}return K;}return C.getContactsData()[I.id].typedFieldValues[L];};G.getShownContactName=function(J){var I,M,H=F.Lang.trim,L=H(J.name),K=J.email;if(G.isEmailKnown(K)){I=G.getContactsByEmail(K);M=G.getFirstFieldValue(I[0],"nickname");if(M){return M;}M=G.getFirstFieldValue(I[0],"name");if(M){M=M.familyName+" "+M.givenName;if(H(M)){return M;}}}return L||K;};G.getFirstFieldValue=function(H,J,I){if(!H||!J){return null;}return(G.getFieldValues(H,J,I)||[])[0];};G.getHigherPrecedenceFieldByType=function(I,J){if(!I){return null;}function K(M,L){return M.id-L.id;}var H=(G.getFieldsByType(I,J)||[]);if(H.sort(K)[0]){return H.sort(K)[0].value;}return null;};G.getBasicFlatContacts=function(H){var M=C.getContactsData()[H.id].flatContacts,I,N,L=H.isSmartContact?1:0,K,J;if(!M){M=[];N=G.getFieldsByType(H,"email")||[];I=G.getHigherPrecedenceFieldByType(H,"name")||{};K=(N.length&&N[0])||{value:""};for(J in N){if(N.hasOwnProperty(J)){M.push({firstname:I.givenName,lastname:I.familyName,middlename:I.middleName,nickname:G.getFirstFieldValue(H,"nickname"),email:N[J].value,emailField:N[J],id:H.id,isPrimary:N[J].value===K.value,isSmartContact:L,sc_score:N[J].sc_score});}}C.getContactsData()[H.id].flatContacts=M;}return M;};G.getContactImage=function(H){var J=C.getContactsData()[H.id].image,I;if(!J){I=G.getFirstFieldValue(H,"guid");if(I){J=I.image;}C.getContactsData()[H.id].image=J;}return J;};G.getSortedFlatContacts=function(H){return G.sortFlatContacts(G.getFlatContacts(),H);};G.sortFlatContacts=function(L,K){var J=K||["sc_score","firstname","lastname","email"];function H(O,M,Q){var P=O[Q],N=M[Q];if(P&&N){return(P===N)?null:(Q==="sc_score")?((P>N)?-1:1):((P<N)?-1:1);}else{if(!P&&!N){return null;}}return(P)?-1:1;}function I(O,N){var M,P;for(P in J){if(J.hasOwnProperty(P)){M=H(O,N,J[P]);if(M){return M;}}}return 0;}L.sort(I);return L;};G.getContactsCacheBucket=function(J,I,H){return C.getContactsByBucket(J,I,H);};G.getContactOrder=function(){return C.getContactOrder();};G.loadSortPrefs=function(H,I){C.loadSortPrefs(H,I);};G.getSortPrefs=function(){return C.getSortPrefs();};G.getSortedContacts=function(){var K=G.getContacts(),L=G.getContactOrder(),J=L.length,H=[],I;for(I=0;I<J;I++){H.push(K[L[I]]);}return H;};G.getTotalContacts=function(){return C.getContactOrder().length;};};B.utils=new D();},"1.0.0",{requires:["contacts-api-cache","common-utils-stats"]});YUI.add("contacts-api-urigenerator",function(A){var E=A.contacts,L=E.utils,M,C=A.Lang,K="/v1/user/{guid}/contacts",J="/v1/user/{guid}/contact/{cid}",N="{field}.{condition}={query}",D={"asc":1,"desc":2,1:1,2:2},I={"first":-10001,"last":-10003,"email":4,"-10001":"first","-10003":"last",4:"email",1:-10001,3:-10003,6:4};if(A.common&&A.common.Utils){M=A.common.Utils;}function B(S,T,R){var U=S.split(" "),P,O="",Q=U.length;while(Q--){P=U[Q];if(P){if(O){O+=";";}O+=N.replace("{field}",T).replace("{condition}",R).replace("{query}",encodeURIComponent(P.replace(/,/g,"\\,")));}}return O;}function H(S,V){var W={id:S.id,op:"update",fields:[],categories:[]},Z=W.fields,R=S.fields||[],X=V.fields||[],P={},U,a,O,T,Y,Q;S=A.clone(S,true);V=A.clone(V,true);Q=R.length;while(Q--){P[parseInt(R[Q].id,10)]=R[Q];}Q=X.length;while(Q--){O=X[Q];U=parseInt(O.id,10);Y=O.categories;a=P[U];if(!a){Z.push({op:"add",value:O.value,type:O.type,flags:O.flags||[]});if(Y){Z[Z.length-1].categories=Y;}}else{if(O.type!==a.type||!M.congruent(O.value,a.value,false)||!M.congruent(O.flags,a.flags,false)||!M.congruent(Y,a.categories,false)){if(O.type==="yahooid"&&!M.congruent(Y,a.categories,false)){Z.push({op:"remove",id:a.id});Z.push({op:"add",value:O.value,type:O.type,flags:O.flags||[],categories:Y});}else{Z.push({op:"update",id:U,value:O.value,type:O.type,flags:O.flags||[]});if(Y){Z[Z.length-1].categories=Y;}}}delete P[U];}}for(Q in P){if(P.hasOwnProperty(Q)){Z.push({op:"remove",id:Q});}}return W;}function G(S,O){S=S||[];O=O||[];var V=[],U={},R,Q,T,P;P=S.length;while(P--){U[parseInt(S[P].id,10)]=S[P];}P=O.length;while(P--){R=O[P];T=R.id;Q=U[T];if(!Q){V.push({op:"addTo",id:T});}else{delete U[T];}}for(P in U){if(U.hasOwnProperty(P)){V.push({op:"removeFrom",id:S[P].id});}}return V;}function F(O){O.path=O.wspath||"ws/sd";O.baseHost=O.baseHost||A.config.win.location.host;this.params=undefined;this.method="GET";this.rev=O.rev;this.headers=O.headers||{"Content-Type":"application/json"};this.uri=O.uri||A.config.win.location.protocol+"//"+O.baseHost+O.path+"?";this.uri+=(O.singleContact?J.replace("{guid}",O.guid).replace("{cid}",O.id):K.replace("{guid}",O.guid));if(O.prefs){this.uri+="/preferences;";}this.init(O);}F.prototype={init:function(P){var O=F.METHODS,Q=P.type||O.DEFAULT;switch(Q){case O.SAVE:case O.DELETE:if(C.isNumber(this.rev)&&this.rev>0){this.method="PUT";if(P.isCreateList){this.setCreateListParams(P);}else{this.setPUTParams(P);}this.setPUTUri(P);}else{this.method="POST";if(P.isCreateList){this.setCreateListParams(P);}else{this.setPOSTParams(P);}this.setPOSTUri(P);}break;case O.SAVE_PREFS:this.method="POST";this.setPOSTPrefsParams(P);this.setPOSTUri(P);break;case O.DELETE_CATEGORIES:case O.SAVE_CATEGORIES:this.method="PUT";this.setCategoriesParams(P);this.setPUTUri(P);break;case O.UPDATE_CONTACTS_CATEGORIES:this.method="PUT";this.setUpdateCategoriesParams(P);this.setPUTUri(P);break;case O.REMOVE_FIELD:this.method="PUT";this.setRemoveFieldParams(P);this.setPUTUri(P);break;default:this.method="GET";this.setGETUri(P);break;}},getURI:function(){return this.uri;},getMethod:function(){return this.method;},setMethod:function(O){this.method=O;},getHeaders:function(){return this.headers;},setHeaders:function(O){this.headers=O;},getParams:function(){return this.params;},stripContact:function(O){if(O._data){O._data=undefined;}},setPOSTPrefsParams:function(R){var Q=R.prefs,P={},O=Q.sort_order,S=Q.sort_field;this.params={};if(Q){if(O){P.sort_order=D[O];}if(S){P.sort_type=I[S];}this.params.preferences=P;}},setPOSTParams:function(P){var O={};this.params={};if(P.contacts&&C.isArray(P.contacts)&&!C.isUndefined(P.contacts[0])){O=P.contacts[0];}this.stripContact(O);this.params.contact=O;},setPOSTUri:function(O){this.uri+="?format=json";if(O.wssid){this.uri+="&wssid="+O.wssid;}},setCreateListParams:function(R){var W=R.newContacts,S=R.updateContacts,O={"name":R.category,"op":"add","refid":"01"},P=[{"refid":"01",op:"addTo"}],Q={rev:this.rev,categories:[],contacts:[]},V,U,T;Q.categories.push(O);T=W.length;while(T--){V=W[T];U={"op":"add","fields":[{"value":{givenName:V.name},"type":"name","op":"add"},{"value":V.email,"type":"email","op":"add"}],"categories":P};Q.contacts.push(U);}T=S.length;while(T--){U={"id":S[T].id,"op":"update","categories":P};Q.contacts.push(U);}this.params={contactsync:Q};},setPUTParams:function(O){var a=O.contacts||[],T=O.categories||[],Z=[],S=[],X,W,b,R,V,Y,U,Q,P;this.params={contactsync:{rev:this.rev}};Q=a.length;if(Q>0){while(Q--){X=A.clone(a[Q]);if(C.isValue(X.id)){if(X.op&&X.op==="remove"){}else{W=L.getContactById(X.id);R=X.categories;b=W.categories;X=H(W,X);X.categories=G(b,R);}}else{X.op="add";Y=X.fields||[];P=Y.length;while(P--){Y[P].op="add";}Y=X.categories||[];P=Y.length;while(P--){Y[P]={op:"addTo",id:Y[P].id};}this.stripContact(X);}Z.push(X);}this.params.contactsync.contacts=Z;}Q=T.length;if(Q>0){while(Q--){V=A.clone(T[Q]);if(C.isValue(V.id)){throw new Error("category modification not yet implemented");}else{V.op="add";}V.contacts=L.getContactsByIds(V.contacts);S.push(V);}this.params.contactsync.categories=S;}},setPUTUri:function(O){this.setPOSTUri(O);},setGETUri:function(P){var S,O=P.fields,T,Q,R=this.uri;if(O){for(Q in O){if(O.hasOwnProperty(Q)){S=O[Q];if(S.name&&S.condition&&S.value){R+=";"+S.name+"."+S.condition+"="+S.value;}}}}if(P.searchQuery&&P.searchField&&P.searchCondition){R+=";"+B(P.searchQuery,P.searchField,P.searchCondition);}if(P.out){R+=";out="+P.out;}if(P.start){R+=";start="+P.start;}if(P.count){R+=";count="+P.count;}if(P.sortfields){R+=";sort-fields="+P.sortfields;}if(P.sort){R+=";sort="+P.sort;}R+="?format=json";if(P.view){if(C.isArray(P.view)){R+="&view="+P.view.join("&view=");}else{R+="&view="+P.view;}}if(C.isValue(P.rev)){R+="&rev="+P.rev;}if(P.wssid){R+="&wssid="+P.wssid;}if(P.id){R+="&id="+P.id;}if(!P._sc){R+="&_sc=0";}this.uri=R;},setCategoriesParams:function(S){var P=S.categories||[],U={rev:this.rev,categories:[],contacts:[]},R=[],Q={},O,T=P.length;while(T--){O=P[T];if(O.id){if(O.op==="remove"){Q=O;
}else{Q={"op":"update","new":{"name":O.name},"old":{"id":O.id}};}}else{Q={"op":"add","name":O.name};}R.push(Q);}U.categories=R;this.params={contactsync:U};},setUpdateCategoriesParams:function(U){var S=U.categories.addTo||[],Z=S.length,Y=U.categories.removeFrom||[],V=Y.length,a=U.contacts,P=a.length,R=[],X=[],O=[],b=1,T={rev:this.rev,categories:[],contacts:[]},W,Q;W=Z;while(W--){Q=S[W];if(A.Lang.isNumber(Q)){X.push({"id":S[W],"op":"addTo"});}else{O.push({"name":Q,"op":"add","refid":b});X.push({"refid":b,"op":"addTo"});b++;}}W=V;while(W--){X.push({"id":Y[W],"op":"removeFrom"});}W=P;while(W--){R.push({"id":a[W],"op":"update","categories":X});}T.contacts=R;T.categories=O;this.params={contactsync:T};},setRemoveFieldParams:function(Q){var P={rev:this.rev,contacts:[]},O=false,U=Q.fieldId,R=Q.contactId,V=L.getContactById(R),X={"id":R},T=V.fields,W,S=T.length;while(S--){W=T[S];if(W.id!==U&&W.type!=="guid"){O=true;break;}}if(O){X.op="update";X.fields=[{"op":"remove","id":U}];}else{X.op="remove";}P.contacts=[X];this.params={contactsync:P};}};F.METHODS={DEFAULT:0,GETCONTACTS:1,SAVE:2,DELETE:3,SAVE_CATEGORIES:4,DELETE_CATEGORIES:5,SAVE_PREFS:6,UPDATE_CONTACTS_CATEGORIES:7,REMOVE_FIELD:8};A.namespace("contacts");E.URIGenerator=F;},"1.0.0",{requires:["contacts-api-utils"]});YUI.add("contacts-api-io",function(F){F.namespace("contacts");var A=F.contacts,D=F.Lang,E=F.JSON;function B(G,H){return function(L,J){var I={};if(!J){return G.failure(I,J,H);}try{I=G.parseJSON(J);}catch(K){return G.failure(I,J,H);}if(I.error||!G.isSuccess(J.status)){return G.failure(I,J,H);}return G.success(I,J,H);};}function C(G){this.io=null;this.maxRetries=4;this.retryCount=0;this.uriGenerator=A.URIGenerator;this.onSuccess=function(){};this.onFailure=function(){};this.hook=G;}C.prototype={parseJSON:function(H){var G={};if(typeof H.body==="string"){G=E.parse(H.body);}else{if(typeof H.body==="object"){G=H.body;}else{if(typeof H.responseText==="string"){G=E.parse(H.responseText);}else{throw new Error("no response body to parse");}}}G.status=H.status;G.statusText=H.statusText;return G;},isSuccess:function(G){switch(G){case 200:case 201:case 202:case 204:return true;}return false;},doRetry:function(G){switch(G){case 500:return true;}return false;},success:function(G,H,I){this.onSuccess(G,H,I);this.retryCount=0;},failure:function(G,H,J){var I=G.error&&G.error.detail&&G.error.detail.match(/-\d+/);if(("-50304"===I||!H||this.doRetry(H.status))&&this.retryCount<this.maxRetries){this.retryCount+=1;return F.later(100,this,function(){this.send(J);});}this.retryCount=0;G.errorCode=(!D.isUndefined(I)&&!D.isNull(I))?I:"-99999";this.onFailure(G,H,J);},send:function(J){var K=B(this,J),I=this,H=this.uriGenerator.getURI(),G={data:E.stringify(this.uriGenerator.getParams()),on:{success:K,failure:K},headers:this.uriGenerator.getHeaders(),method:this.uriGenerator.getMethod(),sync:false};if(this.hook){I.io=this.hook(H,G);}else{F.use("io",function(L){I.io=L.io(H,G);});}},abort:function(){if(this.io&&(typeof this.io.abort==="function")){this.io.abort();return true;}else{return false;}}};A.sendRequest=function(L,K,H,G,J){var I=new C(G,J);K&&(I.onSuccess=K);H&&(I.onFailure=H);L&&(I.uriGenerator=L);I.send();return I;};A.Request=C;},"1.0.0",{requires:["contacts-api-urigenerator","json"]});YUI.add("contacts-api-adapter",function(D){D.namespace("contacts");var E=D.contacts,H=E.URIGenerator,B=E.cache,G=D.Lang,J=D.JSON,F="CONTACTS",I,C,A;if(D.common&&D.common.Utils){I=D.common.Utils;C=I.rocketstats;A=new I.Stopwatch("ContactsRequest");}E.APIAdapter={};(function(){var O=this,K=false,N=E.sendRequest;this.getContact=function(R,Y,U,S){if(B.isLoaded()&&!S){var X=B.getContacts()[R];if(X){if(Y&&G.isFunction(Y)){Y({contact:X});}}return;}var V=E.config.getAttrs(),Z=V.requestFn||null,W={baseHost:V.baseHost||D.config.win.location.host,uri:V.uri,headers:V.headers,guid:V.guid,wssid:V.wssid,type:H.METHODS.GETCONTACTS,start:V.start,count:V.count||"max",sortfields:V.sortfields,out:V.out,sort:V.sort,fields:V.fields,wspath:V.wspath,_sc:false,view:V.view,rev:V.rev,singleContact:true,id:R},P=new H(W);function T(b,a,c){if(Y&&G.isFunction(Y)){Y(b);}if(C){C.stat(F,"API:getContact");C.stat(F,"API:getContact:",b.status);}}function Q(b,a,c){if(C){C.stat(F,"API:ERR:getContact");C.stat(F,"API:ERR:getContact:",b.errorCode);}if(U&&G.isFunction(U)){U(b);}}N(P,T,Q,Z);};this.getContacts=function(S,X,U){if(B.isLoaded()&&!S){if(X&&G.isFunction(X)){X(B.getContacts());}return;}var V=E.config.getAttrs(),Y=V.requestFn||null,P,Q,W={baseHost:V.baseHost||D.config.win.location.host,uri:V.uri,headers:V.headers,guid:V.guid,wssid:V.wssid,type:H.METHODS.GETCONTACTS,start:V.start,count:V.count||"max",sortfields:V.sortfields,out:V.out,sort:V.sort,fields:V.fields,wspath:V.wspath,_sc:(typeof(NeoConfig)!=="undefined"&&NeoConfig.smartcomplete_enabled),view:V.view};function T(b,Z,d){var c=Z.responseHeaders;if(c){var a=c["X-Yahoo-Social-ContactsRev"]||c["X-Yahoo-Social-Contactsrev"]||c["x-yahoo-social-contactsrev"];if(a){B.setCurrentRevision(parseInt(a,10));}}B.load(b);if(X&&G.isFunction(X)){X(B.getContacts());}if(C){C.stat(F,"API:getContacts");C.stat(F,"API:getContacts:",b.status);}K=false;}function R(a,Z,b){K=false;if(C){C.stat(F,"API:ERR:getContacts");C.stat(F,"API:ERR:getContacts:",a.errorCode);}if(U&&G.isFunction(U)){U(a);}}if(K&&X&&G.isFunction(X)){D.once("contacts:api:loaded",function(){X(B.getContacts());});}else{K=true;P=new H(W);N(P,T,R,Y);}};this.createList=function(Z,V,R,X,T){var U=E.config.getAttrs(),Y=U.requestFn||null,W={baseHost:U.baseHost,uri:U.uri,headers:U.headers,guid:U.guid,type:H.METHODS.SAVE,wspath:U.wspath,wssid:U.wssid,rev:B.getCurrentRevision(),newContacts:Z,updateContacts:V,category:R,isCreateList:true},P=new H(W);P.setMethod("PUT");function S(c,b,d){if(C){C.stat(F,"API:createList");C.stat(F,"API:createList:",c.status);}var a=B.update(c);if(X&&G.isFunction(X)){X(a,c);}}function Q(b,a,c){if(C){C.stat(F,"API:ERR:createList");C.stat(F,"API:ERR:createList:",b.errorCode);}if(T&&G.isFunction(T)){T(b);}}N(P,S,Q,Y);};this.deleteContacts=function(Z,X,U){var V=E.config.getAttrs(),Y=V.requestFn||null,S=[],Q=(Z&&G.isArray(Z))?Z.length:0,W={baseHost:V.baseHost,guid:V.guid,type:H.METHODS.DELETE,wspath:V.wspath,uri:V.uri,headers:V.headers,rev:B.getCurrentRevision(),wssid:V.wssid},P;while(Q--){S.push({id:Z[Q],op:"remove"});}W.contacts=S;P=new H(W);function R(a){if(C){C.stat(F,"API:ERR:contactsDelete");C.stat(F,"API:ERR:contactsDelete:",a.errorCode);}if(U&&G.isFunction(U)){U(a);}}function T(d,b,g){if(d.status===202){var f=d.syncresult.results,c=f.contacts,e=c.length;while(e--){if(c[e].error){d.errorCode=c[e].error;R(false,d);return;}}}if(C){C.stat(F,"API:contactsDelete");C.stat(F,"API:contactsDelete:",d.status);}var a=B.update(d);if(X&&G.isFunction(X)){X(a,d);}}N(P,T,R,Y);};function M(Y,T,W,Z,V,S){var X=T.requestFn||null,P,U={baseHost:T.baseHost,uri:T.uri,headers:T.headers,guid:T.guid,type:H.METHODS.SAVE,wspath:T.wspath,wssid:T.wssid};function R(c,b,d){W.push(c.contact);if(C){C.stat(F,"API:multiTransactionSave");C.stat(F,"API:multiTransactionSave:",c.status);}if(Y.length===0){var a=B.update(W);if(V&&G.isFunction(V)){V(a);}}else{M(Y,T,W,Z,V,S);}}function Q(a,b){if(C){C.stat(F,"API:ERR:multiTransactionSave");C.stat(F,"API:ERR:multiTransactionSave:",a.errorCode);}if(Y.length===0&&W.length>0){B.update(W);}else{if(Y.length>0){M(Y,T,W,Z,V,S);return;}}if(S&&G.isFunction(S)){S(a);}}if(Z){U.contacts=Z;}else{U.contacts=[Y.shift()];}P=new H(U);N(P,R,Q,X,{contact:U.contacts});}function L(X,T,V,R){var W=T.requestFn||null,P,U={baseHost:T.baseHost,guid:T.guid,type:H.METHODS.SAVE,wspath:T.wspath,uri:T.uri,headers:T.headers,rev:B.getCurrentRevision(),wssid:T.wssid};function S(a,Z,b){if(C){C.stat(F,"API:singleTransactionSave");C.stat(F,"API:singleTransactionSave:",a.status);}var Y=B.update(a);if(V&&G.isFunction(V)){V(Y,a);}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:singleTransactionSave");C.stat(F,"API:ERR:singleTransactionSave:",Z.errorCode);}if(R&&G.isFunction(R)){R(Z);}}if(!G.isArray(X)){X=[X];}U.contacts=X;P=new H(U);N(P,S,Q,W);}this.saveContacts=function(S,T,R){var Q=E.config.getAttrs(),P=B.getCurrentRevision();if(P>0||!G.isArray(S)||S.length===1){L(S,Q,T,R);}else{M(S,Q,[],T,R);}};this.getContactsTinyUserCard=function(W,V,R){var T=E.config.getAttrs(),X=T.requestFn||null,U={baseHost:T.baseHost||D.config.win.location.host,uri:T.uri,headers:T.headers,guid:T.guid,wssid:T.wssid,type:H.METHODS.GETCONTACTS,start:0,count:1,fields:[{name:"guid",condition:"is",value:W}],wspath:T.wspath,view:"tinyusercard"},P=new H(U);function S(a,Z,b){if(C){C.stat(F,"API:getUserCard");C.stat(F,"API:getUserCard:",a.status);}var Y=B.loadTinyUserCard(a)[0];if(V&&G.isFunction(V)){V(Y);}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERRgetUserCard");C.stat(F,"API:ERRgetUserCard:",Z.errorCode);}if(R&&G.isFunction(R)){R(Z);}}N(P,S,Q,X);};this.saveCategory=function(R,W,S){var U=E.config.getAttrs(),X=U.requestFn||null,V={baseHost:U.baseHost,guid:U.guid,type:H.METHODS.SAVE_CATEGORIES,wspath:U.wspath,uri:U.uri,headers:U.headers,rev:B.getCurrentRevision(),categories:[R],wssid:U.wssid},P=new H(V);function T(Z,Y,d){var a=Z.syncresult.results;if(Z.status===202){var b=a.categories;if(b[0].error){Z.errorCode=b[0].error;Q(false,Z);return;}}var c=Z.syncresult.diff;if(C){C.stat(F,"API:saveCategories");
C.stat(F,"API:saveCategories:",Z.status);}B.updateCategories(Z);if(W&&G.isFunction(W)){W(c,Z);}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:saveCategory");C.stat(F,"API:ERR:saveCategory:",Z.errorCode);}if(S&&G.isFunction(S)){S(Z);}}N(P,T,Q,X);};this.deleteCategory=function(R,W,S){var U=E.config.getAttrs(),X=U.requestFn||null,V={baseHost:U.baseHost,guid:U.guid,type:H.METHODS.DELETE_CATEGORIES,wspath:U.wspath,uri:U.uri,headers:U.headers,rev:B.getCurrentRevision(),categories:[{id:R,op:"remove"}],wssid:U.wssid},P=new H(V);function T(Z,Y,c){var a=Z.syncresult.results;if(Z.status===202){var b=a.categories;if(b[0].error){Z.errorCode=b[0].error;Q(false,Z);return;}}if(C){C.stat(F,"API:deleteCategories");C.stat(F,"API:deleteCategories:",Z.status);}B.updateCategories(Z);if(W&&G.isFunction(W)){W(Z.syncresult.diff,Z);}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:deleteCategory");C.stat(F,"API:ERR:deleteCategory:",Z.errorCode);}if(S&&G.isFunction(S)){S(Z);}}N(P,T,Q,X);};this.updateContactsCategories=function(Z,T,Y,W,S){var U=E.config.getAttrs(),X=U.requestFn||null,V={baseHost:U.baseHost,guid:U.guid,type:H.METHODS.UPDATE_CONTACTS_CATEGORIES,wspath:U.wspath,uri:U.uri,headers:U.headers,rev:B.getCurrentRevision(),categories:{addTo:T,removeFrom:Y},contacts:Z,wssid:U.wssid},P=new H(V);function R(b,a,e){var c=b.syncresult.results;if(b.status===202){var d=c.categories;if(d[0].error){b.errorCode=d[0].error;Q(false,b);return;}}if(C){C.stat(F,"API:updateContactsCategories");C.stat(F,"API:updateContactsCategories:",b.status);}B.updateCategories(b);if(W&&G.isFunction(W)){W(b.syncresult.diff,b);}}function Q(a,c,b,d){if(C){C.stat(F,"API:ERR:updateContactsCategories");C.stat(F,"API:ERR:updateContactsCategories:",c.errorCode);}if(S&&G.isFunction(S)){S(c);}}N(P,R,Q,X);};this.removeField=function(U,W,X,S){var T=E.config.getAttrs(),Y=T.requestFn||null,V={rev:B.getCurrentRevision(),contactId:U,fieldId:W,baseHost:T.baseHost,guid:T.guid,type:H.METHODS.REMOVE_FIELD,wspath:T.wspath,uri:T.uri,headers:T.headers,wssid:T.wssid},P=new H(V);function R(a,Z,b){if(C){C.stat(F,"API:removeEmail");C.stat(F,"API:removeEmail:",a.status);}B.updateCategories(a);if(X&&G.isFunction(X)){X(a.syncresult.diff,a);}}function Q(Z,b,a,c){if(C){C.stat(F,"API:ERR:removeEmail");C.stat(F,"API:ERR:removeEmail:",b.errorCode);}if(S&&G.isFunction(S)){S(b);}}N(P,R,Q,Y);};this.setSortField=function(U,W,R){var T=E.config.getAttrs(),X=T.requestFn||null,V={baseHost:T.baseHost,guid:T.guid,type:H.METHODS.SAVE_PREFS,wspath:T.wspath,uri:T.uri,headers:T.headers,wssid:T.wssid,prefs:{sort_field:U}},P=new H(V);function S(a,Y,b){var Z=a.preferences;if(Z){B.setSortPrefs(Z.sort_order,Z.sort_type);if(W&&G.isFunction(W)){W();}if(C){C.stat(F,"API:setSortField");C.stat(F,"API:setSortField:",a.status);}}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:setSortField");C.stat(F,"API:ERR:setSortField:",Z.errorCode);}if(R&&G.isFunction(R)){R(Z);}}N(P,S,Q,X);};this.setSortOrder=function(U,W,R){var T=E.config.getAttrs(),X=T.requestFn||null,V={baseHost:T.baseHost,guid:T.guid,type:H.METHODS.SAVE_PREFS,wspath:T.wspath,uri:T.uri,headers:T.headers,wssid:T.wssid,prefs:{sort_order:U}},P=new H(V);function S(a,Y,b){var Z=a.preferences;if(Z){B.setSortPrefs(Z.sort_order,Z.sort_type);if(W&&G.isFunction(W)){W();}if(C){C.stat(F,"API:setSortOrder");C.stat(F,"API:setSortOrder:",a.status);}}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:setSortOrder");C.stat(F,"API:ERR:setSortOrder:",Z.errorCode);}if(R&&G.isFunction(R)){R(Z);}}N(P,S,Q,X);};this.getSortPrefs=function(V,S){if(B.getSortPrefs()){if(V&&G.isFunction(V)){V(B.getSortPrefs());}return;}var R=E.config.getAttrs(),Q=R.requestFn||null,W={baseHost:R.baseHost||D.config.win.location.host,uri:R.uri,headers:R.headers,guid:R.guid,wssid:R.wssid,type:H.METHODS.DEFAULT,wspath:R.wspath,prefs:true},T=new H(W);function P(Z,X,a){var Y=Z.preferences;if(Y){if(Y.sort_order&&Y.sort_type){B.setSortPrefs(Y.sort_order,Y.sort_type);if(V&&G.isFunction(V)){V();}if(C){C.stat(F,"API:getSortPreferences");C.stat(F,"API:getSortPreferences:",Z.status);}}}}function U(Y,X,Z){if(C){C.stat(F,"API:ERR:getSortPreferences");C.stat(F,"API:ERR:getSortPreferences:",Y.errorCode);}if(S&&G.isFunction(S)){S(Y);}}N(T,P,U,Q);};this.removeField=function(U,W,X,S){var T=E.config.getAttrs(),Y=T.requestFn||null,V={rev:B.getCurrentRevision(),contactId:U,fieldId:W,baseHost:T.baseHost,guid:T.guid,type:H.METHODS.REMOVE_FIELD,wspath:T.wspath,uri:T.uri,headers:T.headers,wssid:T.wssid},P=new H(V);function R(a,Z,b){if(C){C.stat(F,"API:removeEmail");C.stat(F,"API:removeEmail:",a.status);}B.updateCategories(a);if(X&&G.isFunction(X)){X(a.syncresult.diff,a);}}function Q(Z,b,a,c){if(C){C.stat(F,"API:ERR:removeEmail");C.stat(F,"API:ERR:removeEmail:",b.errorCode);}if(S&&G.isFunction(S)){S(b);}}N(P,R,Q,Y);};this.searchContacts=function(X,V,R){var T=E.config.getAttrs(),W=T.requestFn||null,U={baseHost:T.baseHost,guid:T.guid,type:H.METHODS.GETCONTACTS,wspath:T.wspath,uri:T.uri,headers:T.headers,wssid:T.wssid,out:T.out,fields:T.fields,search:T.search,searchField:"all",searchCondition:"contains",searchQuery:X},P=new H(U);function S(Z,Y,b){var a=Z.contacts.contact||[];if(V&&G.isFunction(V)){V(a);}if(C){C.stat(F,"API:searchContacts");C.stat(F,"API:searchContacts:",Z.status);}}function Q(Z,Y,a){if(C){C.stat(F,"API:ERR:searchContacts");C.stat(F,"API:ERR:searchContacts:",Z.errorCode);}if(R&&G.isFunction(R)){R(Z);}}N(P,S,Q,W);};this.createEmptyContact=function(){return{fields:[],categories:[]};};}.apply(E.APIAdapter));},"1.0.0",{requires:["contacts-api-io","contacts-api-cache","contacts-api-urigenerator","contacts-api-config","json","common-utils","rocket-stats"]});YUI.add("contacts-api",function(E){E.namespace("contacts");var B=E.contacts,D=B.APIAdapter,C=B.cache,A=function(){var F=this;this.load=function(H,I,G){D.getContacts(H,I,G);};this.saveContacts=function(H,I,G){D.saveContacts(H,I,G);};this.deleteContacts=function(H,I,G){D.deleteContacts(H,I,G);};this.saveCategory=function(G,I,H){D.saveCategory(G,I,H);};this.deleteCategory=function(G,I,H){D.deleteCategory(G,I,H);};this.createList=function(G,I,J,K,H){D.createList(G,I,J,K,H);};this.getContacts=function(H,I,G){if(typeof(H)!=="boolean"){return;}D.getContacts(H,I,G);};this.getContact=function(J,I,G,H){D.getContact(J,I,G,H);};this.createEmptyContact=function(H,G){return D.createEmptyContact(H,G);};this.getContactImage=function(G,I,H){D.getContactsTinyUserCard(G,I,H);};this.searchContacts=function(H,I,G){D.searchContacts(H,I,G);};E.on("contacts:contactChanged",function(){F.load(1);});this.setSortOrder=function(G,I,H){D.setSortOrder(G,I,H);};this.setSortField=function(H,I,G){D.setSortField(H,I,G);};this.getSortPrefs=function(H,G){D.getSortPrefs(H,G);};this.updateContactsCategories=function(J,H,G,K,I){D.updateContactsCategories(J,H,G,K,I);};this.removeEmail=function(I,G,J,H){D.removeField(I,G,J,H);};this.removeEmail=function(J,I,H){C.removeField(J,I);var G=E.contacts.utils.getContactById(J);if(G&&!G.isSmartContact){D.removeField(J,I);}if(H){H();}};};B.api=new A();},"1.0.0",{requires:["contacts-api-adapter","contacts-api-config","contacts-api-cache","contacts-api-utils"]});YUI.add("mail-ui-attachment-filetype",function(B){var A=function(){};A.prototype={getType:function(C){var D=C?C.substr(C.lastIndexOf(".")+1):"";switch(D.toLowerCase()){case"xls":case"xlsx":case"xlsb":case"xlsm":case"xlt":case"xltx":D="xls";break;case"doc":case"docx":case"dot":case"dotx":case"rtf":D="doc";break;case"pdf":D="pdf";break;case"zip":D="zip";break;case"mp3":case"m4a":case"wma":case"wav":D="music";break;case"ppt":case"pptx":case"pot":case"potx":case"pps":D="ppt";break;case"mpeg":case"mpg":case"mov":case"wmv":case"avi":case"flv":D="video";break;case"html":case"htm":case"eml":D="eml";break;default:D="eml";break;}return D;}};B.namespace("mail.ui").AttachFileType=new A;},"1.0.0");YUI.add("mail-ui-common-fonts",function(E){var A=E.mail.persist.MetaData,C="neo.pref.general.plaintextcomposefont",B="cg.pref.general.plaintextcomposefont",F={"1":"str_mailopt_fontvalue_1","2":"str_mailopt_fontvalue_2","3":"str_mailopt_fontvalue_3","4":"str_mailopt_fontvalue_4","5":"str_mailopt_fontvalue_5","6":"str_mailopt_fontvalue_6","7":"str_mailopt_fontvalue_7","8":"str_mailopt_fontvalue_8","9":"str_mailopt_fontvalue_9"};function D(){return A.get(B);}E.namespace("mail.ui.common").Fonts={getPlainTextOption:function(){var I=D(),H,G;if(I){H=Math.floor(I/100);G=[strings[F[H]],(I%100),"pt"];}return G;}};},"1.0.0",{requires:["mail-persist-meta-data"]});YUI.add("base-base",function(b){var i=b.Object,k=b.Lang,j=".",g="destroy",p="init",o="initialized",h="destroyed",d="initializer",m="bubbleTargets",e="_bubbleTargets",c=Object.prototype.constructor,l="deep",q="shallow",n="destructor",a=b.Attribute;function f(){b.stamp(this);a.call(this);var r=b.Plugin&&b.Plugin.Host;if(this._initPlugins&&r){r.call(this);}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments);}f._ATTR_CFG=a._ATTR_CFG.concat("cloneDefaultValue");f.NAME="base";f.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};f.prototype={init:function(r){this._yuievt.config.prefix=this._eventPrefix;this.publish(p,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(r);this.fire(p,{cfg:r});return this;},_preInitEventCfg:function(s){if(s){if(s.on){this.on(s.on);}if(s.after){this.after(s.after);}}var t,r,v,u=(s&&m in s);if(u||e in this){v=u?(s&&s.bubbleTargets):this._bubbleTargets;if(k.isArray(v)){for(t=0,r=v.length;t<r;t++){this.addTarget(v[t]);}}else{if(v){this.addTarget(v);}}}},destroy:function(){this.publish(g,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(g);this.detachAll();return this;},_defInitFn:function(r){this._initHierarchy(r.cfg);if(this._initPlugins){this._initPlugins(r.cfg);}this._set(o,true);},_defDestroyFn:function(r){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins();}this._set(h,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}return this._attrs;},_filterAttrCfgs:function(v,s){var t=null,r,u=v.ATTRS;if(u){for(r in u){if(u.hasOwnProperty(r)&&s[r]){t=t||{};t[r]=s[r];delete s[r];}}}return t;},_initHierarchyData:function(){var t=this.constructor,s=[],r=[];while(t){s[s.length]=t;if(t.ATTRS){r[r.length]=t.ATTRS;}t=t.superclass?t.superclass.constructor:null;}this._classes=s;this._attrs=this._aggregateAttrs(r);},_aggregateAttrs:function(y){var v,z,u,r,A,s,x,t=f._ATTR_CFG,w={};if(y){for(s=y.length-1;s>=0;--s){z=y[s];for(v in z){if(z.hasOwnProperty(v)){u=b.mix({},z[v],true,t);r=u.value;x=u.cloneDefaultValue;if(r){if((x===undefined&&(c===r.constructor||k.isArray(r)))||x===l||x===true){u.value=b.clone(r);}else{if(x===q){u.value=b.merge(r);}}}A=null;if(v.indexOf(j)!==-1){A=v.split(j);v=A.shift();}if(A&&w[v]&&w[v].value){i.setValue(w[v].value,A,r);}else{if(!A){if(!w[v]){w[v]=u;}else{b.mix(w[v],u,true,t);}}}}}}}return w;},_initHierarchy:function(w){var t=this._lazyAddAttrs,x,y,z,u,s,v=this._getClasses(),r=this._getAttrCfgs();for(z=v.length-1;z>=0;z--){x=v[z];y=x.prototype;if(x._yuibuild&&x._yuibuild.exts){for(u=0,s=x._yuibuild.exts.length;u<s;u++){x._yuibuild.exts[u].apply(this,arguments);}}this.addAttrs(this._filterAttrCfgs(x,r),w,t);if(y.hasOwnProperty(d)){y.initializer.apply(this,arguments);}}},_destroyHierarchy:function(){var v,s,u,r,t=this._getClasses();for(u=0,r=t.length;u<r;u++){v=t[u];s=v.prototype;if(s.hasOwnProperty(n)){s.destructor.apply(this,arguments);}}},toString:function(){return this.name+"["+b.stamp(this,true)+"]";}};b.mix(f,a,false,null,1);f.prototype.constructor=f;b.Base=f;},"@VERSION@",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(c){var a=c.Base,b=c.Plugin.Host;c.mix(a,b,false,null,1);a.plug=b.plug;a.unplug=b.unplug;},"@VERSION@",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(d){var b=d.Base,a=d.Lang,c;b._build=function(f,n,r,v,u,q){var w=b._build,g=w._ctor(n,q),k=w._cfg(n,q),t=w._mixCust,p=k.aggregates,e=k.custom,j=g._yuibuild.dynamic,o,m,h,s;if(j&&p){for(o=0,m=p.length;o<m;++o){h=p[o];if(n.hasOwnProperty(h)){g[h]=a.isArray(n[h])?[]:{};}}}for(o=0,m=r.length;o<m;o++){s=r[o];d.mix(g,s,true,null,1);t(g,s,p,e);g._yuibuild.exts.push(s);}if(v){d.mix(g.prototype,v,true);}if(u){d.mix(g,w._clean(u,p,e),true);t(g,u,p,e);}g.prototype.hasImpl=w._impl;if(j){g.NAME=f;g.prototype.constructor=g;}return g;};c=b._build;d.mix(c,{_mixCust:function(g,f,i,h){if(i){d.aggregate(g,f,true,i);}if(h){for(var e in h){if(h.hasOwnProperty(e)){h[e](e,g,f);}}}},_tmpl:function(e){function f(){f.superclass.constructor.apply(this,arguments);}d.extend(f,e);return f;},_impl:function(h){var n=this._getClasses(),m,f,e,k,o,g;for(m=0,f=n.length;m<f;m++){e=n[m];if(e._yuibuild){k=e._yuibuild.exts;o=k.length;for(g=0;g<o;g++){if(k[g]===h){return true;}}}}return false;},_ctor:function(e,f){var h=(f&&false===f.dynamic)?false:true,i=(h)?c._tmpl(e):e,g=i._yuibuild;if(!g){g=i._yuibuild={};}g.id=g.id||null;g.exts=g.exts||[];g.dynamic=h;return i;},_cfg:function(e,f){var g=[],j={},i,h=(f&&f.aggregates),l=(f&&f.custom),k=e;while(k&&k.prototype){i=k._buildCfg;if(i){if(i.aggregates){g=g.concat(i.aggregates);}if(i.custom){d.mix(j,i.custom,true);}}k=k.superclass?k.superclass.constructor:null;}if(h){g=g.concat(h);}if(l){d.mix(j,f.cfgBuild,true);}return{aggregates:g,custom:j};},_clean:function(m,k,g){var j,f,e,h=d.merge(m);for(j in g){if(h.hasOwnProperty(j)){delete h[j];}}for(f=0,e=k.length;f<e;f++){j=k[f];if(h.hasOwnProperty(j)){delete h[j];}}return h;}});b.build=function(g,e,h,f){return c(g,e,h,null,null,f);};b.create=function(e,h,g,f,i){return c(e,h,g,f,i);};b.mix=function(e,f){return c(null,e,f,null,null,{dynamic:false});};b._buildCfg={custom:{ATTRS:function(j,h,f){h.ATTRS=h.ATTRS||{};if(f.ATTRS){var g=f.ATTRS,i=h.ATTRS,e;for(e in g){if(g.hasOwnProperty(e)){i[e]=i[e]||{};d.mix(i[e],g[e],true);}}}}},aggregates:["_PLUG","_UNPLUG"]};},"@VERSION@",{requires:["base-base"]});YUI.add("base",function(a){},"@VERSION@",{after:["attribute-complex"],use:["base-base","base-pluginhost","base-build"]});YUI.add("mail-ui-messagepane-read",function(E){theMainWindow=E.mail.ui.Warnings;E.namespace("mail.ui");var A=E.Lang.trim,C=E.mail.ui._MessagePane,M=C.prototype,f=E.common.Utils,q=f.onDemand,p=f.substitute,a=f.escapeHtml,d=f.rocketstats,b=f.unescapeHtml,Q=E.ui.Templates,m=Q._shared_module_message_display_rollup,r=E.mail,J=r.ui.MessagePaneUtils,P=r&&r.Controller?r.Controller.Messages:{},I=r.model.DataStore.Messages.getPermMidPart,s=J.isKnownEmailAddress,g=strings.str_cfg_tog_show_contact_name&&E.contacts&&E.contacts.utils,e=".message-header",k=".msg-body.inner",F=".msg-truncated",T=E.mail.persist.MetaData,K=E.common.persist.UserData,L="mail-ui-messagepane-bind",O={},R=0;var B=function(Y){var t=this;Y=Y||{};B.superclass.constructor.call(t,Y);};function j(v,t){var Y,u;if(t){Y=A(t.name)?A(t.name):t.email;u=g?E.contacts.utils.getShownContactName(t):Y;}return u?a(b(u)):"";}function D(t,Y){if(NeoConfig.bidi&&Y&&Y.nameDir){return Y.nameDir;}return"";}function U(u,t){var Y="";if(t&&t.name!==t.email){Y=a(b(A(t.name)));}return Y;}function N(t,Y){if(Y&&Y.email){return a(b(Y.email));}return"";}function o(){var w=this,u=function(y){var AC=y.s||"",AA=y.o||0,x=y.f||w.readFormatters,AB=y.a||0,z=y.strs||strings;return p(AC,AA,x,AB,z);},Y=0;w.showDetails=T.get("neo.pref.showHeaderDetails");function v(y,AC,AB,z,AD){var AA=[],x=z?Math.min(z,y.length):y.length;for(Y=0;Y<x;Y++){AA.push(u({s:AC,o:AD&&AD(y[Y]),f:AB,a:y[Y]}));}Y=y.length;return AA.join("");}function t(x){return strings.str_tog_filename_center_truncate&&E.mail.ui.truncateJp?E.mail.ui.truncateJp.truncateFileName(x):(x.filename?a(b(x.filename)):"");}this.readFormatters={message_selection:function(){return w.numSelected>0&&!w.message?u({s:m.message_selection}):"";},message_selection_else:function(){return w.numSelected==1&&w.message?u({s:m.message_selection_else}):"";},multiple_selected_msgs:function(){return w.numSelected>1?u({s:w.isChat()?m.page_conversation_history:m.page_conversation_history_else,o:{num_selected_msgs:w.numSelected}}):"";},multiple_selected_msgs_else:function(){return w.numSelected==1?u({s:w.isChat()?m.page_conversation_history1:m.page_conversation_history_else1}):"";},folder_message1:function(z){var y=z||w.message,AA=y&&y.header,x;return(AA&&(AA.subject||(AA.to&&AA.to[0])||AA.from.name))?u({s:m.folder_message1,o:y}):"";},expanded:function(){return w.showDetails?m.expanded:"";},show_details:function(){return u({s:(w.showDetails?m.show_details_else:m.show_details)});},show_details1:function(){return u({s:(w.showDetails?m.show_details_else1:m.show_details1)});},subanchor:function(){return w.showDetails?"":m.subanchor;},details:function(){return w.showDetails?m.details:"";},btnpos:function(){return w.showDetails?"":m.btnpos;},hidden4:function(){return w.showDetails?"":m.hidden4;},hidden5:function(y){var x=y||w.message,z=(x&&x.header&&x.header.cc)||[];return((z.length>0))?"":m.hidden5;},hidden6:function(y){var x=y||w.message,AA=(x&&x.header&&x.header.to)||[],z=(x&&x.header&&x.header.cc)||[];return(AA.length>0)?"":m.hidden6;},hidden7:function(){return w.showDetails?m.hidden7:"";},hidden8:function(z){var x=z||w.message,AB=(x&&x.header&&x.header.to)||[],AA=(x&&x.header&&x.header.cc)||[],y=W(AB);return((y>0)&&(AB.length>=1))?"":m.hidden8;},hidden9:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.to)||[],y=W(AA);return((y==0))?"":m.hidden9;},hidden10:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((!y)&&(AA.length>0))?"":m.hidden10;},hidden11:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((y)&&(AA.length>0))?"":m.hidden11;},hidden12:function(z){var y=z||w.message,x=(y&&y.header&&y.header.bcc)||[];return((x.length>0))?"":m.hidden12;},hidden13:function(AA){var z=AA||w.message,y=(z&&z.header&&z.header.bcc)||[],x=W(y);return((!x)&&(y.length>0))?"":m.hidden13;},hidden14:function(AA){var z=AA||w.message,y=(z&&z.header&&z.header.bcc)||[],x=W(y);return((x)&&(y.length>0))?"":m.hidden14;},headerto:function(z){var x=z||w.message,AB=(x&&x.header&&x.header.to)||[],AA=(x&&x.header&&x.header.cc)||[],y=W(AB);return(((y>0)&&((AB.length-y)>0))||((y>0)&&(AA.length>0))||(y==0))?strings.str_small_header_to:"";},ccMore:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((y>0)&&((AA.length-y)==0))?"":strings.str_small_header_more;},ccPlus:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((y>0)&&((AA.length-y)>0))?"+":"";},bccPlus:function(AA){var z=AA||w.message,y=(z&&z.header&&z.header.bcc)||[],x=W(y);return((x>0)&&((y.length-x)>0))?"+":"";},toPlus:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.to)||[],y=W(AA);return((y>0)&&((AA.length-y)>0))?"+":"";},toYou:function(z){var x=z||w.message,AB=(x&&x.header&&x.header.to)||[],AA=(x&&x.header&&x.header.cc)||[],y=W(AB);return(((y>0)&&((AB.length-y)>0))||((y>0)&&(AA.length>0)))?strings.str_small_header_you:"";},toMore:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.to)||[],y=W(AA);return((y>0)&&((AA.length-y)==0))?"":strings.str_small_header_more;},toCount:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.to)||[],y=W(AA);return((AA.length-y)>0)?(AA.length-y):"";},tomCount:function(y){var x=y||w.message,z=(x&&x.header&&x.header.to)||[];return(z.length>0)?(z.length):"";},ccCount:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((AA.length-y)>0)?(AA.length-y):"";},ccmCount:function(y){var x=y||w.message,z=(x&&x.header&&x.header.cc)||[];return(z.length>0)?(z.length):"";},bccmCount:function(z){var y=z||w.message,x=(y&&y.header&&y.header.bcc)||[];return(x.length>0)?(x.length):"";},recip_string:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.to)||[],y=W(AA);return((y==0)&&(AA.length==1))?strings.str_small_header_recipient:strings.str_small_header_recipients;},cc_recip_string:function(z){var x=z||w.message,AA=(x&&x.header&&x.header.cc)||[],y=W(AA);return((y==0)&&(AA.length==1))?strings.str_small_header_recipient:strings.str_small_header_recipients;
},mail_search_enabled:function(y){var x=y||w.message;if((strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false)||!(x&&x.header&&x.header.subject)){return"";}else{return u({s:m.mail_search_enabled});}},mail_search_enabled1:function(y){var x=y||w.message;if((strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false)||!(x&&x.header&&x.header.subject)){return"";}else{return u({s:m.mail_search_enabled1});}},msg_flagged_aria_checked:function(){var y=w.message,x=y&&y.flags&&y.flags.isFlagged;return x?"true":"false";},msg_flagged1:function(){var y=w.message,x=y&&y.flags&&y.flags.isFlagged;return x?u({s:m.msg_flagged1}):"";},msg_flagged_else:function(){var y=w.message,x=y&&y.flags&&y.flags.isFlagged;return x?"":u({s:m.msg_flagged_else});},msg_subject:function(y){var x=y||w.message;return(x&&x.header&&x.header.subject)?a(b(x.header.subject)):strings["str_msg-view_no_subject"];},msg_subjectDir:function(z){var y=z||w.message,x="";if(y&&y.header&&y.header.subjectDir){if((y.header.to.length>1)&&w.showDetails){x=" dir='"+y.header.subjectDir+"' class='rtl-multi-to details'";}else{if(y.header.to.length>1){x=" dir='"+y.header.subjectDir+"' class='rtl-multi-to'";}else{x=" dir='"+y.header.subjectDir+"' class='rtl-details'";}}}return x;},msg_participant:function(y){var x=y||w.message,AB=x.header||{},AA=AB.from||{},z=(AB.to||[])[0]||{};z.email=z.email||K.get("userSendPref.defaultID")||K.get("userSendPref.defaultFromAddress");z.name=z.name||K.get("userSendPref.defaultFromName")||z.email;return v([z,AA],m.msg_participant,w.toFormatters,null,w.toFormatters.genObj);},more_participants:function(x){return(x&&x.header&&x.header.to&&(x.header.to.length>1))?u({s:m.more_participants,o:x}):"";},msg_from:function(AB){var z=AB||w.message,y=z&&z.header?z.header.from:null,x=y?y.name:"",AA;AA=g&&y?E.contacts.utils.getShownContactName(y):x;return a(b(AA));},msg_display_name_dir:function(x){return D(x,(x&&x.header&&x.header.from));},msg_from_address:function(y){var x=y||w.message;return(x&&x.header)?a(b(x.header.from.email))||"":"";},is_contact_from:function(x){return x&&x.header&&x.header.from&&s(x.header.from.email)?u({s:m.is_contact_from,o:x}):"";},is_contact_from_else:function(x){return x&&x.header&&x.header.from&&!s(x.header.from.email)?u({s:m.is_contact_from_else,o:x}):"";},message_header_participants:function(y){var x=y||w.message,AB=x.header||{},AA=AB.from,z=AB.to||[];return w.isChat(x)?u({s:m.message_header_participants,o:x,f:w.readFormatters}):"";},message_header_from:function(z){var y=z||w.message,x=!w.isChat(y)&&(y&&y.header&&y.header.from);return x?u({s:m.message_header_from,o:y,f:w.readFormatters}):"";},message_header_to:function(z){var y=z||w.message,x=!w.isChat(y)&&(y&&y.header&&y.header.to&&y.header.to.length);return x?u({s:m.message_header_to,o:y,f:w.toFormatters}):"";},message_header_cc:function(z){var y=z||w.message,x=(y&&y.header&&y.header.cc&&y.header.cc.length);return x?u({s:m.message_header_cc,o:y,f:w.ccFormatters}):"";},message_header_bcc:function(z){var y=z||w.message,x=(y&&y.header&&y.header.bcc&&y.header.bcc.length);return x?u({s:m.message_header_bcc,o:y,f:w.bccFormatters}):"";},msg_body:function(){return u({s:m.msg_body,o:w.message});},msg_body_style:function(z){var y=z||w.message,x=y&&y.body&&y.body.isPlainText?E.mail.ui.common.Fonts.getPlainTextOption():0;return x?("font:"+x[1]+x[2]+" "+x[0]):"";},msg_body_bidi_default_dir:function(x){if(x.conversationBody){return"";}else{return NeoConfig.isRTL?'dir="ltr"':"";}},page_loading:function(){var x=w.message;return(!x.body||w.loading_slow||w.loading_error||w.loading_moved)?m.page_loading:"";},page_loading1:function(){var x=w.message;return(!x.body||w.outboundReq||w.loading_slow||w.loading_error||w.loading_moved)?u({s:m.page_loading1}):"";},page_loading_else:function(){return(w.loading_slow||w.loading_error||w.loading_moved)?"":u({s:m.page_loading_else});},loading_error_else:function(){return !w.loading_error?u({s:m.loading_error_else}):"";},loading_slow_else:function(){return !w.loading_slow&&!w.loading_moved?u({s:m.loading_slow_else}):"";},loading_slow_msg:function(){return !w.isChat(w.message)?u({s:m.loading_slow_msg}):"";},loading_slow_conv:function(){return w.isChat(w.message)?u({s:m.loading_slow_conv}):"";},folder_message:function(y){var x=y||w.message;return u({s:m.folder_message,o:x});},msg_blocked:function(){var AC=w.message,y=AC?AC.imgAttachments||[]:[],x=w.inboxservices||[],AB=E.common.persist.UserData.get("userUIPref.imageBlocking")==="b",z=y.length&&w.blockImages==="all",AA=AC&&(AC.hasBlockedImages||(strings.str_cfg_tog_old_imageblock?z:((z&&!P.isCertified(x))&&!(AB&&AC&&AC.flags&&AC.flags.inAddressBook))));return AA?u({s:m.msg_blocked,o:AC}):"";},message_header_expand:function(y){var x=y||w.message;return x.mid?u({s:m.message_header_expand,o:x}):"";},message_header_flag:function(y){var x=y||w.message;return x.mid?u({s:m.message_header_flag,o:x}):"";},msg_has_photo_attachment:function(){var y=w.message,x=y?y.imgAttachments||[]:[];return x.length?u({s:m.msg_has_photo_attachment,o:y}):"";},attached_photos:function(){var AC=w.message,AB,y=AC?AC.imgAttachments||[]:[],x=y.length,z=[];for(AB=0;AB<x;AB++){var AA=y[AB];if(w.blockImages=="all"&&!(E.common.persist.UserData.get("userUIPref.imageBlocking")=="b"&&(AC&&AC.flags&&AC.flags.inAddressBook))&&!strings.str_cfg_tog_show_imageblock_thumbnail){AA.blocked_images="img";}else{AA.blocked_images_else=m.blocked_images_else;}if(strings.str_cfg_tog_show_imageblock_thumbnail&&!AA.thumbnailurl){AA.thumbnailurl=strings.str_cfg_url_imageblock_thumbnail;}z.push(u({s:m.attached_photos,o:AA,f:{image:function(){return AA.thumbnailurl?u({s:m.image,o:AA}):"";},filename:function(){return t(AA);}}}));}return z.join("");},msg_has_attachment:function(){var y=w.message,x=y?y.nonImgAttachments||[]:[];return !w.isChat(y)&&x.length?u({s:m.msg_has_attachment,o:y}):"";},hide_attachments_else:function(){return u({s:m.hide_attachments_else});},attached_files:function(){var AC=w.message,AB,y=AC?AC.nonImgAttachments||[]:[],x=y.length,z=[];
for(AB=0;AB<x;AB++){var AA=y[AB];z.push(u({s:m.attached_files,o:AA,f:{image1:function(){return AA.thumbnailurl?u({s:m.image,o:AA}):"";},type:function(){return E.mail.ui.AttachFileType.getType(AA.filename);},filename:function(){if(AA.filename===".eml"){AA.filename=strings.str_comp_nosubject+".eml";}return t(AA);}}}));}return z.join("");},has_inline_attachments:function(){return(w.message.body&&w.message.body.inlineAttachments.length>0)?u({s:m.has_inline_attachments}):"";},inline_attachment_text:function(){var AB,AC=w.message.body.inlineAttachments,x=AC.length,y=[],z={inline_from_data:function(AD){return AA([AD.header.from]);},inline_to_data:function(AD){return AA(AD.header.to);},inline_date_data:function(AD){return f.dateFormatter(new Date(AD.header.receivedDate*1000),strings.str_tog_dateformat_header_l10n);},inline_subject_data:function(AD){return a(b(AD.header.subject));},inline_cc_data:function(AD){return AA(AD.header.cc);},inline_cchdr:function(AD){return(AD.header.cc.length>0)?u({s:m.inline_cchdr,o:AD,f:z}):"";},inlinemsg_text:function(AD){return AD.text||[AD.body.display].join("");}};function AA(AD){var AG=AD.length,AF=[],AE,AH;for(AE=0;AE<AG;AE++){AH=AD[AE];if(AH.name){AF.push(AH.name);AF.push(" <");}AH.email&&AF.push(AH.email);AH.name&&AF.push(">");AF.push(", ");}AF.pop();return a(b(AF.join("")));}for(AB=0;AB<x;AB++){y.push(u({s:m.inline_attachment_text,o:AC[AB].content,f:z}));}return y.join("");},msg_has_attachment1:function(z){var y=z||w.message,x=y?y.attachments||[]:[];return x.length&&y.mid&&!w.isChat()?u({s:m.msg_has_attachment1}):x.length&&!w.isChat()?u({s:m.msg_has_attachment1,o:y}):"";},hide_attachments_else1:function(y){var x=y||w.message;return x.mid?u({s:m.hide_attachments_else1}):u({s:m.hide_attachments_else1,o:x});},msg_num_attachments:function(y){var x=y||w.message;return x.attachments.length;},single_attachment_string:function(y){var x=y||w.message;return(x.attachments.length==1)?u({s:m.single_attachment_string}):"";},single_attachment_string_else:function(y){var x=y||w.message;return(x.attachments.length==1)?"":u({s:m.single_attachment_string_else});},page_conversation_timestamp_data:function(AB){var AA=AB&&AB.header&&AB.header.receivedDate,z=/[\s\S]+"etype":"(\w+)"[\s\S]+/,x=AB&&AB.body&&AB.body.display||"",y=(z.exec(x)||[])[1]||"";if(y=="INSTANT"){y="IM";}return AA?u({s:m.page_conversation_timestamp_data,o:{type:strings["str_conv_"+y.toLowerCase()]||strings.str_conv_im,timestamp:f.dateFormatter(new Date(AA*1000),strings.str_tog_dateformat_conversation)},f:w.readFormatters}):"";},page_message_history:function(x){if(!x.conversationBody){return x;}var AL=(x.header.to||[])[0]||{},AM=x.header.from||{},AA=AL.name||E.common.persist.UserData.get("userSendPref.defaultFromName")||AL.email,AH=(AM.email=="mailbot@yahoo.com"),AI=AM.name||AM.email||"",z,AD,AG,AK,AB,AE,AF="",AC=(x.conversationBody).replace(/^[\s\S]*({"messages"[\s\S]+})/,"$1"),y={0:"yahoo",2:"msn"};E.later(100,null,function(){x.fid=w.fid;NeoConfig.msgrData.message=x;NeoConfig.msgrData.spam={spammedAs:AL.email,spammerId:AM.email};});try{AB=(E.JSON.parse(AC)).messages||[];for(AD=0;(z=AB[AD]);AD++){AG=(AH?AM.name:AM.email).replace(/[@%].*/,"")!==z.from.replace(/[@%].*/,"");AE=E.mail.common.YML.toHTML(z.yml||z.txt||"",y[z.cloud_id||0]);if(!AE){if(z.call_duration){AE='<span style="color: #bdbdbd; font-weight: bold; font-size: 10px;">';AE+=G(z.call_duration);AE+="</span>";}else{continue;}}AK=strings.str_tog_dateformat_conversation;AF+=u({s:m.page_message_history,o:{self:AG?"self":"",timestamp:f.dateFormatter(new Date(z.ts*1000),AK),name:AG?a(b(AA)):a(b(AI)),msg:AE},f:w.readFormatters});}}catch(AJ){return AC;}return AF;},page_conversation_history2:function(){return w.isChat(w.message)?u({s:m.page_conversation_history2,o:w.message,f:w.readFormatters}):"";},page_conversation_history_else2:function(){return !w.isChat(w.message)?u({s:m.page_conversation_history_else2,o:w.message,f:w.readFormatters}):"";},num_selected_msgs:function(){return w.numSelected;},msg_body_display:function(){return"";},message_header_ycw:function(){return false?u({s:m.message_header_ycw,o:w.message}):"";},msg_flagged:function(){var y=w.message,x=y&&y.flags&&y.flags.isFlagged;return x?u({s:m.msg_flagged}):"";},received_date:function(y){var x=y||w.message;return x&&x.header&&x.header.receivedDate?f.dateFormatter(new Date(x.header.receivedDate*1000),strings.str_tog_dateformat_header_l10n):"";},msg_truncated:function(){var x=w.message;return x.body&&x.isTruncated&&!w.disableTruncate?u({s:m.msg_truncated}):"";}};w.toFormatters={msg_to:function(AA,y){var z=AA||w.message,AB=(z&&z.header&&z.header.to)||[],x=y?null:3;return v(AB,m.msg_to,w.toFormatters,x,w.toFormatters.genObj);},more_to:function(){return Y>3?u({s:m.more_to,o:{has_more_to:Y-3}}):"";},genObj:function(y){var x=y&&s(y.email),z={msg_data_name:U(null,y),msg_to_address:N(null,y),msg_display_name_dir:D(null,y),msg_display_name:j(null,y),msg_participant_address:N(null,y),is_contact_to:x?m.is_contact_to:""};z.is_contact_to_else=(x?"":u({s:m.is_contact_to_else,o:z,f:w.toFormatters,a:y}));if(A(z.msg_data_name)==""){z.msg_data_name=z.msg_display_name;}return z;},is_contact_chat:function(x,AG){var AE=AG&&AG.email,AD=AE&&s(AG.email),AF,AC,AB,AA,y,z;if(AD){return m.is_contact_chat;}else{AF=E.contacts.utils.getContacts();for(AC in AF){AC=AF.hasOwnProperty(AC)&&AF[AC]||{};AB=AC.fields||[];for(AA=0,y=AB.length;AA<y;AA++){z=AB[AA];if(z.type==="yahooid"||z.type==="otherid"){if(z.value.indexOf("@")<0){z.value=z.value+AG.email.replace(/.+(@.+)/,"$1");}if(z.value===AG.email){return m.is_contact_chat;}}}}}return"";},is_contact_chat_else:function(x,AG){var AE=AG&&AG.email,AD=AE&&s(AG.email),AF,AC,AB,AA,y,z;if(AD){return"";}else{AF=E.contacts.utils.getContacts();for(AC in AF){AC=AF.hasOwnProperty(AC)&&AF[AC]||{};AB=AC.fields||[];for(AA=0,y=AB.length;AA<y;AA++){z=AB[AA];if(z.type==="yahooid"||z.type==="otherid"){if(z.value.indexOf("@")<0){z.value=z.value+AG.email.replace(/.+(@.+)/,"$1");}if(z.value===AG.email){return"";
}}}}}return u({s:m.is_contact_chat_else,f:w.toFormatters,o:x,a:AG});}};w.ccFormatters={msg_cc:function(AA,y){var z=AA||w.message,AB=(z&&z.header&&z.header.cc)||[],x=y?null:5;return v(AB,m.msg_cc,w.ccFormatters,x,w.ccFormatters.genObj);},more_cc:function(){return Y>5?u({s:m.more_cc,o:{has_more_cc:Y-5}}):"";},genObj:function(y){var x=y&&s(y.email),z={msg_data_name:U(null,y),msg_cc_address:N(null,y),msg_display_name_dir:D(null,y),msg_display_name:j(null,y),msg_to_address:N(null,y),msg_participant_address:N(null,y),is_contact_cc:x?m.is_contact_cc:""};if(A(z.msg_data_name)==""){z.msg_data_name=z.msg_display_name;}z.is_contact_cc_else=(x?"":u({s:m.is_contact_cc_else,o:z}));return z;}};w.bccFormatters={msg_bcc:function(AB,z){var AA=AB||w.message,y=(AA&&AA.header&&AA.header.bcc)||[],x=z?null:5;return v(y,m.msg_bcc,w.bccFormatters,x,w.bccFormatters.genObj);},more_bcc:function(){return Y>5?u({s:m.more_bcc,o:{has_more_bcc:Y-5}}):"";},genObj:function(y){var x=y&&s(y.email),z={msg_data_name:U(null,y),msg_bcc_address:N(null,y),msg_display_name_dir:D(null,y),msg_display_name:j(null,y),msg_to_address:N(null,y),msg_participant_address:N(null,y),is_contact_bcc:x?m.is_contact_bcc:""};if(A(z.msg_data_name)==""){z.msg_data_name=z.msg_display_name;}z.is_contact_bcc_else=(x?"":u({s:m.is_contact_bcc_else,o:z}));return z;}};w.setFull=1;}function c(t,AC,v){var x=this,z,u=f.Stopwatch.get("MsgInPreview")||x.stopwatch,AA=t&&t.mid,w,AB=v?"preloadSuccess":"loadMessageSuccess",Y=x.retryPrefix();try{u&&u.start(3,"OnSuccess");clearTimeout(x.loadingTimer);if(AA&&x.message&&(I(x.message.mid)==I(AA))){try{if(!x.changingRequest){R++;if(O[AA]){O[AA]+=1;d.stat("messageread","RereadMessage");if(O[AA]<=26){d.stat("messageread","RereadMessage_"+(O[AA]==26?"MAX":O[AA]));}if(!AC){d.stat("messageread","RereadUncachedMessage");}}else{O[AA]=1;}if(R<=101){d.stat("messageread","MessagesRead_"+(R==101?"MAX":R));}}d.stat("messageread",(s(t.header.from.email)?"":"Non")+"Contact");d.stat("messageread",(t.flags.isRead?"":"Un")+"Read");d.stat("messageread",(t.attachments&&t.attachments.length?"Has":"No")+"Attachments");d.stat("messageread","Age",Math.round((new Date())-t.header.receivedDate*1000)/60000);}catch(y){d.stat("messageread","SuccessStatError");E.use("common-utils-error",function(){f.error.report("SuccessStatError",y,1,1,1);});}x.changingRequest=x.loading_slow=0;x.outboundReq=null;x.request=null;x.isRetrying=0;clearTimeout(x.slowLoad);x.inboxservices=x.message.inboxservices;t.header.receivedDate=x.message.header.receivedDate;x.message=t;z=P.getQueryParams(t,"midRequest");x.blockImages=z&&z.blockImages;x.fireEvent("getSuccess");x.render();d.stat("messageread",(Y+AB+(AC?"Cached":"Uncached")));}else{w=t?"permMidDifferent":"noRetrievedMsg";x.loadExtra(function(){this.onFailure({data:x.message,reason:w},v);},1);}u&&u.start(3,"PostOnSuccess");}catch(y){d.stat("messageread","onSuccessError");}}function h(t,Y){return function(u){q(t,L).apply(this,arguments);if(!Y){u.halt();}};}function Z(){var u=this,t,Y=f.Stopwatch.get("MsgInPreview")||u.stopwatch;Y&&Y.start(3,"BindPaneContent");if(!u.messageBound){t=u.getRoot();if(t){u.fireEvent("bindUI");t.delegate("keydown",function(v){if(v.keyCode===32){v.preventDefault();v.target.simulate("click");}},".flag a");t.delegate("keydown",function(v){if(v.keyCode===13){v.target.simulate("click");}},".file-attach li");t.delegate("click",h("headerClick"),e,u);t.delegate("keydown",function(y){var w=E.UA.os,v=(w=="windows"||w=="win"),x=y.target,z;if(y.keyCode==9&&(z=y.currentTarget.one(".hidefocus"))){if(x.get("nodeName").toLowerCase()==="a"&&x.get("parentNode").hasClass("hidefocus")){y.preventDefault();}z.removeClass("hidefocus");}if((v&&y.shiftKey&&y.keyCode==121)||(!v&&y.ctrlKey&&y.shiftKey&&y.altKey&&y.keyCode==77)){y.preventDefault();f.simulateContextMenu(y.target);}},e,u);t.delegate("contextmenu",h("contextClick"),e,u);t.delegate("click",h("subjectClick"),(e+" h3"),u);t.delegate("click",h("retryClick",true),("#loadingpane a"),u);t.delegate("click",h("fullMsgClick"),(F+" a"),u);t.delegate("click",h("downloadAllClick"),".msg-attachments .btn.left.right a",u);t.delegate("click",h("singleDownloadClick"),".msg-attachments .file-attach li",u);t.delegate("click",h("loadOptions"),".msg-blocked .right",u);t.delegate("click",h("unblockImages"),".msg-blocked .left",u);t.delegate("click",h("newContactClick"),".btn-kiosk-addcontact",u);if(strings.str_cfg_tog_exlink_alert_page){t.delegate("click",function(x){if(u.fid=="%40B%40Bulk"&&!x.target.hasAttribute("ymailto")){var v=x.target.getAttribute("href"),w=new RegExp(strings.str_cfg_regex_yahoo_link,"i");if(!v.match(w)){x.halt();window.open(strings.str_cfg_url_exlink_alert_page+encodeURIComponent(v),"new");}}},".msg-body a");}E.on("msgsview:movetonewfolder",function(){var v=E.mail.Tabs.getActiveTab();if(v&&v.widget&&v.widget.msgPane&&v.widget.msgPane==u){if(u.message&&u.message.mid){u.handleUI({action:"folder-new",tbAction:true},u.fid,null,u.message.mid);}}});u.messageBound=1;}}Y&&Y.start(3,"PostBindMessage");t=null;}function i(){E.fire("openOptions",E.mix(this,{params:{section:"spam"}}));}function X(t){var u=this,Y=u.get("rootNode");u.disableTruncate=1;u.scrollTop=(t&&t.scrollTop)||Y.get("scrollTop");u.href=t&&t.href;d.stat("messageread","viewFullMsg");u.changeRequest({truncateAt:null},1,t&&t.cbk);}function S(){d.stat("messageread","unblockImages");this.changeRequest({midRequest:{blockImages:"none"}});}function V(u,t,Y){var w=this,v=w.message;if(!t){v.body=v.attachments=v.imgAttachments=v.nonImgAttachments=0;}w.changingRequest=1;w.loadPaneContent(1,u,Y);}function H(){var t=this,Y=t.loading_slow?20:t.loading_error;t.loading_slow=t.loading_error=t.loading_moved=0;if(Y>0&&Y<=6){t.numRetries=t.numRetries?(t.numRetries+1):1;if(t.numRetries>=t.maxRetries){d.stat("messageread","maxRetry");}}t.fireEvent("retry");t.loadPaneContent(Y);t.set("transferFocus",1);}function l(Y){var t=this;switch(Y){case"to":formatters=t.toFormatters.msg_to;break;case"cc":formatters=t.ccFormatters.msg_cc;
break;case"bcc":formatters=t.bccFormatters.msg_bcc;break;}return formatters&&formatters(t.message,true);}function n(){var u=this,Y=(!u.fullPageView&&u.parentNode.one("div.tripane.content"))||u.parentNode.one("div.message.content");J.resizeSubject(Y);function t(y){var z,x=u.neighbors,v=x&&x.length,w=y&&y();if(v){z={fid:u.fid,msg:null,cachekey:"Neighbors",prefetch:x};if(u.isChat(x[0])){z.ovparams={displayPref:"text/json",urlDetection:false,emailDetection:false,annotateOption:{annotateText:"none"}};}if(w){w.Messages.get(z);}else{P.get(z);}}w&&w.execute();}if(!u.outboundReq&&u.message&&u.message.body){if(!u.markAsRead(t)){t();}}else{t();}if(!NeoConfig.low_bandwidth&&NeoConfig.msg_header_images){E.use("mail-ui-msgpane-profiles",function(){u.appendProfileImage();});}}function W(t){var x,w,AF=0,AE=0,Y=0,z=K.get("userSendPref"),AC=K.get("externalAccounts")||{},AA,u=AC.extAccount||[],AG=u.length,AD=(z.defaultID||"").toLowerCase(),y=(z.defaultFromAddress||"").toLowerCase(),v,AB;for(x=0;x<t.length;x++){AB=(t[x].email||"").toLowerCase();if((AB==AD)||(AB==y)){AF++;}}if(AF>0){return AF;}for(x=0;x<AG;x++){AA=u[x];if(AA){v=(AA.address||"").toLowerCase();for(w=0;w<t.length;w++){AB=(t[w].email||"").toLowerCase();if(AB==v){AE++;}}}}if(AE>0){return AE;}return Y;}function G(w){var t=[strings.str_conv_call_duration],v=0,Y=0,u=parseInt(w,10);if(isNaN(u)){u=0;}while(u>=3600){v++;u-=3600;}while(u>=60){Y++;u-=60;}if(v){t.push(v,strings.str_conv_time_hours);}if(Y){t.push(Y,strings.str_conv_time_minutes);}t.push(u,strings.str_conv_time_seconds);return t.join(" ");}E.extend(B,r.ui.MailPaneRead,{setFullFormatters:o,onSuccess:c,bindPaneContent:Z,loadOptions:i,retryLoad:H,unblockImages:S,viewFullMsg:X,changeRequest:V,searchRecipients:W,postRender:n,getAllLozenges:l});E.mix(C.prototype,B.prototype);E.mix(C.prototype,r.ui.MailPaneRead.prototype);},"1.0.0",{requires:["common-persist-user-data","mail-persist-meta-data","mail-ui-messagepane-warnings","_shared_module_message_display_rollup","mail-ui-mailpane-read","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","attachments_css","mod-conversation-history_css","mail-ui-attachment-filetype","mail-ui-common-fonts","common-ui-tabs-base"]});YUI.add("_shared_module_open_mail_webservice_container",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_open_mail_webservice_container={base:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' id='{{flash_id}}' width='1' height='1'> <param name='movie' value='{{flash_src}}'/> <param name='allowScriptAccess' value='always'/> <embed src='{{flash_src}}' width='1' height='1' name='{{flash_id}}' allowScriptAccess='always' type='application/x-shockwave-flash'> </embed></object>"};},"1.0.0");YUI.add("om-controller-webservice",function(B){var L=B.om,F=L.Controller,H=F.extend("Webservice"),E=L.common.Errors,I=L.common.Utils,G=L.model.DataStore,K=B.common.Utils,A=K.rocketstats;function D(N,M){var T="omapiwsobj",S="http://l.yimg.com/nq/ued/assets/flash/wsclient_5259.swf",R=null,Q=null,P,O;if(NeoConfig.isFullSSL&&S.match(/^http:\/\/l.yimg.com\/nq/)){S=S.replace(/^http:\/\/l/,"https://s");}P=K.substitute(B.ui.Templates._shared_module_open_mail_webservice_container.base,{flash_id:T,flash_src:S});window.wsclientFlashReady=function(){if(B.UA.ie===9){G.wsObject=document.getElementById(T);}else{G.wsObject=document[T]||window[T];}if(G.wsObject&&NeoConfig.om.wsdebug){G.wsObject.setDebug(true);}if(M){clearTimeout(R);clearTimeout(Q);M(true);}};window.wsclientReceive=function(Y,X,V,U){var W={data:(U==="text")?decodeURIComponent(X):X,httpStatus:V||null};N(G.wsCallMap[Y],W);delete G.wsCallMap[Y];};window.wsclientError=function(X,V,U){var W={error:E.ERR_FLASH_ERR,flashError:V.text,errorMsg:"Flash returned error "+V.text,httpStatus:U||null,errorDetail:{data:decodeURIComponent(V.data||""),errorID:V.errorID,type:V.type,text:V.text}};N(G.wsCallMap[X],W);delete G.wsCallMap[X];};window.wsclientLog=function(U){if(window.console){console.log("OM:WSClient",U);}};if(M){R=setTimeout(function(){M(false);},10000);}Q=setTimeout(function(){B.use("swfdetect",function(U){if(!U.UA.flashMajor){if(K.isBrowserCORSCapable()){U.use("io",function(V){V.io.header("X-Requested-With");G.wsObject={fetch:C};});clearTimeout(R);}}});},1500);O=document.createElement("DIV");O.style.position="absolute";O.style.top="-5000px";document.body.appendChild(O);O.innerHTML=P;}function C(O,N,M,R,Q,U){var V,S;function T(Y,W){var X="callWebService:"+(G.wsCallMap[O].appid)+":CORS:success:"+W.status;if(U==="binary"){receivedData=W.responseText;}else{receivedData=W.responseText;}window.wsclientReceive(O,receivedData,W.status,U);I.log(X);B.log(X);A.stat("OM","WS:CORS:success");}function P(Y,W){var X="callWebService:"+(G.wsCallMap[O].appid)+":CORS:failure:"+W.status;if(!W.status){V=G.wsCallMap[O],S=V.parameters.reason;F.Openapi.handleFlashRequired(V,S);}else{window.wsclientError(O,{data:W.responseText,type:"",text:W.statusText||"",errorID:""},W.status);}I.log(X);B.log(X);A.stat("OM","WS:CORS:failure");A.stat("OM","WS:CORS:failure:"+W.status);if(NeoConfig.log_error_yapache==1){B.use("common-utils-error",function(Z){Z.common.Utils.error.report("OM:"+X+":url:"+N);});}}B.io(N,{method:M||"GET",data:R||"",headers:J(Q),xdr:{use:"native"},on:{success:T,failure:P}});}function J(P){var Q={},O;if(!P){return Q;}for(var N=0,M=P.length;N<M;N++){O=(""+P[N]).match((/\s*([^:\s]*)\s*:\s*(.*)\s*/));if(O&&O[1]){Q[O[1]]=O[2];}}return Q;}B.mix(H,{createWebServiceObject:D},true);},"1.0.0",{requires:["om-controller-base","om-model-datastore","om-common-errors","om-common-utils","common-utils","_shared_module_open_mail_webservice_container"]});YUI.add("om-common-constants",function(A){A.mix(A.namespace("om.common.Constants"),{DIALOG_CANCEL:0,DIALOG_OK:1,OK:1,FAIL:0,UNDEFINED:2});},"1.0.0");YUI.add("om-controller-openapi",function(z){var AI=z.om,q=AI.Controller,v=q.extend("Openapi"),AY=AI.model.DataStore,AF=AY.Registry,m=AY.ViewRegistry,d=AY.EventRegistry,T=AY.OpenViewLog,AL=AY.APP_FLAGS,V=AI.common.Utils,AQ=AI.common.Errors,AJ=AI.common.net.session,x={error:AQ.ERR_NONE},AG=z.Lang,o=z.common.Utils,AX=z.common.net.SessionMgr,B=z.common.Utils.rocketstats,j="YahooMailNeoOM",Aj=false,AD=[],E=100-Math.min(z.config.windowResizeDelay||40,100),s={getParameters:t,setListener:AE,callWebService:g,setRecipients:AN,loadAutoSuggest:w,getViewport:Ab,resizeAutoSuggestWindow:n,search:Al,compose:AB,draft:H,openView:i,closeView:AC,openMessage:X,setFolderConfig:AS,getAttachmentUrl:J,upgradeApplication:Ai,upgradeIfNecessary:Z,filterHTML:Q,setData:C,getData:M,removeData:P,getAuthStatus:W,getUserAuthorizationUrl:G,notifyAuthorizationComplete:R,removeAuthorization:F,callAuthWebService:b,getAuthParameters:Ag,reportJSError:AW,setTabCloseMessage:Ae},y={SCOPE_MISMATCH:1,SCOPE_NOT_EXIST:2},a={OMXDB_SUCCESS:0,OMXDB_FAILURE:-1,OMXDB_KEY_DOES_NOT_EXIST:-2,OMXDB_INSTANCE_DOES_NOT_EXIST:-3,OMXDB_EXPIRED:-4,OMXDB_LOWER_VERSION:-5,OMXDB_INVALID_KEY:-6,OMXDB_BUSY:-7};function t(Y,An,Ap){var Ao=Y.parameters;if(Ao.reason==="data/message"&&Ao.data.from.name===undefined){if(V.compareVer(Y.apiVersion,"0.1.6")===-1){Ao.data.from=Ao.data.from[0];}}if(z.Lang.isObject(Ao.user)){Ao.user.themeinfo=NeoConfig.theme?{name:NeoConfig.theme.id,css:NeoConfig.theme.url}:{};}Ap&&Ap(Y,Ao);}function Ai(Y,An){z.use("om-controller-views",function(Aq){var Ao=Y.id,Ap=T.get(Ao);q.Views.closeView(Ao);AR(Y.appid,Y.instanceid,Ap,false);});}function Z(An,Ap){if(Ap.error){Ap.ctx=An;return;}var Y=An.id,Ao=T.get(Y);Af(An,Ao,Ap.suppressMessaging);}function J(Au,Ap){var An=Ap.url,Ar,Ao,At,Aw,Ax={mimeurl:An},Y=0,As="&giveurl=1";if(Ap.hasOwnProperty("longtimeout")){Y=Ap.longtimeout;}function Av(Az){try{return Az.match(/^https?:\/\/.*\.yahoo\.com\/(proxy\/)?ya\/download\?.*/);}catch(Ay){}return false;}try{if(!Av(An)){Ax.error=AQ.ERR_NOT_ATTACHMENT_URL;K(Au,Ax,true);return;}Ar=function(Az,Ay){Ax.url=Az.responseText;K(Au,Ax);};Ao=function(Az,Ay){var A0=Az.body?Az.body.error:{code:-1};Ax.error=AQ.ERR_UNDEFINED;Ax.errorMsg=A0.code;K(Au,Ax,true);};At={success:Ar,failure:Ao,responseType:"text",suppressWssid:true,suppressCodes:["*"],exceptCodes:[401,402,999],timeout:5000,args:{}};if(Y==1){As+="&longtimeout=1";}Aw=AX.request(An+As,null,At,"GET");Aw.send();}catch(Aq){Ax.error=AQ.ERR_UNDEFINED;K(Au,Ax,true);}}function AM(Ap,Av,Y,Aw,As){var Ar,Ax,Aq,Ao,At,Az,An,Ay;try{if(!Ap){if(Y){Y(null);}return;}Aq="content="+encodeURIComponent(Ap);if(As){Aq+="&restrictOff=true";}Ao=function(A2,A1){var A0;if(Av){A0=A2.responseText;Ar=2;while(Ar--){Ax=A0.lastIndexOf("-->");if(Ax===A0.length-4){Ax=A0.lastIndexOf("<!--");if(Ax!==-1){A0=A0.slice(0,Ax);}}}Av(A0);}};At=function(A1,A0){if(A1.fault){B.stat("OM","ERR:yivValidate");B.stat("OM","ERR:yivValidate:"+A1.fault.code);}if(Y){Y("YIV validation failed ."+(A1&&A1.responseText?A1.responseText:""),Ap);}};Ay={success:Ao,failure:At,responseType:"x-www-form-urlencoded",suppressWssid:true,suppressCodes:["*"],exceptCodes:[401,402,999],timeout:5000,args:{}};An=Ay.args;if(Aw){An.argument=Aw;}Az=AX.request("/om/yiv/om_yiv.php",Aq,Ay,"POST");Az.setHeader("Content-length",String(Aq.length));Az.setHeader("Connection","close");Az.send();}catch(Au){B.stat("OM","ERR:YIVValidation:"+z.JSON.stringify(Au));Y("YIV Validation of message failed : "+Au.description,Ap);}}function Q(Y,An){function Ap(Aq){K(Y,{html:Aq});}function Ao(Aq,Ar){K(Y,{error:AQ.ERR_UNDEFINED,errorMsg:Aq});}AM(An.html,Ap,Ao,null,true);}function Af(An,Ao,Ap){var Y=AF.get(An.appid).version;function At(Av,Au){K(An,{error:AQ.ERR_UNDEFINED,errorMsg:"Couldn't fetch version"});}function Ar(Av,Au){var Ay,Aw;try{Ay=Av.body;Aw=Ay[0].version;if(Aw===undefined){K(An,{error:AQ.ERR_UNDEFINED,errorMsg:"couldn't retrieve server version"});return;}if(Y>=Aw){K(An,{data:"app up to date (ver "+Aw+")"});return;}AR(An.appid,An.instanceid,Ao,Ap);}catch(Ax){K(An,{error:AQ.ERR_UNDEFINED,errorMsg:"exception during upgrade"});return;}}var Aq={app:An.appid,ver:Y,lang:NeoConfig.lang,intl:NeoConfig.om.intl},As=AJ.getBaseCallback("openmail.app.list",Ar,At);AX.request(AJ.getUrlForModule(As.method),Aq,As,"GET",null,true);}function AR(Ap,An,Y,Ao){z.use("om-controller-views",function(Ar){var As=AY.ViewRegistry.getAll(),At=q.Views,Aq=false,Au=AF.isSandbox(Ap)||AF.isMessenger(Ap),Aw,Av;function Ay(){if(Y){At.openView.apply(this,Y);}}function Ax(){if(!Au){At.closeApplication(Ap,An);}AY.removeList=[];AY.updateList=[Ap];var Az=Y?Ay:null;Ar.use("om-controller-applicationlist",function(A0){q.ApplicationList.getApplicationConfigs(Az);});}for(Av in As){Aw=As[Av];if(As.hasOwnProperty(Av)&&Ap===Aw.get("appId")){if(Aw.name&&Aw.name==="omHiddenView"||Aw.get("closing")){continue;}Aq=true;break;}}if(Ao||!Aq||Au){Ax();return;}Ar.use("common-ui-dialog-helper",function(A1){var A0={hd:strings.str_om_tou_title,bd:strings.str_om_upgrade_choice};function Az(A2){if(A2.dataAction==="ok"){Ax();}}A1.common.ui.DialogHelper.confirm(A0,{ok:{handler:Az},cancel:{handler:Az}});});});}function g(Y,An){S(Y,Y.cbid,An.url,An.method,An.parameters,An.headers,An.dataformat);}function w(Y,An){z.fire("om:loadautosuggest",{context:Y,data:An});}function Ab(An,Ao){var Y=V.getViewport();K(An,Y);}function n(Y,An){z.fire("om:resize",{context:Y,data:An});}function AN(Ax,At){var As=At.emailIds,Ao=As.length,Ap,Au="";for(var Aq=0;Aq<Ao;Aq++){emailId=As[Aq];Au+=(emailId.name?emailId.name:"")+"<"+emailId.email+">,";}var An=z.mail.Tabs.getActiveTab(),Ar=An.widget;if(Ar&&Ar.NAME==="AuthorView"){Ap=Ar.get("focusNode");Ap.set("value",Au);return Ar.composeView.header._lozengeIt(Ap);}var Av=function(Ay,Az){if(Ay.NAME==="AuthorView"){return true;}};var Aw=z.mail.Tabs.getTab(Av);if(Aw&&Aw.widget){var Y=Aw.widget;Ap=Y.get("focusNode");Ap.set("value",Au);return Y.composeView.header._lozengeIt(Ap);}}function AZ(An){for(var Y in An){if(An[Y].match(/^content-type:\s*application\/json/i)||An[Y].match(/^content-type:\s*multipart\/form-data/i)){return true;
}}return false;}function Am(An){for(var Y in An){if(An[Y].match(/^content-type:\s*application\/json/i)){return true;}}return false;}function f(Ao){var An={},Ap,Aq;for(var Y in Ao){Ap=encodeURIComponent(Y);Aq=encodeURIComponent(Ao[Y]);An[Ap]=Aq;}return An;}function AP(Ao,Ap){var Y=Ao,Aq=[];if(Ap&&!o.isEmpty(Ap)){if(Ao.search(/\?/)===-1){Y+="?";}if(Ao.search(/[\&=]/)!==-1){Y+="&";}for(var An in Ap){Aq.push(An+"="+Ap[An]);}Y+=Aq.join("&");}return Y;}function AA(Y){if(Y!=="events/load"&&Y!=="events/message_read"&&Y!=="events/message_render"){z.use("common-ui-dialog-helper",function(An){An.common.ui.DialogHelper.alert({hd:strings.str_om_error_flash_unavailable_title,bd:strings.str_om_error_flash_unavailable_body});});}B.stat("OM","Noflash_appinvoke");}function O(Y,An){var Ao;Ao={error:AQ.ERR_FLASH_REQUIRED,errorMsg:"callWebService requires the client to have Flash installed."};AA(An);K(Y,Ao,true);}function U(Y,An){var Ao;Ao={error:AQ.ERR_FLASH_LAUNCH_ERR,errorMsg:"callWebService was unable to launch Flash.  Flash may be blocked or a Flash error may have occurred."};AA(An);K(Y,Ao,true);}function Ac(Y,An){return function(){S.apply(Y,An);};}function e(Ay,Ap,An,Y,As,Ar,Au){var Aw=AY.wsObject,Av=An,Aq,Ax,Ao=(Y.search(/GET/i)!==-1)?true:false,At=Am(Ar);Au=Au||"text";AY.wsCallMap[Ap]=Ay;V.log("callWebService",AF.getAppName(Ay.appid)+".API");if(Ao){Av=AP(An,f(As));}else{if(At){Aq=As;}else{Ax=o.parseQueryString(An);if(Ax&&As){Aq=o.merge(Ax,As);}else{if(As){Aq=As;}else{Aq=Ax;}}}}if(Ao){Aw.fetch(Ap,Av,Y,null,null,Au);}else{Aw.fetch(Ap,Av,Y,Aq,Ar,Au);}}function S(Au,Ao,An,Y,Aq,Ap,At){var Ar=An.substring(0,An.indexOf(":")),As;if(Ar==="apps"){if(!(q.Internalapi&&q.Internalapi.internalAPI)){z.use("om-controller-internalapi",function(Av){q.Internalapi.internalAPI(Au,Aq);});}else{q.Internalapi.internalAPI(Au,Aq);}return;}if(AY.wsObject){e(Au,Ao,An,Y,Aq,Ap,At);}else{z.use("swfdetect",function(Av){if(!Av.SWFDetect.isFlashVersionAtLeast(9,0,115)){As=Au.parameters.reason;O(Au,As);}else{if(Aj){As=Au.parameters.reason;U(Au,As);}else{AD.push(Ac(this,[Au,Ao,An,Y,Aq,Ap,At]));}}});}}function Al(Y,An){z.fire("search:input",{query:o.escapeHtml(An.query)});K(Y,x,true);}function C(Y,An){var Ap,Ao;if(V.compareVer(Y.apiVersion,"0.1.7")===-1){Ap=An.data;An.keys=[];An.ttl=[];for(Ao in Ap){An.keys[Ap[Ao][0]]=Ap[Ao][1];if(Ap[Ao][2]){An.ttl[Ap[Ao][0]]=Ap[Ao][2];}}delete An.data;}Ah(Y.instanceid,Y,An);}function Ah(A0,Ay,A3){function Aw(A5){K(Ay,x,true);}function A4(A5){var A8=(A5.fault?A5.fault:A5.body.error)||{},A7=A8.code;A7=!A7||AJ.isHttpError(A7)?A5.status:A7;B.stat("OM","ERR:setAppData:"+A7);var A6={error:AQ.ERR_SET_DATA,errorMsg:A8.message||""};K(Ay,A6,true);}var An=A0.split("."),Y=AF.getProperty(An[0],"main_id"),Ax=A(An[0]),As="",At="",Aq=0,A2,Ar=[],Av,A1,Au="/[?|*]/";Au=new RegExp(Au.substr(1,(Au.length-2)),"g");for(A1 in A3.keys){As="_APP_"+A1.replace(Au,"");At=A3.keys[A1];At=z.JSON.stringify(At);Aq=A3.ttl?(A3.ttl[A1]||0):0;if(Aq!==0){A2=new Date();Aq+=Math.round(A2.getTime()/1000);}Ar.push({key:As,value:At,extensionId:Y||An[0],instanceId:An[1],version:Ax,expiration:Aq});}var Az={method:"SetExtensionData",params:[{setdata:Ar}],id:"123456789"},Ao="/ws/mailPreferences/v1/jsonrpc",Ap={success:Aw,failure:A4,responseType:"json",suppressCodes:["*"],exceptCodes:[401,402,999]};Av=AX.request(Ao,z.JSON.stringify(Az),Ap,"POST");Av.addUrlParam("appid",j);Av.send();}function M(Y,An){AK(Y.instanceid,Y,An);}function AK(Ao,Az,Av){var Au=Av.keys,Ay=Ao.split("."),An=AF.getProperty(Ay[0],"main_id"),As=0,Aq=[],A0,Ap,Ar,Y,Ax;if(!AG.isUndefined(Av.pageInfo)){As=Av.pageInfo.iOffset;}function Aw(A7){var A9={},BA={},A5={},BC=[];if(!AG.isUndefined(Av.pageInfo)){A9=Av.pageInfo.oPagedData;BA=Av.pageInfo.oPagedVer;A5=Av.pageInfo.oPagedErr;BC=Av.pageInfo.keyErrors;}var A1=A7.body,A3=A1.result.data,BD="",A6=null,A8;for(A8 in A3){BD=A3[A8].key.substr("_APP_".length);A6=A3[A8].value;try{A9[BD]=A6?z.JSON.parse(A6):A6;}catch(BB){A9[BD]=A6;}BA[BD]=A3[A8].version;switch(A3[A8].errorCode){case a.OMXDB_SUCCESS:A5[BD]=AQ.ERR_NONE;break;case a.OMXDB_EXPIRED:A5[BD]=AQ.ERR_KEY_EXPIRED;break;case a.OMXDB_KEY_DOES_NOT_EXIST:case a.OMXDB_INSTANCE_DOES_NOT_EXIST:A5[BD]=AQ.ERR_KEY_NOT_SET;break;case a.OMXDB_INVALID_KEY:A5[BD]=AQ.ERR_KEY_INVALID;break;case a.OMXDB_FAILURE:case a.OMXDB_LOWER_VERSION:case a.OMXDB_BUSY:A5[BD]=AQ.ERR_KEY_FAILURE;break;default:A5[BD]=AQ.ERR_KEY_FAILURE;break;}if(A3[A8].errorCode!==a.OMXDB_SUCCESS){B.stat("OM","ERR:getAppData:"+A3[A8].errorCode);BC.push(BD);}}var A4=A1.result.totalCount,A2=A1.result.returnCount;if((A2+As)<A4){Av.pageInfo={oPagedData:A9,oPagedVer:BA,oPagedErr:A5,iOffset:As+A2,keyErrors:BC};c(Av.$cmd,Az,Av);return;}var BE={data:A9,version:BA,errorCode:A5,totalCount:A4};if(BC.length){BE.warn=AQ.ERR_GET_DATA;BE.errorMsg="Errors in key(s): "+BC.join(", ");}K(Az,BE);}function At(A1){var A4=(A1.fault?A1.fault:A1.body.error)||{},A3=A4.code;A3=!A3||AJ.isHttpError(A3)?A1.status:A3;B.stat("OM","ERR:getAppData:"+A3);var A2={error:AQ.ERR_GET_DATA,errorMsg:A4.message||""};K(Az,A2,true);}for(Ar in Au){Aq.push("_APP_"+Au[Ar]);}Ap={method:"GetExtensionData",params:[{query:{key:Aq,extensionId:An||Ay[0],instanceId:Ay[1]},maxReturn:Number(20),offset:As}],id:"123456789"};Y="/ws/mailPreferences/v1/jsonrpc";Ax={success:Aw,failure:At,responseType:"json",suppressCodes:["*"],exceptCodes:[401,402,999]};A0=AX.request(Y,z.JSON.stringify(Ap),Ax,"POST");A0.addUrlParam("appid",j);A0.send();}function P(Y,An){Aa(Y.instanceid,Y,An);}function Aa(An,Ax,At){var Ar=At.keys,Aw=An.split("."),As=[],Ay,Ap;function Av(Az){K(Ax,x,true);}function Aq(Az){var A2=(Az.fault?Az.fault:Az.body.error)||{},A1=A2.code;A1=!A1||AJ.isHttpError(A1)?Az.status:A1;B.stat("OM","ERR:removeAppData:"+A1);var A0={error:AQ.ERR_REMOVE_DATA,errorMsg:A2.message||""};K(Ax,A0,true);}for(Ap in Ar){As.push("_APP_"+Ar[Ap]);}var Ao={method:"DeleteExtensionData",params:[{query:{key:As,extensionId:Aw[0],instanceId:Aw[1]}}],id:"123456789"},Y="/ws/mailPreferences/v1/jsonrpc",Au={success:Av,failure:Aq,responseType:"json",suppressCodes:["*"],exceptCodes:[401,402,999]};
Ay=AX.request(Y,z.JSON.stringify(Ao),Au,"POST");Ay.addUrlParam("appid",j);Ay.send();}function W(Y,An){Ad(Y.instanceid,Y,An.profile);}function G(Y,An){AV(Y.instanceid,Y,An.profile,An.params);}function R(Y,An){AU(Y.instanceid,Y,An.profile);}function F(Y,An){Ak(Y.instanceid,Y,An.profile);}function r(Aw,Ap,Ao){var Au,Aq,Av=Aw.appid,An=AF.getProperty(Aw.appid,"main_id"),Ar=An?An+"."+Aw.instanceid.split(".")[1]:Aw.instanceid,At=N(Ar,Ap);function As(Ax,A0){var Az=AF.getProperty(Av,"omprofile"),Ay=q.ApplicationList.parseOmProfile(Ax.body.cache);if(Az[Ao]===Ay[Ao]){if(!AY.currentProfile[Ar]){AY.currentProfile[Ar]={};}AY.currentProfile[Ar][Ao]=Az[Ao];}At.refresh=false;z.Array.each(At.backlog,function(A1){Ag.apply(this,A1);});At.backlog=[];}function Y(Ax,Ay){z.Array.each(At.backlog,function(Az){K(Az[0],h(Ax));});At.refresh=false;At.backlog=[];}Au=AJ.getBaseCallback("openmail.app.auth.login.complete",As,Y);Aq={crumb:NeoConfig.om.crumb,instance:Ar,profile:Ap};AX.request(AJ.getUrlForModule(Au.method),Aq,Au,"GET",null,true);}function AO(Y,An){var As=An.appid,Ao=AF.getProperty(As,"main_id"),Aq=Ao?Ao+"."+An.instanceid.split(".")[1]:An.instanceid,Ap=AF.getProperty(As,"omprofile"),Ar=AY.currentProfile[Aq];if(!(Ap&&Ap[Y])){return y.SCOPE_NOT_EXIST;}if(!(Ar&&Ar[Y])){return y.SCOPE_MISMATCH;}if(Ap[Y]!==Ar[Y]){return y.SCOPE_MISMATCH;}return;}function Ag(Aw,As){var Ao=As.profile,Y=AF.getProperty(Aw.appid,"main_id"),Ar=Y?Y+"."+Aw.instanceid.split(".")[1]:Aw.instanceid,At=N(Ar,Ao),Ax,Ay,Aq;if(Ao!=="_openmail_internal"){return;}if(At.refresh){At.backlog.push([Aw,As]);}Aq=AO("email-r",Aw);if(Aq===y.SCOPE_MISMATCH){function Au(){At.backlog.push([Aw,As]);At.refresh=true;r(Aw,Ao,"email-r");}function Av(Az){var A1="User authorization denied",A0={error:AQ.ERR_AUTH,errorMsg:A1};K(Aw,A0);}Ax={source:"getauthparameters",callback:Av};if(AF.isNoDisclaimer(Aw.appid)){r(Aw,Ao,"email-r");}else{z.use("om-controller-addremoveapp",function(Az){q.AddRemoveApp.showLegal(Aw.appid,Ax,Au);});}return;}if(Aq===y.SCOPE_NOT_EXIST){var An="Authorization service ["+Ao+"] does not exist for this application",Ap={error:AQ.ERR_AUTH,errorMsg:An};K(Aw,Ap);return;}Ay={user:{email:NeoConfig.userDataObj.userSendPref.defaultFromAddress,name:NeoConfig.userDataObj.userSendPref.defaultFromName}};K(Aw,Ay);}function b(Y,An){I(Y,Y.cbid,An.profile,An.url,An.method,An.parameters,An.body,An.headers,An.dataformat,An.rewrite);}var u={},l={error:AQ.ERR_AUTH};function N(Y,Ao){var An=Y+"_"+Ao;if(undefined===u[An]){u[An]={backlog:[],refresh:false};}return u[An];}function Ad(Y,An,Ao){var At,Ar,Ap=N(Y,Ao);function Aq(Av,Ax){var Az,Au,Aw;try{Az=Av.body;if(Az.cache!==undefined){Ap.cache=Az.cache;if(Az.version!==undefined){Ap.version=Az.version;}}else{delete Ap.cache;delete Ap.version;}Au={status:Az.status};if(Az.data){Au.info=Az.data;}K(An,{data:Au});}catch(Ay){Aw={error:AQ.ERR_AUTH,errorMsg:Ay.toString()};K(An,Aw);}}function As(Au,Av){K(An,h(Au));}At=AJ.getBaseCallback("openmail.app.auth.status",Aq,As);Ar={crumb:NeoConfig.om.crumb,instance:Y,profile:Ao};AX.request(AJ.getUrlForModule(At.method),Ar,At,"GET",null,true);}function h(Y){var Ao=Y.fault,An={error:AQ.ERR_AUTH,errorMsg:Ao.message,errorDetail:{errorCode:Ao.code,detail:Ao.detail,httpStatus:Y.status,httpStatusTxt:Y.statusText}};return An;}function AV(As,Au,Ao,Ap){var At,An,Ar=N(As,Ao);if(!Ap){Ap={};}function Aq(Aw,Ay){var A0,Av,Ax;try{A0=Aw.body;if(A0.cache!==undefined){Ar.cache=A0.cache;if(A0.version!==undefined){Ar.version=A0.version;}}else{delete Ar.cache;delete Ar.version;}Av={};Av.data={url:A0.data};K(Au,Av);}catch(Az){Ax={error:AQ.ERR_AUTH,errorMsg:Az.toString()};K(Au,Ax);}}function Y(Av,Aw){K(Au,h(Av));}At=AJ.getBaseCallback("openmail.app.auth.login.url",Aq,Y);An={crumb:NeoConfig.om.crumb,instance:As,profile:Ao,params:z.JSON.stringify(Ap)};AX.request(AJ.getUrlForModule(At.method),An,At,"GET",null,true);}function AU(Y,An,Ao){var At,Ar,Ap=N(Y,Ao);function Aq(Au,Aw){var A0,Ay,Ax,Av;try{A0=Au.body;if(A0.cache!==undefined){Ap.cache=A0.cache;if(A0.version!==undefined){Ap.version=A0.version;}}else{delete Ap.cache;delete Ap.version;}Ay={};if(A0.data){Ay.info=A0.data;}Ax={};Ax.data=Ay;K(An,Ax);}catch(Az){Av={error:AQ.ERR_AUTH,errorMsg:Az.toString()};K(An,Av);}}function As(Au,Ax){var Az,A1,Av={},Ay,Aw,A0;if(Ao==="_yahoo_internal"){Az=Y.split(".")[0];A1=AF.get(Az);Av.appName=A1.name;}K(An,h(Au));}At=AJ.getBaseCallback("openmail.app.auth.login.complete",Aq,As);Ar={crumb:NeoConfig.om.crumb,instance:Y,profile:Ao};if(Ap.cache){Ar.cache=Ap.cache;}if(Ap.version){Ar.version=Ap.version;}AX.request(AJ.getUrlForModule(At.method),Ar,At,"GET",null,true);}function Ak(Y,An,Ao){var At,Ar,Ap=N(Y,Ao);function Aq(Au,Av){delete Ap.cache;delete Ap.version;K(An,{});}function As(Au,Av){K(An,h(Au));}At=AJ.getBaseCallback("openmail.app.auth.revoke",Aq,As);Ar={crumb:NeoConfig.om.crumb,instance:Y,profile:Ao};AX.request(AJ.getUrlForModule(At.method),Ar,At,"GET",null,true);}function p(At,An,Aq,Ao){var Au,Ap,As=N(At,An);function Ar(Av,Ay){var Ax,Aw,A0,Az=Av.body;if(Az.cache!==undefined){As.cache=Az.cache;if(Az.version!==undefined){As.version=Az.version;}}else{delete As.cache;delete As.version;}As.refresh=false;Ax=As.backlog;for(Aw in Ax){A0=Ax[Aw];I.apply(this,A0);}As.backlog=[];}function Y(Av,Az){var Ay,Ax,A1,Aw={},A0;if(An==="_yahoo_internal"){A0=At.split(".")[0];A1=AF.get(A0);Aw.appName=A1.name;}Ay=As.backlog;for(Ax in Ay){K(Ay[Ax][0],l);}As.backlog=[];As.refresh=false;}Au=AJ.getBaseCallback("openmail.app.auth.login.complete",Ar,Y);Ap={crumb:NeoConfig.om.crumb,instance:At,profile:An};if(!Aq){if(As.cache){Ap.cache=As.cache;}if(As.version){Ap.version=As.version;}}if(Ao){Ap.install_token=Ao;}AX.request(AJ.getUrlForModule(Au.method),Ap,Au,"GET",null,true);}function I(A1,Ap,As,Ao,Y,At,Au,Ar,Av,Ay){var A0,Aq,Az=A1.instanceid,Ax=N(Az,As);if(Ax.refresh){Ax.backlog.push([A1,Ap,As,Ao,Y,At,Au,Ar,Av,Ay]);}function Aw(A3,A5){var A7,A2,A4;try{A7=A3.body;if(A7.cache!==undefined){Ax.cache=A7.cache;}if(A7.status==="complete"){K(A1,{data:A7.data});return;}A2=A7.data;
if(AZ(Ar)){A2.url=AP(A2.url,f(A2.params));e(A1,Ap,A2.url,Y,Au,Ar,Av);}else{e(A1,Ap,A2.url,Y,A2.params,Ar,Av);}}catch(A6){A4={error:AQ.ERR_AUTH,errorMsg:A6.toString()};K(A1,A4);}}function An(A6,A8){var A2=A6.body,A4,BA={},A9,A7,A3,A5;if(A2&&A2.status==="408"){Ax.backlog.push([A1,Ap,As,Ao,Y,At,Au,Ar,Av,Ay]);if(!Ax.refresh){Ax.refresh=true;setTimeout(function(){p(Az,As);},500);}}else{if(As==="_yahoo_internal"&&A2&&(A2.status==="407"||A2.status==="410")){A4=function(BB){var BD="User authorization denied",BC={error:AQ.ERR_AUTH,errorMsg:BD};B.stat("OM","ERR:callAuthWebService:"+BD);K(A1,BC);};BA={source:"signcall",callback:A4};A9=function(BB){Ax.backlog.push([A1,Ap,As,Ao,Y,At,Au,Ar,Av,Ay]);Ax.refresh=true;var BC=true;setTimeout(function(){p(Az,As,BC,BB);},500);};if(AF.isNoDisclaimer(A1.appid)){A9(null);}else{z.use("om-controller-addremoveapp",function(BB){q.AddRemoveApp.showLegal(A1.appid,BA,A9);});}}else{B.stat("OM","ERR:callAuthWebService:"+A6.fault.message);K(A1,h(A6));}}}A0=AJ.getBaseCallback("openmail.app.auth.sign",Aw,An);Aq={crumb:NeoConfig.om.crumb,instance:Az,profile:As,url:Ao,method:Y,params:z.JSON.stringify(At),body:Au||""};if(Ar){Aq.headers=z.JSON.stringify(Ar);}if(Ax.cache){Aq.cache=Ax.cache;}if(Ay&&Ay.proxy&&Ay.url){Aq.rewrite=z.JSON.stringify(Ay);}if(Ax.version){Aq.version=Ax.version;}AX.request(AJ.getUrlForModule(A0.method),Aq,A0,"GET",null,true);}function AB(Y,Ap){var Ao={warn:"openmail.Errors.ERR_VALIDATION_FAILURE"};var Aq=function(){z.fire("newMessage",{forceNew:true,cbfn:function(Az,As){var Av,Ax=Az.get("isRichText");if(Ap.appid){Az.appid=Ap.appid;}var Au=function(A2){var A3=[],A1=[];if(AG.isArray(A2)){A1=z.clone(A2);}else{A3=A2.split(",");z.Array.each(A3,function(A5,A4,A6){if(A5){A1.push({email:A5});}});}return A1;};var Aw=function(A2,A3){Az.set("content",A2);var A1=x;if(A3){A1={warn:AQ.ERR_VALIDATION_FAILURE};}A1.instance=Az._yuid;K(Y,A1,true);};var A0=function(A2,A1){var A3=o.escapeHtml(A1||"")||"";Aw(A3,true);};var At=function(A1){Ap.to=Ap.to||"";Ap.cc=Ap.cc||"";Ap.subject=Ap.subject||"";A1.to=Au(Ap.to);A1.cc=Au(Ap.cc);if(!z.Lang.isUndefined(Ap.bcc)&&!z.Lang.isNull(Ap.bcc)){A1.bcc=Au(Ap.bcc);}A1.subject=Ap.subject;return A1;};var Ay=At(Az.get("header"));Az.set("header",Ay);if(Ap.html&&Ax){AM(Ap.body,Aw,A0,Ap,true);}else{Av=o.escapeHtml(Ap.body||"");Aw(Av||"");}},postRender:function(As,Au){var At=Ap.attachments;if(At&&At.length){Ar(At,As);}}});};var Ar=function(Av,Aw){var A0=[],Ay,Az=z.Lang.isObject;function Ax(A2){var A1={filename:A2.filename||"",size:{original:Math.max(0,parseInt(A2.size||0,10))},state:{uploaded:true,processed:true},original:{partId:A2.partId,mid:A2.mid,fid:A2.fid,tnef:A2.tnef||""}};return A1;}function At(A1){return Az(A1)&&A1.mid&&A1.fid&&A1.partId;}for(var Au=0,As=Av.length;Au<As;Au++){At(Av[Au])&&A0.push(Ax(Av[Au]));}if(A0.length){Aw.cdo._addAttachments(A0);Ay=Aw.cdo.get("origin");Ay.action="om:app";Aw.cdo.set("origin",Ay);}};var An=z.common.persist.UserData.get("userUIPref.useRichText");if((An==="plain")&&Ap.html){z.use("common-ui-dialog-helper",function(As){As.common.ui.DialogHelper.confirm({hd:strings.str_om_switch_to_rich_text_title,bd:strings.str_om_switch_to_rich_text_body,suppressActive:true},{ok:{handler:function(){As.common.persist.UserData.set("userUIPref.useRichText","dynamic");Aq();}},cancel:{handler:function(){Ap.body=As.mail.Controller.Compose.convertHTMLToPlain(Ap.body);Aq();}}});});}else{Aq();}}function i(Y,An){var Ao={warn:"openmail.Errors.ERR_VIEW_EXISTS"};z.use("om-controller-views",function(As){var At=q.Views,Aq=At.getInternalUserViewId(Y.appid,An.id),Ap=m.get(Aq),Ar=Ap?Ao:x;At.openView(Y.appid,Y.instanceid,Aq,An.view,An.viewType,An.target,An.context||null,An.parameters||null,An.width,An.height,An.ttl||0,An.title||"","api/openView",Y,null,null,null,An.options||{},function(Au){K(Y,Au,true);});});}function AC(Y,An){z.use("om-controller-views",function(Ar){var As=q.Views,Aq={},Ap=An.id?As.getInternalUserViewId(Y.appid,An.id):Y.id,Ao=m.get(Ap);if(Ao){As.closeView(Ap);K(Y,x,true);}else{Aq.error=AQ.ERR_VIEW_NOT_FOUND;Aq.errorMsg="The application does not have a view named '"+Ap+"'";K(Y,Aq,true);}});}function H(Y,An){An=An||{};An.folderId="Draft";X(Y,An);}function X(Av,Aq){var Ao=z.mail.model.DataStore,Y=z.mail.Controller.Messages,As=Ao.Messages,At,An;Aq=Aq||{};At=Aq.messageId;An=Aq.folderId;try{if(!Ao.Folders.getByName(An)){K(Av,{error:AQ.ERR_UNDEFINED,errorMsg:"Invalid folder id"});}else{function Au(){K(Av,{error:AQ.ERR_UNDEFINED,errorMsg:"Unable to load message"});}function Ar(){Y.get({fid:An,msg:As.get(An,At)},{success:function(){z.fire("openMessage",{fid:An,msg:At});},failure:Au});}if(As.get(An,At)){Ar();}else{Y.list({fid:An,offsetMid:At,numInfo:1,startInfo:0},{success:function(Aw){As.set(An,Aw.messageInfo);Ar();},failure:Au});}}}catch(Ap){K(Av,{error:AQ.ERR_UNDEFINED});}}function AT(Aq,Y,An,Ap){function As(At){Aq.label=encodeURIComponent(At);delete Aq.htmlLabel;Ao();}function Ao(){Y.asyncCount--;if(!Y.asyncCount){z.fire("om:updateSingleFolder",{ctx:An,config:Ap});K(An,x,true);}}var Ar=false;if(Aq.label){Aq.label=o.escapeHtml(Aq.label);}else{if(Aq.htmlLabel){Aq.label=o.escapeHtml(Aq.htmlLabel);Ar=true;Y.asyncCount++;AM(Aq.htmlLabel,As,Ao);}}if(Aq.icon){delete Aq.icon;}if(Aq.tooltip){Aq.tooltip=o.escapeHtml(Aq.tooltip);}return Ar;}function L(An,Ao){var Ap,Ar,Aq=false;var Y={asyncCount:0};Aq|=AT(Ao,Y,An,Ao);if(Ao.subFolders){for(Ap=0,Ar=Ao.subFolders;Ap<Ar.length;Ap++){Aq|=AT(Ar[Ap],Y,An,Ao);}}return Aq;}function AS(Y,An){if(!L(Y,An)){z.fire("om:updateSingleFolder",{ctx:Y,config:An});K(Y,x,true);}}function AW(Az,Au){var Ay=Az.appid,Ao=Az.instanceid,Ax=Az.id,Av=AF.get(Ay).name,As=V.getEventName(Ao,"app.jserror",Ax),Aq=Au.message,An=Au.url||Au.pageurl,Ap=Au.linenumber||Au.errorcode,Y=AY.MessageReadRunList.getAll(),Aw,Ar,At=false;B.stat("OM","API:JSERROR");B.stat("OM","API:JSERROR:"+Ay.toLowerCase());for(Aw in Y){z.fire("message.read.jserror"+Aw);}if(d.getByEventName(Ao,Ax,As)){z.fire(As,{app:Ay,instance:Ao,appName:Av,message:Aq,url:An,lineno:Ap});
At=true;}Ar=['openapi: app "',Av,'" ',(At?"handled":"didn't handle")," a JS error. ","line:",Ap,"/ msg:",Aq,"/ url: ",An].join("");V.log(Ar);if(NeoConfig.log_error_yapache==1){z.use("common-utils-error",function(A0){A0.common.Utils.error.report(Ar,1);});}}var AH=new V.LookupList("crumb.update","app.uninstalled","mail.signout","contacts.sendsms","contacts.sendim","contacts.changed","tab.changed","social.statuschanged","chats.sendim","chats.sendsms");function AE(At,Ap){var Av=At.appid,Y=Ap.event,As=Ap.crumb,Ao=At.instanceid,An=At.id,Ar=V.getEventName(Ao,Y,An),Au=(Y===Ar);if((Y in AH||V.Event.isMailEvent(Y))&&NeoConfig.om.crumb!==As){return;}function Aq(Ax){Ax.$keep=true;try{for(var Aw in d.getByInstId(Ao)){K(d.getByEventName(Ao,Aw,Ar),Ax);}}catch(Ay){return;}Ax.handled=true;}if(!Au){z.detachAll(Ar);}d.set(At,Aq,Ao,An,Ar);z.on(Ar,Aq);z.fire(Ar+"registered",Ar,Ap);}function Ae(Y,An){z.use("om-controller-views",function(Ar){var As=q.Views,Ao=As.getInternalUserViewId(Y.appid,An.id),Aq=Ao&&m.get(Ao),Ap=Aq&&Aq.get("tab");if(Aq&&Ap){Aq.set("tabCloseMessage",An.msg);Ap.cfg.widget.set("canClose",!An.msg);}});}function A(Y){return Number(AF.get(Y).config["@attributes"].version);}function D(Y,An,Ap,Aq){Aq=Aq||z.JSON.stringify(An);try{return YUI.om.Iframe.send(Y.proxy,Ap,["cmd=",Y.skipURIEncode?Aq:encodeURIComponent(Aq)].join(""),V.getAppSignature(Y.appid),Y.version,Y.id);}catch(Ao){V.log("returnSend:YUI.om.Iframe.send error:"+Ao.message||"unknown");B.stat("OM",["ERR:returnSend:",Y.appid,":",Ao.message||"unknown"].join(""));}}function K(Y,An,Ap,Aq){var Ao;if(!Y){return;}if(Y.restoreCallerContext){Y.restoreCallerContext();}if(An){if(Y.cbid===null){if(Ap){return;}else{throw new Error("returnAPI: cannot return value, no callback id set.");}}An.$cbid=Y.cbid;An.$apiVersion=Y.apiVersion;if(!z.UA.gecko&&Y.id&&frames[Y.id]){return v.returnSend(Y,An,"frames['"+Y.id+"']",Aq);}else{for(Ao=frames.length-1;Ao>=0;--Ao){if(frames[Ao]===Y.iframe.contentWindow){return v.returnSend(Y,An,"frames["+Ao+"]",Aq);}}}V.log("returnAPI: couldn't find return context iframe");B.stat("OM","ERR:returnAPI:"+Y.appid);}}function k(Ao,Y,An){switch(Ao){case"getParameters":s[Ao](Y,An,K);break;default:s[Ao](Y,An);}}function c(Ao,Y,An){var Ar,Ap,Aq=Ao;Ao=Ao.toLowerCase();if(!((Ao==="callwebservice")&&An&&An.url&&(An.url==="apps://"))){Ar="API:"+Ao;Ap=Ar+":"+(Y.appid||"gallery").toLowerCase();B.stat("OM",Ar);B.stat("OM",Ap);}V.log(Ao,AF.getAppName(Y.appid)+".API");k(Aq,Y,An);}z.on("windowresize",V.onIdle(function(){z.fire(V.getEventName(null,"browser.resize"),{});},E));z.mix(v,{returnAPI:K,returnSend:D,publicAPIs:s,enforceRules:c,setListener:AE,upgrade:AR,validateFolderConfig:L,handleFlashRequired:O},true);q.Webservice.createWebServiceObject(K,function(Y){if(!Y){Aj=true;}while(AD.length>0){(AD.shift())();}});},"1.0.0",{requires:["om-controller-base","om-controller-webservice","om-common-constants","om-common-net-session","om-common-utils","om-model-datastore","om-common-errors","common-net-sessionmgr","common-utils","json","rocket-stats"]});var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var YUI;if(typeof YUI==="undefined"){(function(){var e=".",b=Object.prototype.hasOwnProperty,d=Object.prototype.toString,c={"undefined":"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},f,a=function(j,i){var h=typeof j;return(j&&(h==="object"||(!i&&(h==="function"||f.Lang.isFunction(j)))))||false};f={namespace:function(){var k=arguments,q=this,n=0,m,p,h;for(;n<k.length;n++){h=k[n];if(h.indexOf(e)){p=h.split(e);for(m=(p[0]=="YAHOO")?1:0;m<p.length;m++){q[p[m]]=q[p[m]]||{};q=q[p[m]]}}else{q[h]=q[h]||{}}}return q},add:function(h,i){if(i){i(f)}},use:function(){var h=arguments[arguments.length-1];if(typeof h==="function"){h(f)}},log:function(){},merge:function(){var k=arguments,m=0,j=k.length,h={};for(;m<j;++m){f.mix(h,k[m],true)}return h},Object:{_hasEnumBug:!{valueOf:0}.propertyIsEnumerable("valueOf"),_forceEnum:["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"]},mix:function(h,j,q,k,n,r){var o,u,t,m,v,p,s;if(!h||!j){return h||f}if(n){if(n===2){f.mix(h.prototype,j.prototype,q,k,0,r)}t=n===1||n===3?j.prototype:j;s=n===1||n===4?h.prototype:h;if(!t||!s){return h}}else{t=j;s=h}o=q&&!r;if(k){for(m=0,p=k.length;m<p;++m){v=k[m];if(!b.call(t,v)){continue}u=o?false:b.call(s,v);if(r&&u&&a(s[v],true)&&a(t[v],true)){f.mix(s[v],t[v],q,null,0,r)}else{if(q||!u){s[v]=t[v]}}}}else{for(v in t){if(!b.call(t,v)){continue}u=o?false:b.call(s,v);if(r&&u&&a(s[v],true)&&a(t[v],true)){f.mix(s[v],t[v],q,null,0,r)}else{if(q||!u){s[v]=t[v]}}}if(f.Object._hasEnumBug){f.mix(s,t,q,f.Object._forceEnum,n,r)}}return h},Lang:{isString:function(h){return typeof h==="string"},isFunction:function(h){return f.Lang.type(h)==="function"},type:function(h){return c[typeof h]||c[d.call(h)]||(h?"object":"null")}}};YUI=function(){return f};for(var g in f){if(f.hasOwnProperty(g)){YUI[g]=f[g]}}})()}if(typeof YAHOO==="undefined"||!YAHOO){var YAHOO={util:{}}}if(typeof YAHOO.util==="undefined"||!YAHOO.util){YAHOO.util={}}if(!YAHOO.util.CrossFrame){YAHOO.util.CrossFrame=(function(){var k=/^frames\[(\d+)\]$/,h=/^frames\[['"]([a-zA-Z0-9-_]+)['"]\]$/;var m,e,g,o,i,f,c,b,n,a=YUI;if(window.postMessage||document.postMessage){c=function(p,s,q){var r;if(n(q||"1.0.15","1.0.15")<1){r=[i(s),i(p)].join("|")}else{r=[i(q),i(s),i(p)].join("|")}return r};b=function(r){var q=r.split("|"),p;for(p=q.length-1;p>=0;--p){q[p]=f(q[p])}if(q.length==2){return{sig:q[0],body:q[1]}}else{if(q.length==3){return{version:q[0],sig:q[1],body:q[2]}}else{return null}}};i=function(p){return p.replace(/\|/g,"&c124;")};f=function(p){return p.replace(/&c124;/g,"|")}}else{c=function(p,u,q,s,r){var t;q=q||"1.0.15";if(n(q,"1.0.15")<1){t=[u,p.replace(/\&/g,"&c38;").replace(/\"/g,"&c34;").replace(/\'/g,"&c39;").replace(/\\/g,"&c92;").replace(/\0/g,"&c0;").replace(/\n/g,"&c10;").replace(/\r/g,"&c13;")].join("|")}else{if(n(q,"1.1.9")<0){t=[i(q),i(u),i(p)].join("|")}else{t=[i(q),i(u),i(p),i(s),i(r)].join("|")}}return t};b=function(q){var p=q.split("|");if(p.length===2){return{sig:p[0],body:p[1].replace(/&c13;/g,"\r").replace(/&c10;/g,"\n").replace(/&c0;/g,"\0").replace(/&c92;/g,"\\").replace(/&c39;/g,"'").replace(/&c34;/g,'"').replace(/&c38;/g,"&")}}else{if(p.length===3){return{version:f(p[0]),sig:f(p[1]),body:f(p[2])}}else{if(p.length===5){return{version:f(p[0]),sig:f(p[1]),body:f(p[2]),target:f(p[3]),url:f(p[4])}}else{return null}}}};i=function(p){return escape(p.replace(/\&/g,"&c38;").replace(/\"/g,"&c34;").replace(/\'/g,"&c39;").replace(/\\/g,"&c92;").replace(/\0/g,"&c0;").replace(/\n/g,"&c10;").replace(/\r/g,"&c13;").replace(/\//g,"&c47;").replace(/\@/g,"&c64;").replace(/\+/g,"&c43;"))};f=function(p){return unescape(p).replace(/&c43;/g,"+").replace(/&c64;/g,"@").replace(/&c47;/g,"/").replace(/&c13;/g,"\r").replace(/&c10;/g,"\n").replace(/&c0;/g,"\0").replace(/&c92;/g,"\\").replace(/&c39;/g,"'").replace(/&c34;/g,'"').replace(/&c38;/g,"&")}}n=function(t,r){var s=typeof t==="string",q=typeof r==="string";if(!s||!q){return s&&!q?1:(!s&&q?-1:0)}t=t.split(".");r=r.split(".");if(t.length!==3||r.length!==3){throw new Error("Invalid version format")}var v=0,u=0;for(var p=0;p<3;p++){v=parseInt(t[p],10);u=parseInt(r[p],10);if(v!==u){return(v>u)?1:-1}}return 0};e=function(p,q){if(Object.prototype.hasOwnProperty){return p.hasOwnProperty(q)}return typeof p[q]!=="undefined"&&p.constructor.prototype[q]!==p[q]};g=function(v){var w,t,y,x,u,q;w={};t=v.split("&");for(u=0,q=t.length;u<q;u++){x=t[u].indexOf("=");w[t[u].substr(0,x)]=decodeURIComponent(t[u].substr(x+1))}return w};m=function(v){var s=v.split("."),t,r,q,u;v=window;for(r=0,q=s.length;r<q;r++){u=s[r];if(u==="parent"){v=v.parent}else{if(u==="opener"){v=v.opener}else{if(u==="top"){v=v.top}else{if((t=k.exec(u)||h.exec(u))){v=v.frames[t[1]]}else{throw new Error("Invalid Target: "+v)}}}}}return v};o=function(){var u,t,r,q,p,w=g(window.location.hash.substr(1)),v=b(window.name);if(w.target){t=m("parent."+w.target);q=w.url}else{t=m("parent.opener."+v.target);q=v.url}if(v&&t&&q){r=q.split("/")[2];p=v.version;u=(t.YUI&&t.YUI.util&&t.YUI.util.CrossFrame)?t.YUI.util.CrossFrame:t.YAHOO.util.CrossFrame;try{if(navigator.userAgent.indexOf("Firefox")>-1){t.setTimeout(function(){u._receive([v.sig,v.body].join("|"),r,q,p)},0)}else{u._receive([v.sig,v.body].join("|"),r,q,p)}}catch(s){}}else{throw new Error("Missing required params")}};function d(r,s,q,p){a.util.CrossFrame._receive(r,s,q,p)}var j;j={proxyReceive:o,parseTarget:m,constructMessage:c,deconstructMessage:b,escapeAttr:i,unescapeAttr:f,compareVer:n,_receive:d};return j})();if(typeof YUI!=="undefined"&&YUI){YUI.namespace("util.CrossFrame");YUI.add("omCrossframe",function(a){},"1.0.0",{requires:[]});(function(d){var u="1.1.16",p=YUI.util.CrossFrame;var h="OM_VBS_Wrapper",b="OM_VBS_GetWrapper",s="OM_VBS_HandleMessage",m="OM_VBS_CreateChannel",j,v=window.location.toString(),i,x,n,y;i=YAHOO.util.CrossFrame.parseTarget;x=YAHOO.util.CrossFrame.compareVer;function o(D,C,B,e){if(D&&D.addEventListener){D.addEventListener(C,B,e)}else{if(D&&D.attachEvent){D.attachEvent("on"+C,B)}}}function g(e){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{if(e.stopPropagation){e.stopPropagation()}}e.cancelBubble=true}n=function(D){var e=(d.Lang.isString(D))?D.replace(/#$/,""):false,C=document.getElementsByTagName("iframe"),B;for(B=0,l=C.length;B<l;B++){if(C[B].src.replace(/#$/,"")===e||C[B].contentWindow.location===D){return C[B]}}return null};y=function(D){var B=(typeof D==="object")&&(D!==null)&&(typeof D.sig==="string")&&(typeof D.body==="string")&&(D.sig.length>2)&&(D.body.length>0);if(B){try{if(x(D.version||"1.0.15","1.0.15")<1){}else{B=(x(D.version,D.version)===0)}}catch(C){B=false}}return B};var z,q,k,a,t,A,r,f,c;k=YAHOO.util.CrossFrame.constructMessage;a=YAHOO.util.CrossFrame.deconstructMessage;t=YAHOO.util.CrossFrame.escapeAttr;A=YAHOO.util.CrossFrame.unescapeAttr;if(window.postMessage||document.postMessage){r=!window.postMessage;o(window,"message",function(B){var C,D,E,G;B=B||window.event;try{G=a(B.data);if(y(G)){D=B.origin;E=D.split("/")[2];C=n(B.source.location);if(self===top){g(B)}p.fire("receiveMessage",[G.sig,G.body].join("|"),E,D,C,G.version)}else{}}catch(F){d.log("crossframe.js:onMessageListener: error msg["+F.message+"]")}},false);z=function(E){var B,D,C=i(E.target),e=E.version||u;if(!C){return false}if(r){C=C.document}D=k(E.message,E.sig||"",e);C.postMessage(D,E.proxy);E.handler.call(window);return true}}else{if(window.ActiveXObject){j={};window[s]=function(e,H,I,F){var E=arguments.length,D,C,B,G;window.setTimeout(function(){try{if(E===1){D=JSON.parse(e);e=D.uri;H=D.sig;I=D.message;F=D.version}else{e+="";H+="";I+="";F+=""}C=n(e);B=e.split("/")[2];p.fire("receiveMessage",[H,I].join("|"),B,e,C,F)}catch(J){}},0)};window[m]=function(e,B){j[e]=B};vbscript=["Class "+h+"\n ","Private m_Intended\n","Public Sub SetIntendedName(name)\n ","If isEmpty(m_Intended) Then\n","m_Intended = name\n","End If\n","End Sub\n","Public Sub SendMessage(data)\n ",s+"(data)\n","End Sub\n","Public Sub SendMessage2(uri, sig, message, version)\n ","Call "+s+"(uri, sig, message, version)\n","End Sub\n","Public Sub CreateChannel(channel)\n ","Call "+m+"(m_Intended, channel)\n","End Sub\n","End Class\n","Function "+b+"(name)\n","Dim wrap\n","Set wrap = New "+h+"\n","wrap.SetIntendedName name\n","Set "+b+" = wrap\n","End Function"].join("");try{window.execScript(vbscript,"vbscript")}catch(w){}}z=function(E){var B,C;E.version=E.version||u;E.sig=E.sig||"";E.uri=v;try{B=E.targetId||"parent";if(B=="parent"){C=j.parent;if(!C&&window.opener&&"CreateChannel" in window.opener){C=window.opener;C.CreateChannel(window[b]("parent"));j.parent=C;window.opener=null}if(C){if("SendMessage2" in C){C.SendMessage2(E.uri,E.sig,E.message,E.version)}else{C.SendMessage(JSON.stringify(E))}E.handler.call(window);return true}}else{if(j[B]){if("SendMessage2" in j[B]){j[B].SendMessage2(E.uri+"",E.sig+"",E.message+"",E.version+"")}else{j[B].SendMessage(JSON.stringify(E))}E.handler.call(window);return true}}}catch(D){}c.send(E)};c=(function(){var e=(function(){var C=0;return function(){return"om_xdm_proxy"+C++}})();q=function(D){function C(){var E=document.getElementById(D);E.getElementsByTagName("iframe")[0].onload=null;if(E.parentNode){E.parentNode.removeChild(E)}E=null}p.mapHandlers[D].call(window);delete p.mapHandlers[D];if(navigator.userAgent.indexOf("Firefox")>-1){setTimeout(C,0)}else{C()}};var B=function(E){if(!document||!document.body){setTimeout(function(){z(E)},20);return}var I=E.proxy,G=E.target,O=E.message,L=E.handler,N=E.sig||"",H=E.version||u;if(!i(G)){L();return false}if(window.ActiveXObject&&x(H,"1.1.9")>=0){var J=new ActiveXObject("htmlfile");J.open();J.parentWindow.opener=window;J.parentWindow.callback=function(){J=null;L()};J.write(["<html><head></head><body>",'<iframe src="',I,'" name="',k(O,N,H,G,v),'"></iframe>',"<script>onload = callback;<\/script>","</body></html>"].join(""));J.close()}else{var K=[I,"#","target=",encodeURIComponent(G)+"&url=",encodeURIComponent(v)].join(""),F,D,C=document.createElement("div"),M=C.style;D=e();p.mapHandlers[D]=L;F=["<iframe onload=\"YAHOO.util.CrossFrame.iframeOnload('",D,'\');" name="',k(O,N,H),'" src="',K,'"></iframe>'].join("");M.width=M.left=M.top=M.height="0";M.overflow="hidden";M.position="absolute";C.id=D;document.body.appendChild(C);C.innerHTML=F}return true};return{send:B}})()}d.mix(p,{_events:{},on:function(e,C){var B=this._events;if(!B[e]){B[e]=[C]}else{B[e].push(C)}},fire:function(C){var E=this._events[C]||[],B=Array.prototype.slice.apply(arguments,[1]);for(var D=E.length;D--;){try{E[D].apply(null,B)}catch(F){}}},send:z,mapHandlers:{},_receive:function(D,E,C,e){var B=n(C);p.fire("receiveMessage",D,E,C,B,e)},initIEFrameTransport:function(e,C){var B;if(window.ActiveXObject&&!window.postMessage){B=window[b](C);e.contentWindow.opener=B}},proxyReceive:YAHOO.util.CrossFrame.proxyReceive},true);YAHOO.util.CrossFrame.iframeOnload=q})(YUI())}}if(typeof YUI!=="undefined"&&YUI&&!(YUI.om&&YUI.om.Iframe)){YUI.namespace("om.Iframe");(function(b){var d=[],f=[],j,c,g,i,e=true,h=YUI.util.CrossFrame;j=function(v,o,m,p,s){var k=v.indexOf("|"),u=v.substr(0,k),t,q,n;v=v.substr(k+1);for(q=0,n=d.length;q<n;q++){t=d[q];if(t.sig){if(!u||(t.sig!==u)){continue}}if(t.filter&&((t.filter.exec&&!t.filter.exec(m))||(t.filter.call&&!t.filter.call(null,m)))){continue}if(t.handler){try{t.handler.apply(t.scope,[{iframe:p,version:s},v.substr(4)])}catch(r){b.log("Exception in user defined handler","om.Iframe","iframe.js")}}}};h.on("receiveMessage",j);c=function(k){if(!k.pattern||!k.pattern.test||!k.handler||!k.handler.call){return false}d.push(k);return true};i=function(o,q,p,m,k,n){f.push({proxy:o,target:q,message:p,handler:g,sig:m,version:k,targetId:n});if(!e){g()}};g=function(){if(!f.length){e=false;return}e=true;h.send(f.shift())};YUI.om.Iframe={listen:c,send:i};function a(k){if(/in/.test(document.readyState)){setTimeout(function(){a(k)},9)}else{k()}}if(window.postMessage||document.postMessage||(top==self)){g()}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",g,false)}else{a(g)}}})(YUI())};YUI.add("om-controller-crossframe",function(C){var M=C.om,E=M.Controller,N=E.extend("Crossframe"),L=E.Openapi,D=M.common.Errors,K=M.common.Utils,F=M.model.DataStore,H=F.Registry,A=false,B=C.common.Utils.rocketstats;function G(R,S,T,P){var O=R.iframe,W=null,V={},Q,U=R.version||"1.0.15";if(K.compareVer(U,"1.0.16")<0&&P){throw new Error("initAPI: bad API, crossframe version");}if(O!==null){W=F.ViewRegistry.get(O.id);V={cbid:S||null,apiVersion:T,version:U,skipURIEncode:P,iframe:O,proxy:O.src.split("/").slice(0,3).join("/")+"/om/xdm_proxy?bn="+NeoConfig.om.xdmproxyVer,widget:W,appid:W&&W.get("appId"),instanceid:W&&W.get("instanceId"),id:W&&W.get("viewId"),parameters:W&&W.get("params")};for(Q=frames.length-1;Q>=0;--Q){if(frames[Q]===O.contentWindow){return V;}}}throw new Error("initAPI: invalid message origin");}function I(V,T){var Q,P,S=false;try{Q=C.JSON.parse(T);S=true;}catch(U){}if(C.Lang.isUndefined(Q)){Q=C.JSON.parse(decodeURIComponent(T));}var O=G(V,Q.$cbid,Q.$apiVersion,S),R=L.publicAPIs[Q.$cmd];if(R){if(!A&&H.isMessenger(O.appid)){A=true;C.fire("Y.om.controller:launchIM:complete");}L.enforceRules(Q.$cmd,O,Q);}else{P={error:D.ERR_UNSUPPORTED_BY_HOST};L.returnAPI(O,P,true);}}function J(R){var P="https?://(?:[a-z0-9]+(-|\\.))?",O="(?:"+K.escapeDots(NeoConfig.om.webcacheHostNet)+")",S="(?:"+K.escapeDots(NeoConfig.om.webcacheHostCom)+")";try{YUI.om.Iframe.listen({pattern:/^cmd=([\s\S]*)$/,handler:R,filter:new RegExp(["^",P,"(?:",O,"|",S,")","(?:/|$)"].join(""))});K.log("INIT Crossframe handler");}catch(Q){K.log("neo:OM:crossframe:setListenerHandler: YUI.om.Iframe missing, check if neo loaded openmail crossframe correctly. message=["+(Q.message||"")+"]");B.stat("OM",["OM:ERR:setListenerHandler",Q.message].join(":"));}}J(I);C.mix(N,{publicHandler:I,setListenHandler:J},true);},"1.0.0",{requires:["om-controller-base","om-common-utils","om-controller-openapi","omCrossframe","rocket-stats"]});YUI.add("om-controller-views",function(E){var f=E.om,L=f.Controller,t=f.common.Errors,h=L.extend("Views"),u=f.common.Utils,w=f.model.DataStore,o=w.Registry,g=w.ViewRegistry,G=w.EventRegistry,V=w.OpenViewLog,k=w.APP_FLAGS,U=E.common.Utils,s=U.substitute,X="om_user_view_id_",m="om_default_view_id_",A=E.Lang,d=E.Array,H=U.rocketstats,K=[NeoConfig.lang?NeoConfig.lang.replace(/-x-.*$/,""):"en-US"],l=NeoConfig.om.intl?NeoConfig.om.intl.replace(/_.*$/,""):"us",O=NeoConfig.om.intl?NeoConfig.om.intl.replace(/^.*_|^.*$/,""):"";function P(x,Y){return X+x+"-"+Y;}function i(x,Y){return m+x+"-"+Y;}function F(x,Y){return i(x,Y)+"_"+new Date().getTime();}function B(x,Y,y){if(y.target_zone==="messagepane"){return F(x,Y);}return y.id?P(x,y.id):i(x,Y);}function c(x){var Y="";if(x.indexOf(X)===0){Y=x.indexOf("-")+1;return x.substring(Y);}return x;}function e(){return"&cb="+(new Date()).getTime();}function J(y,x){var Y=o.get(y);if(Y&&Y[x]){return Y[x];}}function n(AB,y){var Y=o.isInternal(AB),z=J(AB,"status")&k.SANDBOXED,x=(Y&&!z)?NeoConfig.om.webcacheHostCom:NeoConfig.om.webcacheHostNet,AC=(NeoConfig.om.webcacheHostCom.indexOf("yahoo.com")!==-1&&NeoConfig.om.webcacheHostCom.indexOf(".corp.")!==-1),AA="-";return NeoConfig.launch_protocol+(!AC?[AB,AA,x].join(""):x);}function v(AG,AE,AI,AH){var y,x=NeoConfig.farm?NeoConfig.farm.substring(1):"",AA=d.hash(["9323","323","372","6193"]),z=NeoConfig.om.xdmproxyVer,AC=NeoConfig.isFullSSL,AD=o.isInternal(AI),AB=[n(AI,AC),"/om/api/1.0","/openmail.app.invoke"].join(""),AF=[AI,J(AI,"version"),z,NeoConfig.om.intl,NeoConfig.lang,AG,AC?"1":"0"],Y={bn:z,".lang":NeoConfig.lang,".intl":NeoConfig.om.intl,rtl:NeoConfig.isRTL?"1":"0",proxyhost:NeoConfig.servername,sig:u.getAppSignature(AI),vid:c(AH),app:AI,mailver:"neo"};if(x in AA){Y.farm=x;}if(AC){Y.proxyssl=1;}y=[AB,"/",AF.join("/"),"#",E.QueryString.stringify(Y),AD?"&crumb="+NeoConfig.om.crumb:""].join("");return y;}function Q(Y){var x=g.get(Y);if(x){u.log("openview: view["+x+"] already running, no need to openView");}return !!x;}function C(AD,AG,AB,AC,AA,x,AF,y,Y,z,AE){E.use("om-ui-views-hidden",function(AJ){if(Q(AD)){return;}var AI=v(AC,AA,AG,AD),AH=new AJ.om.ui.views.Hidden({appId:AG,instanceId:AB,viewId:AD,params:AF,url:AI,elementAttributes:z});g.set(AD,AH);AH.on("load",function(){if(AE){AE(AH);}});AH.render();});}function D(AD,AG,AB,AC,AA,x,AF,y,Y,z,AE){E.use("om-ui-views-simple","_shared_module_open_mail_application_messagepane",function(AJ){if(Q(AD)){return;}var AI=v(AC,AA,AG,AD),AH=new AJ.om.ui.views.Simple({template:AJ.ui.Templates._shared_module_open_mail_application_messagepane,appId:AG,instanceId:AB,viewId:AD,params:AF,url:AI,elementAttributes:z});g.set(AD,AH);if(AE){AE(AH);}});}function Z(Y,AB,z,y,x,AA,AC){E.use("om-ui-views-folderpane",function(AE){if(Q(Y)){return;}var AD=new AE.om.ui.views.FolderPane({appId:AB,instanceId:z,viewId:Y,params:x.parameters,url:y,height:x.height,hidden:x.hidden,elementAttributes:AA});g.set(Y,AD);AD.on("load",function(){if(AC){AC(AD);}});AD.render();AE.on("scroll",u.onIdle(function(){AE.fire(u.getEventName(null,"folderpane.scroll"),{});},200),(NeoConfig.fullPage)?window:"#shellnavigation");});}function W(AD,AH,AA,AB,z,x,AG,Y,AF,AC,AI,y,AE){E.use("om-ui-views-alignedoverlay",function(AK){if(Q(AD)){return;}var AJ=new AK.om.ui.views.AlignedOverlay({appId:AH,instanceId:AA,viewId:AD,params:AG,url:AB,width:Y,height:AF,elementAttributes:y,options:AI||{}});g.set(AD,AJ);AJ.on("load",function(){if(AE){AE(AJ);}});AJ.render.apply(AJ,AI.renderParams||[]);});}function S(AD,AH,AA,AB,z,x,AG,Y,AF,AC,AI,y,AE){E.use("om-ui-views-panel",function(AK){if(Q(AD)){return;}var AJ=new AK.om.ui.views.Panel({appId:AH,instanceId:AA,viewId:AD,params:AG,url:AB,width:Y,height:AF,elementAttributes:y,options:AI||{}});g.set(AD,AJ);AJ.on("load",function(){if(AE){AE(AJ);}});AJ.render.apply(AJ,AI.renderParams||[]);});}function N(AD,AH,AA,AB,z,x,AG,Y,AF,AC,AJ,y,AE){var AI=o.get(AH);E.use("om-ui-views-pod",function(AQ){var AO=null,AL,AM,AR,AN,AP,AK=new AQ.om.ui.views.Pod({appId:AH,instanceId:AA,viewId:AD,params:AG,url:AB,width:Y,height:AF,elementAttributes:y,options:AJ||{}});g.set(AD,AK);AK.on("load",function(){if(AE){AE(AK);}});if(AJ.renderParams){AO=AJ.renderParams;}else{AL=AQ.one("#wn_container .wn-lyt");if(!AL){return;}AM=false;AN=AL.one('> div > div.pod-fullapp[data-appid="'+AH+'"]');if(!AN){AR=AQ.Object.getValue(AI.settings,["wnp.position"]);if(typeof AR!=="undefined"){AN=AL.all("> div:not(.hidden)");AN=AN.item(AR-1);if(AN){AL=AN;AM=true;}}AN=AQ.Node.create("<div>");AP="pod_app_user_"+AH;AN.setAttribute("id",AP);if(AM){AL.insert(AN,AL);}else{AL.append(AN);}NeoGV.injectPod({tmpl:"fullapp",data:{pod_templ:"fullapp",pod_id:AP,pod_name:AP,pod_layout:"pod-fullapp",appId:AH,app_name:AC},id:AP});AL=AN.one(">div")||AN;AL.empty();AO=[AL,false];}else{if(!AN.get("parentNode").hasClass("hidden")){AN.empty();AL=AN;AO=[AL,AM];}}}AO&&AK.render.apply(AK,AO);});}function T(z,Y,y){var x=G.getByEventName(z,Y,y);if(x){E.detach(y,x.listenerFn);G.del(z,Y,y);}}function I(y,Y){var z=G.getByViewId(y,Y),x;if(z){for(x in z){T(y,Y,x);}}}function R(x){if(!x){U.assert(false);return;}var Y=x.get("viewId"),y=x.get("instanceId");V.del(Y);g.del(Y);I(y,Y);}function r(AA,AQ,AS,AL,AR,AU,y,AC,AM,AJ,AG,AV,AE,AN,Y,AH,AD,z,AB){H.stat("OM","APP:INVOKE:"+AA);V.set(AS,arguments);AQ=AQ||J(AA,"instance");z=z||{};function AT(AW){if(AB){AB(AP);}}var AK={title:z.elementTitle?U.escapeHtml(z.elementTitle):o.getAppName(AA)},AP={},x=[AU],AF=[],AI={appId:AA||null,context:y||null,data:AC||{},reason:AE||null,theme:"",user:{cobrand:O,guid:NeoConfig.neoguid,intl:l,lang:K.slice(),bidi:!!NeoConfig.bidi,isRTL:!!NeoConfig.isRTL,useRichText:E.common.persist.UserData.get("userUIPref.useRichText"),theme:"",themeinfo:NeoConfig.theme?{name:NeoConfig.theme.id,css:NeoConfig.theme.url}:{}},version:"2"};if(o.isInternal(AA)){AI.instanceId=AQ||null;AI.isAMT=NeoConfig.isAMT;AI.urlParams=U.parseQueryString();AI.wssid=NeoConfig.wssid;if(O&&!d.some(AI.user.lang,function(AW){return AW===NeoConfig.lang;
})){AI.user.lang.unshift(NeoConfig.lang);}}if(AH){AI.actionType=AH;}try{if(Y&&Y.className&&(Y.className.indexOf("subAppRow")>-1)){AF=Y.id.split("_");AI.index=AF[AF.length-1];}}catch(AO){}switch(AU){case"alignedoverlay":W(AS,AA,AQ,v(AL,AR,AA,AS),AR,y,AI,AM,AJ,AV,z,AK,AT);break;case"panel":S(AS,AA,AQ,v(AL,AR,AA,AS),AR,y,AI,AM,AJ,AV,z,AK,AT);break;case"pod":N(AS,AA,AQ,v(AL,AR,AA,AS),AR,y,AI,AM,AJ,AV,z,AK,AT);break;case"folderpane":z.parameters=AI;Z(AS,AA,AQ,v(AL,AR,AA,AS),z,AK,AT);break;case"overlay":z.parameters=AI;x.push(AS,AA,AQ,v(AL,AR,AA,AS),z,AK,AT);break;case"tab":x.push(AS,AA,AQ,v(AL,AR,AA,AS),AR,y,AI,AV,AE,AK,AT,z);break;case"lightbox":x.push(AS,AA,AQ,v(AL,AR,AA,AS),AR,AI,AK,AT);break;case"bubble":case"dialog":if(!AM){AM=400;AP={errorMsg:"No width specified - defaulting to 400",warn:t.ERR_BAD_ARG};}if(!AJ){AJ=400;AP={errorMsg:"No height specified - defaulting to 400",warn:t.ERR_BAD_ARG};}x.push(AS,AA,AQ,v(AL,AR,AA,AS),AR,y,AI,AM,AJ,AV,AK,AT);break;case"hidden":C(AS,AA,AQ,AL,AR,y,AI,AG,AE,AK,AT);break;case"uninstall":C(AS,AA,AQ,AL,AR,y,AI,AG,AE,AK,AB);break;case"messagepane":if(NeoConfig.om.isSandboxEnabled){D(AS,AA,AQ,AL,AR,y,AI,AG,AE,AK,AB);}break;default:AP={error:t.ERR_INVALID_TARGET,errorMsg:"Target '"+AU+"' not supported."};AT();}if(x.length>1){E.use("om-controller-views-other",function(AW){h.handleView.apply(null,x);});}}function q(x,y,AB,Y){U.assert(y==="data"||y==="events");var AA;try{AA=x.config[y][AB].action;}catch(z){if(Y){AA={launch:{view:"full",target_zone:"tab",context:null}};}}return AA;}function a(Y){Y.close();R(Y);Y.destroy();}function b(x){var Y=g.get(x),y=Y&&Y.get("instanceId"),x=Y&&Y.get("viewId");if(!Y||Y.get("closing")){return;}Y.set("closing",true);a(Y);}function M(x,y){var Y;if(!o.isInDb(x)){if(!y){E.use("common-ui-dialog-helper",function(AB){var AA={hd:strings["str_om_error_app_not_found_title"],bd:strings["str_om_error_app_not_found_body"]};function z(){AB.use("om-controller-addremoveapp",function(AC){L.AddRemoveApp.uninstallApp(x.app);});}AB.common.ui.DialogHelper.confirm(AA,{ok:{handler:z}});});}return false;}if(o.isRevoked(x)){if(!y){Y={source:"unpublish",noConfirmDialog:true};E.use("common-ui-dialog-helper",function(AA){function z(){AA.use("om-controller-addremoveapp",function(AB){L.AddRemoveApp.uninstallApp(x.app,Y);});}AA.common.ui.DialogHelper.alert({hd:strings["str_om_error_app_nonexistant_title"],bd:strings["str_om_error_app_nonexistant_body"]},{ok:{handler:z}});});}return false;}if(o.isSick(x)){if(!y){E.use("common-ui-dialog-helper",function(z){z.common.ui.DialogHelper.alert({hd:strings["str_om_error_app_unavailable_title"],bd:s(strings["str_om_error_app_unavailable_body"],{app_name:x.label})});});}return false;}return true;}function j(AH,AF,AK,z,x,Y,AB,AD,AA,AE){U.assert(!AB);if(!AH||!AH.config||AH.app=="retry"){E.use("om-controller-applicationlist",function(AO){if(AH.app=="retry"){L.ApplicationList.loadApplication();}else{L.ApplicationList.getApplicationConfigs(function(AP){if(AP){j(o.get(AH.app),AF,AK,z,x,Y,AB,AD,AA,AE);}else{return;}});}});return;}if(!M(AH,AD)){return;}var y={};if(AH.needsAck){u.log("preinstall: "+AH.name);y={callback:function(AO){if(!AO.error){j(o.get(AH.app),AF,AK,z,x,Y);}},appStatus:AH.status,appName:AH.name,developerName:AH.developer_name,description:AH.description,source:"preinstall"};E.use("om-controller-addremoveapp",function(AO){L.AddRemoveApp.installApp(AH.app,y);});return;}var AC=q(AH,AF,AK,z),AG,AM,AL,AN,AJ,AI=(AF==="data")?"data/message":(AF+"/"+AK);for(AG in AC){AM=AC[AG];U.assert(AG=="launch");if(!AH.views[AM.view]){E.use("common-ui-dialog-helper",function(AO){AO.common.ui.DialogHelper.alert({hd:strings["str_om_error_app_unavailable_title"],bd:s(strings["str_om_error_app_unavailable_body"],{app_name:AH.label})});});return false;}AJ=x;AL=B(AH.app,AK,AM);AN=(AM.target_zone==="uninstall")?AH.label:(AM.title||AH.label);if(o.isMessenger(AH.app)){E.fire("Y.om.controller:launchIM:start");}E.each(AM.options,function(AQ,AP){var AR=(AQ==="true"||AQ==="1"),AS=(AQ==="false"||AQ==="0"),AO=AR||AS;y[AP]=AO?(AR||!AS):AQ;});r(AH.app,AH.instance,AL,AM.view,AH.views[AM.view].type,AM.target_zone,AM.context,AJ||null,AM.width,AM.height,AM.ttl,AN,AI,null,Y,AK,AA,y,AE);}}function p(AA,z){var y=g.getAll(),x,Y;for(x in y){Y=y[x];if(AA===Y.get("appId")&&z===Y.get("instanceId")&&!Y.get("closing")){b(x);}}E.fire("om:close_application"+z,z);}E.mix(h,{openView:r,closeView:b,closeApplication:p,getInternalViewId:B,getInternalUserViewId:P,getInternalDefaultViewId:i,isOpened:Q,runActions:j},true);},"1.0.0",{requires:["common-utils","om-controller-base","om-common-utils","om-model-datastore","om-controller-crossframe","om-common-errors","querystring-stringify-simple"]});YUI.add("_shared_module_open_mail_application_messagepane",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_open_mail_application_messagepane={base:'<iframe src="{{app_url}}" id="{{app_iframe_id}}" name="{{app_iframe_id}}" frameborder="0" class="om-views-messagepane"></iframe>'};},"1.0.0");YUI.add("_shared_module_open_mail_application_simple",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_open_mail_application_simple={base:'<iframe src="{{app_url}}" id="{{app_iframe_id}}" name="{{app_iframe_id}}" frameBorder="0" class="om-views" allowtransparency="true"></iframe>'};},"1.0.0");YUI.add("om-ui-views-simple",function(D){function C(E){C.superclass.constructor.apply(this,arguments);}C.NAME="omSimpleView";C.ATTRS={template:{value:D.ui.Templates._shared_module_open_mail_application_simple},hidden:{value:false},url:null,appId:null,instanceId:null,viewId:null,params:null,close:null,closing:{value:false},width:B(),height:B(),rendered:{value:false},elementAttributes:{value:{}},stopWatchAll:{value:{}},stopWatchSample:{value:{}}};var A=D.Array.hash(["36ohk6dgmcd1n","3cp9lcoq32dpn","3ae1mc4rm4e9l","3ie33cpgj6dhi"]);function B(){return{value:null,validator:function(E){return this._validateValue(E);}};}D.extend(C,D.Base,{_validateValue:function(E){return E!==undefined;},_fireLoadEvent:function(G){this.fire("load");var F=this.get("stopWatchAll"),E=this.get("stopWatchSample");if(!D.Object.isEmpty(F)){F.stop();}if(!D.Object.isEmpty(E)){E.stop();}},initializer:function(){this.after("hiddenChange",this.syncUI,null,null,this);this.after("heightChange",this.syncUI,null,null,this);this.after("widthChange",this.syncUI,null,null,this);if(this.get("params")&&(this.get("params").actionType!=="message_render")){this.set("stopWatchAll",new D.common.Utils.Stopwatch("OMOpenView"));if(this.get("appId") in A){this.set("stopWatchSample",new D.common.Utils.Stopwatch("OMOpenView:"+this.get("appId")));}}},getMarkup:function(){return D.common.Utils.substitute(this.get("template").base,{app_url:this.get("url"),app_iframe_id:this.get("viewId")});},_setElementAttributes:function(){var E,F=this.get("elementAttributes");if(!F){return;}for(E in F){if(F.hasOwnProperty(E)){switch(E){case"title":this.getIframe().set("title",F.title);break;}}}},initIframe:function(){this.getIframe();this._setElementAttributes();D.once("load",this._fireLoadEvent,this.iframe,this);},render:function(E,F){if(!this.get("rendered")){this.set("rendered",true);this.node=D.Node.create(this.getMarkup());E=D.one(E||"body");if(this.get("hidden")){this.syncUI();}if(F){E.insert(this.node,E);}else{E.append(this.node);}this.initIframe();}this.syncUI();},getEl:function(){return this.node._node;},getNode:function(){if(!this.node){this.node=D.om.common.Utils.getIFrameById(this.get("viewId"));}return this.node;},getIframe:function(){if(!this.iframe){this.getNode();this.iframe=this.node.one("iframe")||((this.node._node.tagName.toLowerCase()=="iframe")?this.node:null);if(!this.iframe){throw"App view with no iframe";}}return this.iframe;},focus:function(){try{this.node.focus();}catch(E){}},close:function(){if(this.node){this.node.remove(true);}this.set("close",1);},hide:function(){this.set("hidden",true);},show:function(){this.set("hidden",false);},setSize:function(E){this.setAttrs(E);},setSizeDelta:function(F){var E=this.node.get("region");this.setAttrs({width:Math.max(0,E.width+(F.dx-0)),height:Math.max(0,E.height+(F.dy-0))});},getRegion:function(){var E=this.node.get("region");E.width=E.right-E.left;E.height=E.bottom-E.top;return E;},syncUI:function(){if(!this.get("rendered")){return;}if(this.get("hidden")){this.node.setStyles({top:"-50000px",position:"absolute",visibility:"hidden"});}else{this.node.setStyles({top:null,position:null,visibility:null});}this.node.setStyles({width:this.get("width"),height:this.get("height")});}});D.namespace("om.ui.views").Simple=C;},"1.0.0",{requires:["base-base","node","common-utils","common-utils-stats","_shared_module_open_mail_application_simple"]});YUI.add("_shared_module_open_mail_application_hidden",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_open_mail_application_hidden={base:'<iframe src="{{app_url}}" id="{{app_iframe_id}}" name="{{app_iframe_id}}" width="1" height="1" role="presentation" tabIndex="-1" ></iframe>'};},"1.0.0");YUI.add("om-ui-views-hidden",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NAME="omHiddenView";A.ATTRS={hidden:{value:true,readOnly:true},template:{value:B.ui.Templates._shared_module_open_mail_application_hidden}};B.extend(A,B.om.ui.views.Simple,{render:function(){A.superclass.render.call(this,"body");}});B.namespace("om.ui.views").Hidden=A;},"1.0.0",{requires:["om-ui-views-simple","_shared_module_open_mail_application_hidden"]});YUI.add("om-common-apiutils",function(F){var C=F.om.common,G=C.Constants,B=C.Errors;function E(I,H,J){return{error:I||B.ERR_UNDEFINED,errorMsg:H||null,data:J||null};}function A(H,I){return{data:I||null,status:H||G.UNDEFINED};}function D(H){return A(G.OK,H);}F.namespace("om.common").APIUtils={APIError:E,APIReturn:A,APIOK:D};},"1.0.0",{requires:["om-common-errors","om-common-constants"]});YUI.add("om-api-appdata",function(H){var E=H.om.common,D=E.APIUtils,F=D.APIOK,C=H.mail.persist.MetaData,B={};function G(K){if(H.Lang.isObject(K)){var J,I=this.appid;B[I]=K;J=C.get("neo");H.mix(H.namespace.call(J,"pref.apps."+I),K,true);C.set("neo",J);C.save();}}function A(L){var J=this.appid;if(B[J]){L&&L(F(B[J]));}else{var I=C.get("neo"),K=H.namespace.call(I,"pref.apps."+J);B[J]=H.merge(K);L&&L(F(B[J]));}}H.mix(H.namespace("om.common.Errors"),{});H.namespace("om.api").AppData={setAppMetaData:G,getAppMetaData:A};},"1.0.0",{requires:["om-common-apiutils"]});YUI.add("_shared_module_offscreen_bin_menus_openmail_extension",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_menus_openmail_extension={base:"{{menu_item}}{{menu_group}}",selected:"active",checked:"checked",menu_item_shortcut:"<em>{{shortcut}}</em>",menu_item:'<li class="om {{selected}} {{checked}}" data-action="{{data_action}}" role="presentation"> <a href="#" role="menuitem"><span>{{label}}</span>{{menu_item_shortcut}}</a> </li>',menu_group:'<ul class="om" role="presentation">{{menu_items}}</ul>'};},"1.0.0");YUI.add("om-api-menu",function(B){var H=B.common.Utils.substitute,N=B.ui.Templates._shared_module_offscreen_bin_menus_openmail_extension,F={menu_items:function(Q){var R,P=[];while((R=Q.shift())){P.push(H(N.base,R,F));}return P.join("");},menu_item:function(P){return H(N.menu_item,{data_action:P.data_action,label:P.label,shortcut:P.shortcut,selected:P.selected,checked:P.checked},F);},menu_item_shortcut:function(P){return P.shortcut?H(N.menu_item_shortcut,P):"";},selected:function(P){return P.selected?N.selected:"";},checked:function(P){return P.checked?N.checked:"";}},G={},I={},A="-";function D(P){return P.replace(/^(btn-|menu-)/,"");}function C(P){return B.one("#menu-"+D(P));}function E(P){return B.one("#btn-"+D(P));}function K(W,T){var V,S,U,R=C(W),P=[],Q;R.all(".om").remove();while((S=T.menuObj.shift())&&S.label!=A){P.push(H(N.base,S,F));}if(P.length){Q=R.all("ul").pop();if(Q){Q.append(P.join(""));}}P=[];while(T.menuObj.length){U=[];while((S=T.menuObj.shift())&&S.label!=A){U.push(S);}if(U.length){P.push(H(N.menu_group,U,F));}}R.append(P.join(""));V=E(W).menu;if(V){V.checkDescendants(true);}}function M(U,S){var Q,R=S.id,P=S.remove,T;if(U.id in I){Q=I[U.id];}else{Q=I[U.id]=[];}if(P){B.Array.some(Q,function(W,V){if(W.id===R){Q.splice(V,1);return true;}});}else{T=B.Array.find(Q,function(W,V){if(W.id===R){Q[V]=S;return true;}});if(!T){Q.push(S);}}}function O(){var P=B.Object.getValue(NeoConfig,["neoJsHeader","headerClass"]);return(P&&NeoConfig.intl!=="jp")?B.Object.getValue(B,["mail","ui",P]):null;}function J(W){var S=W.rootObj,T=W.menuObj,U=this.instanceid,X=this.id,Y="om:"+U+":"+X+":",V=D(S.id),P,Q,R;for(R in T){if(T.hasOwnProperty(R)){P=T[R];P.data_action=Y+(P.data_action||"");P.id=Y+(P.id||P.label);}}if(S.id=="btn-uh-account"||S.id=="btn-options"){B.Array.each(T,function(Z){M(S,Z);});Q=O();if(Q&&Q.rendered){B.fire("menu:config",S,I[S.id]);}else{B.on("header:rendered",function(){B.fire("menu:config",S,I[S.id]);});}return;}if(C(V)){K(V,{rootObj:S,menuObj:T});}else{G[V]={rootObj:S,menuObj:T};}B.fire("menu:config",S,T);}function L(Q){var R=D(Q.get("id")),P=G[R];if(P){K(R,P);delete G[R];}}B.on("menu:created",L);B.namespace("om.api").Menu={setMenu:J};},"1.0.0",{requires:["om-common-apiutils","_shared_module_offscreen_bin_menus_openmail_extension"]});YUI.add("om-api-event",function(A){var H=A.om.common,I=H.APIUtils,F=I.APIError,E=I.APIReturn,G=I.APIOK,K=A.om.Controller.Openapi,J=A.om.common.Utils,C={};function D(N,P){var M=N.event,L=J.Event.encodeMailEvent(M),O;if(!C[M]){A.on(M,function(Q){A.fire(L,Q);});C[M]=true;}K.setListener(N.__ctx__,{event:L,crumb:N.__crumb__});}function B(M){if(!A.Lang.isString(M.event)){return;}var L=M.__ctx__;A.fire(M.event,{context:{appId:L.appid,instanceId:L.instanceid},args:M.args});}A.namespace("om.api").Event={listen:D,fire:B};},"1.0.0",{requires:["om-common-apiutils"]});YUI.add('openmail_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_om_error_legaldialog_fail":"Sorry, but we are unable to load this application at this time. Please try again in a moment.","str_om_app_uninstall_title":"Remove Application","str_om_app_uninstall_body":"Are you sure you want to remove \"{{app_name}}\" from {{str_branding_mail}}?<br\/>Removing this application means that all permissions for this application will be removed as well.","str_om_app_description_label":"Description","str_om_instance_list_loading":"The application list is still loading.","str_comp_message_not_sent":"Message Not Sent","str_comp_captcha_reader_hint":"Attention users who are both hearing- and vision-impaired: To complete this form you must enter a word that is part of an image or a few digits from an audio recording. If you cannot read the image or hear the audio, {{str_branding}} is happy to assist you. A representative from Customer Care will need to contact you. Please provide your phone number and email address and send your request by visiting this URL - <a href=\"{{conf_url_help_general}}\">{{conf_url_help_general}}<\/a> To request assistance with registration, please first read the {{str_branding}} Terms of Service located at <a href=\"{{conf_url_tos}}\">{{conf_url_tos}}<\/a> before submitting your request.","str_comp_captcha_header":"To help fight spam, please type in the characters from the box below.","str_comp_captcha_help":"Need help?","str_comp_captcha_enter_code":"Enter the code","str_comp_captcha_img_title":"Enter the characters displayed","str_comp_captcha_img_alt":"CAPTCHA Image","str_comp_captcha_numbers_only":"NUMBERS ONLY","str_comp_captcha_audio_playing":"Audio code is playing...","str_comp_captcha_replay":"Replay","str_comp_captcha_btn_audio_code_attr":"Click here for an audio code","str_comp_captcha_btn_audio_code":"Audio code","str_comp_captcha_back_to_visual":"Back to visual code","str_cascd_ExceededMaxTo":"The message To: field exceeds the maximum number of recipients","str_cascd_ExceededMaxCc":"The message Cc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxBcc":"The message Bcc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxRecipients":"The message address fields exceed the maximum number of recipients","str_cascd_ExceededMaxHourlyMessages":"Number of hourly messages exceeded","str_cascd_ExceededMaxDailyMessages":"Number of daily messages exceeded","str_cascd_InvalidRecipientAddress":"The message To: Cc: or Bcc: field contains a malformed email address","str_btn_add_recipient_attr":"Add {{email_id}} to your Contacts","str_comp_original_msg":"Original Message","str_comp_email_sent":"Email Sent","str_comp_done":"Done","str_btn_recipient_lozenge_attr":"{{email_id}}","str_comp_auto_add_to_contacts":"Automatically add new recipients to Contacts","str_comp_recipients":"Recipients","str_toolbar_back_to_message":"Back to Message","str_comp_captcha_msg":"Your message was not sent","str_comp_captcha_msg_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_msg_contact_cust_care":"If this error continues, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}} Customer Care<\/a> for further help.","str_comp_captcha_apology":"We apologize for the inconvenience.","str_comp_captcha_account":"Account has been blocked from sending","str_comp_captcha_account_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_account_contact_cust_care":"To restore the ability to send from your account, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}}<\/a> Customer Care for further help."});
}, '1.0.0');YUI.add("om-api-message",function(B){var O=B.om,D=O.Controller,N=D.Openapi,J=B.om.common,P=J.Utils,G=J.Constants,M=J.Errors,I=J.APIUtils,F=I.APIError,E=I.APIReturn,H=I.APIOK,A=B.common.persist.UserData;function C(R,S,T){var Q=S&&S.viewId?S.viewId:R.id;B.fire("om:msg:"+Q,"message.readAppTime",S);}function L(Q,R,S){if(R.fields){S({data:B.Array.hash(R.fields,B.Array.map(R.fields,function(T){return A.get(T);}))});}else{S({error:'Argument object requires "fields" field'});}}function K(Q,R,S){if(B.Lang.isArray(R.data)){B.use("mail-common-downloader-v"+(NeoConfig.downloaderVersion||"1"),function(T){T.mail.common.downloader.render(T.Array.map(R.data,function(U){return{fid:U.fid,mid:U.mid,pid:U.pid};}),{urlParams:R.params});});}}B.namespace("om.api").Message={readAppTime:C,getUserDataFields:L,downloadAttachment:K};},"1.0.0",{requires:["om-controller-openapi","om-common-apiutils","om-common-errors","om-common-constants"]});YUI.add("om-controller-internalapi",function(G){var M=G.om,N=M.Controller,X=N.extend("Internalapi"),I=N.Openapi,Q=N.Views,f=M.common.Utils,Z=M.common.Constants,P=M.common.Errors,F=M.model.DataStore,U=F.Registry,a=G.common.Utils,K=M.common.APIUtils,R=M.common.Constants,E=K.APIError,W=K.APIReturn,T=K.APIOK,H=G.common.Utils.rocketstats,J=G.Env._loader.groups.mail.modules,S=G.Lang;function B(g,Y){return F.ViewRegistry.get(Q.getInternalUserViewId(g,Y));}function d(i,j,Y,h){var g=B(j,Y);if(g&&g[i]){return g[i](h);}}function A(i,j,Y,h){var g=B(j,Y);if(g&&Q[i]){return Q[i](g,h);}}function e(h,g){var Y={ctrlKey:h.ctrlKey||false,altKey:h.altKey||false,shiftKey:h.shiftKey||false,metaKey:h.metaKey||false,keyCode:h.keyCode||0,charCode:h.charCode||0};YUI().use("node-event-simulate",function(i){i.one(g||document).simulate(h.type,Y);});}var D=(function(){var j,k,g,i,Y,h=1000;return function(l){if(g){clearInterval(k);clearInterval(g);clearTimeout(i);g=null;}else{j=document.title;}if(l===false){document.title=j;return;}document.title=l;g=setInterval(function(){document.title=l;},h*2);i=setTimeout(function(){document.title=j;k=setInterval(function(){document.title=j;},h*2);},h);};})();function b(){return f.getViewport();}function V(k,Y){var h,i,g,j;if(!k){g={"content_type":[Y[0].type+"/"+Y[0].subtype]};i=U.getAttachmentHandlerInfo(g);if(i===-1){return E(P.ERR_BAD_ARG,"bad search argument");}else{if(!i){return E(P.ERR_UNDEFINED,"no viewer registered");}}k=i.handlerId;}h=U.get(k);if(!h||!U.isAttachmentHandler(k)){return E(P.ERR_BAD_ARG,"no such attachment handler: "+k);}N.Views.runActions(h,"events","attachment_view",null,Y,null,null,true);return T();}function C(i,Y,k){var l,h,g,j;if(!i){return E(P.ERR_BAD_ARG,"need an appid");}if(["view","sign","save"].indexOf(k)===-1){return E(P.ERR_BAD_ARG,"fxn name isn't allowed");}l=U.get(i);if(!l||!U.isAttachmentHandler(i)){return E(P.ERR_BAD_ARG,"no such attachment handler");}N.Views.runActions(l,"events","attachment_"+k,null,Y,null,null,true);return T();}function L(Y){if(Y.key){if(Y.value){H.stat("OM",Y.key,Y.value);}else{H.stat("OM",Y.key);}}}function O(AC,g){var AK={error:P.ERR_UNDEFINED,errorMsg:"callWebService is not available"},AJ=g.crumb||"",Ag=g.cmd||"",Aa=g.args,Al=Aa&&Aa.viewId?Aa.viewId:AC.id,n,AY,AS=(Aa&&Aa.ctx&&Aa.ctx.eventName)||"";var t=G.mail.persist.MetaData;(Ag!="log")&&f.log("_"+Ag,U.getAppName(AC.appid)+".API");if(!(AJ===NeoConfig.om.crumb)&&g.cmd!="returnEvent"&&!(AJ===NeoConfig.om.crumb&&U.isInternal(AC.appid))){I.returnAPI(AC,AK);return;}switch(Ag){case"alertDialog":G.use("common-ui-dialog-helper",function(i){i.common.ui.DialogHelper.alert({hd:Aa.hd,bd:Aa.bd},{ok:{handler:function(){I.returnAPI(AC,T());}}});});break;case"callWithContext":AC.restoreCallerContext=(function(o,m,i){return function(){AC.appid=o;AC.instanceid=m;AC.id=i;};})(AC.appid,AC.instanceid,AC.id);AC.appid=g.context.appId;AC.instanceid=g.context.instanceId;AC.id=g.context.viewId||AC.id;I.enforceRules(g.api.name,AC,g.api.args);break;case"confirmDialog":G.use("common-ui-dialog-helper",function(i){i.common.ui.DialogHelper.confirm({hd:Aa.hd,bd:Aa.bd},{ok:{handler:function(){var m={data:{value:Z.DIALOG_OK}};I.returnAPI(AC,m);}},cancel:{handler:function(){var m={data:{value:Z.DIALOG_CANCEL}};I.returnAPI(AC,m);}}});});break;case"hideView":d("hide",AC.appid,Aa.id,Aa);break;case"showView":d("show",AC.appid,Aa.id,Aa);break;case"beginMoveView":d("beginMove",AC.appid,Aa.id,Aa);break;case"endMoveView":d("endMove",AC.appid,Aa.id,Aa);break;case"moveView":d("move",AC.appid,Aa.id,Aa);break;case"beginResizeView":d("beginResize",AC.appid,Aa.id,Aa);break;case"endResizeView":d("endResize",AC.appid,Aa.id,Aa);break;case"resizeView":d("resize",AC.appid,Aa.id,Aa);break;case"moveViewTo":d("position",AC.appid,Aa.id,Aa);break;case"getViewRegion":var AZ=d("getRegion",AC.appid,Aa.id,Aa)||{};AZ.id=Aa.id;I.returnAPI(AC,AZ);break;case"makeTopMostView":A("makeTopMost",AC.appid,Aa.id,Aa);break;case"minimizeView":A("minimize",AC.appid,Aa.id,Aa);break;case"restoreView":A("restore",AC.appid,Aa.id,Aa);break;case"dockView":A("dock",AC.appid,Aa.id,Aa);break;case"undockView":A("undock",AC.appid,Aa.id,Aa);break;case"setViewSizeDelta":d("setSizeDelta",AC.appid,Aa.id,Aa);break;case"setViewSize":d("setSize",AC.appid,Aa.id,Aa);break;case"focusView":d("focus",AC.appid,Aa.id,Aa);break;case"browser.toggleTitle":D(Aa.title);break;case"getViewport":I.returnAPI(AC,b());break;case"getNeoYuiComponents":I.returnAPI(AC,{"url":NeoConfig.yuiURL,"base":YUI_config.base,"loaderPath":YUI_config.loaderPath,"comboBase":YUI_config.comboBase,"moduleRoot":YUI_config.root});break;case"log":var AG=U.getAppName(AC.appid);f.log(Aa.message,AG);break;case"trackEvent":if(!Aa.spaceId){return;}var Ab={type:"b",evt:{sp:Aa.spaceId,npv:!Aa.pageView,trace:"om_app_"+(Aa.trace||AC.appid)}};G.fire("darlaEvent",{action:Ab});break;case"triggerAds":if(!Aa.spaceId){return;}var Ab={type:"a",name:"VISIBLE",evt:{sp:Aa.spaceId,npv:false||!Aa.pageView,trace:"om_app_"+(Aa.trace||AC.appid)}};G.fire("darlaEvent",{action:Ab});break;case"relogin":G.use("common-net-error",function(i){i.common.net.Error.relogin(null,{stat:"OM_"+AC.appid});});break;case"createlist.command":G.use("contacts-ui-createlistdialog",function(o){var m=o.contacts.ui.CreateListDialog,r=m&&m[Aa.cmd],i;if(o.Lang.isFunction(r)){r.apply(m,[Aa.args,function(x){I.returnAPI(AC,W(null,x));}]);}else{I.returnAPI(AC,E(P.ERR_BAD_ARG,'unsupported method on interface "'+Ag+'"'));}});break;case"contacts.command":G.use("contacts-api-utils",function(r){var m=r.contacts.utils,o=m&&m[Aa.cmd],i;if(r.Lang.isFunction(o)){i=o.apply(m,Aa.args);I.returnAPI(AC,W(null,i));}});break;case"getAddressbook":G.use("contacts-api-utils","contacts-api",function(){var o=G.contacts,m=o.api,Aq=o.utils;if(!Aq.areContactsLoaded()){G.once("contacts:api:loaded",arguments.callee);m.load();}else{var Au=Aq.getResponseObject(),Av="",y=10;if(G.UA.webkit&&G.UA.webkit<534&&!G.UA.chrome&&Au.contacts&&Au.contacts.contact&&Au.contacts.contact.length>1000){var x=Au.contacts.contact,r=x.length,Ar=[],At="",As=0;
Au.$cbid=AC.cbid;Au.$apiVersion=AC.apiVersion;for(;As<r;As=As+y){At=G.JSON.stringify(x.slice(As,As+y));Ar.push(At.substring(1,At.length-1));}Au.contacts.contact=["!!PLACEHOLDER!!"];Av=G.JSON.stringify(Au).replace(/"!!PLACEHOLDER!!"/,Ar.join(","));I.returnAPI(AC,{},null,Av);return;}I.returnAPI(AC,Au);}});break;case"getMetaData":I.returnAPI(AC,t.getAttrs());break;case"setLoginPref":if("value" in Aa){if(S.isUndefined(t.get("cg"))){t.addAttr("cg",{pref:{im:{}}});t.set("cg",{pref:{im:{loginpref:Aa.value+""}}});t.save();}else{t.set("cg.pref.im.loginpref",Aa.value+"");}}break;case"setAppMetaData":G.om.api.AppData.setAppMetaData.call(AC,Aa);break;case"getAppMetaData":G.om.api.AppData.getAppMetaData.call(AC,function(i){I.returnAPI(AC,i);});break;case"social.init":G.use("om-api-social",function(i){i.om.api.Social.init(null,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.auth":G.use("om-api-social",function(i){i.om.api.Social.auth(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.revokeAuth":G.use("om-api-social",function(i){i.om.api.Social.revokeAuth(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.sign":G.use("om-api-social",function(i){i.om.api.Social.sign(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.getAuthUrl":G.use("om-api-social",function(i){i.om.api.Social.getAuthUrl(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.send":G.use("om-api-social",function(i){i.om.api.Social.send(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"social.status":G.use("om-api-social",function(i){i.om.api.Social.status(Aa,function(m){m=m||W();I.returnAPI(AC,m);});});break;case"getInstanceList":if(F.Loading.isLoading()){alert(strings["str_om_instance_list_loading"]);return;}else{var AF={},AM,AV=U.getAll();for(AM in AV){AF[AM]=AV[AM].instance;}AK.instanceList=AF;I.returnAPI(AC,AK);}break;case"getSelectedItem":var Ad={},Aj=NeoConfig&&NeoConfig.msgrData,AW=Aj&&Aj.message,AH=AW&&AW.part&&AW.part[0]&&AW.part[0].text;if(AW&&AH){var Ao=(AW.header.to||[])[0]||{},u=AW.header.from||{email:""},AP=AP||G.common.persist.UserData.get("userSendPref.defaultFromName")||Ao.email,Ac,Ae,AX,z,q=AH.replace(/^[\s\S]*({"messages"[\s\S]+})/,"$1");Aj.reply={alias:Ao.email,id:u.email};try{z=(G.JSON.parse(q)).messages||[];}catch(Ai){z=[];}for(Ae=0;(Ac=z[Ae]);Ae++){AX=u.email.replace(/[@%].*/,"")!==Ac.from.replace(/[@%].*/,"");if(Ae===0){Aj.spam.initiatedBy=AX?1:2;}if(typeof Ac.cloud_id==="number"){Aj.reply.cloud_id=Ac.cloud_id;Aj.spam.cloud_id=Ac.cloud_id;}if(!Aj.spam.spims){Aj.spam.spims=[];}Aj.spam.spims.push({initiatedBy:AX?1:2,hash:Ac.clt_msg_context||0,message:Ac.txt});}if(u.email==="mailbot@yahoo.com"){Aj.reply.id=u.name;Aj.reply.network="sms";Aj.reply.cloud_id=undefined;}}if(Aj&&Aj[Aa.context]){Ad=Aj[Aa.context];}I.returnAPI(AC,Ad);break;case"getFrameNameByViewId":var Ad={id:Q.getInternalUserViewId(AC.appid,Aa.id)};I.returnAPI(AC,Ad);break;case"getNeoString":if(Aa.keys instanceof Array){var Am={};G.Array.each(Aa.keys,function(i){Am[i]=window.strings[i]||"";});I.returnAPI(AC,Am,true);}else{I.returnAPI(AC,{value:window.strings[Aa.key||""]||""},true);}break;case"getNeoConfig":var w=S.isString(Aa.key)&&Aa.key.split("."),Ae,AA;if(S.isArray(w)&&w[0]==="NeoConfig"){try{AK=window["NeoConfig"];for(Ae=1,AA=w.length;Ae<AA;Ae++){AK=AK[w[Ae]];}if(S.isUndefined(AK)){throw new Error("bad key name");}}catch(Ai){AK=E(P.ERR_BAD_ARG,"bad key name");}}else{AK=E(P.ERR_BAD_ARG,"bad key name");}I.returnAPI(AC,AK,true);break;case"installApp":var s=Aa,AE={appName:s.appName,developerName:s.appDeveloper,appStatus:s.appStatus,appVersion:s.appVersion,source:"gallery",callback:function(i){if(AJ!=NeoConfig.om.crumb){i.crumb=NeoConfig.om.crumb;}I.returnAPI(AC,i);}};G.use("om-controller-addremoveapp",function(i){N.AddRemoveApp.installApp(s.appId,AE);});break;case"isActive":var Af=B(AC.appid,Aa.id),Y=Af&&Af.get("tab");I.returnAPI(AC,{isActive:!!(Y&&Y.elTab&&Y.elTab.hasClass("active"))});break;case"returnEvent":if(AS.indexOf("compose.")===0){G.fire(Aa.ctx.returnEventId,Aa);}else{G.fire("message.read"+Aa.ctx.mid,Aa,AC.appid,AC.instanceid);}break;case"rs":if(S.isArray(Aa)){G.Array.each(Aa,L);}else{if(S.isObject(Aa)){L(Aa);}}break;case"sendKeyEvent":var l=F.ViewRegistry.get(Al),AN=l.getNode();e(Aa,AN._node);break;case"setListener":Aa.crumb=AJ;I.setListener(AC,Aa);break;case"setMenuConfig":G.om.api.Menu.setMenu.call(AC,Aa);break;case"setPreviewPaneButtonConfig":var AO=Aa.buttonObj,Ap=AC.instanceid,Al=AC.id,p,Ae;for(Ae in AO){p=AO[Ae];p.data_action="om:"+Ap+":"+Al+":"+p.data_action;}G.fire("previewpane:config",AO);break;case"subjectSearch":G.fire("search:input",{query:'subject:"'+a.escapeHtml(Aa.query)+'"'});break;case"msgAttachmentDownloadSingle":if(Aa.fid&&Aa.mid&&Aa.pid){G.use("mail-common-downloader-v"+(NeoConfig.downloaderVersion||"1"),function(m){var i=[{fid:Aa.fid,mid:Aa.mid,pid:Aa.pid}];m.mail.common.downloader.render(i,{urlParams:Aa.params});});}else{G.fire("om:msg:"+Al,"downloadSingle",Aa);}break;case"msgAttachmentDownloadAll":G.fire("om:msg:"+Al,"downloadAll",Aa);break;case"msgAttachmentDownloadAllPhotos":G.fire("om:msg:"+Al,"downloadAllPhotos",Aa);break;case"msgAttachmentDownloadEverything":G.fire("om:msg:"+Al,"downloadEverything",Aa);break;case"setMsgFlag":G.fire("om:msg:"+Al,"setFlag",Aa);break;case"sandboxStartStopwatch":G.fire("om:msg:"+Al,"sandboxStartStopwatch",Aa);I.returnAPI(AC,T());break;case"sandboxRenderComplete":G.fire("om:msg:"+Al,"sandboxRenderComplete",Aa);break;case"sandboxDOMSubtreeModified":G.fire("om:msg:"+Al,"sandboxDOMSubtreeModified",Aa);break;case"sandboxDOMSubtreeModifiedWidth":G.fire("om:msg:"+Al,"sandboxDOMSubtreeModifiedWidth",Aa);break;case"updateDocScroll":if(!NeoConfig.fullPage){break;}var l=f.getIFrameById(Al),Ak=l.get("offsetHeight"),AL=l.getY(),Ah=AL+Ak+Aa.deltaHeight,j=G.DOM.docHeight("body"),AR=Ah-j+1;if(AR>0){if(G.UA.ie>0){l.setStyle("height",Ak+Aa.deltaHeight+"px");setTimeout(function(){window.scrollBy(0,AR);},0);}else{window.scrollBy(0,AR);
}}else{if(G.UA.ie===8){l.setStyle("height",Ak+Aa.deltaHeight+"px");}}break;case"toggleShowDetails":G.fire("om:msg:"+Al,"toggleShowDetails",Aa);break;case"registerSandboxController":G.fire("om:msg:registerSandboxController",AC);break;case"sandboxViewReady":G.fire("om:msg:"+Al,"sandboxViewReady",Aa);break;case"getSandboxCss":G.fire("om:msg:getCss",AC);break;case"getSandboxConf":G.fire("om:msg:getConf",AC);break;case"getSandboxPostLaunchConfig":G.fire("om:msg:getSandboxPostLaunchConfig",AC);break;case"openMailToCompose":G.fire("om:msg:"+Al,"mailto",Aa);break;case"newMessage":G.fire("newMessage");break;case"newConv":G.fire("previewpane:action",Aa&&Aa.action?Aa.action:"im");break;case"openMailToMRD":G.fire("om:msg:"+Al,"mrd",Aa);break;case"viewFullMsg":G.fire("om:msg:"+Al,"viewFullMsg",Aa);break;case"unblockImages":G.fire("om:msg:"+Al,"unblockImages",Aa);break;case"loadOptions":G.fire("om:msg:"+Al,"loadOptions",Aa);break;case"retryLoad":G.fire("om:msg:"+Al,"retryLoad",Aa);break;case"restartMessageRead":G.mail.model.DataStore.Messages.flushExt("openmail");break;case"switchFolder":var AI=Aa.newFid,An=Aa.newName;if(AI){G.mail.FoldersView.set("fid",{fid:AI,name:An});}break;case"showMore":G.fire("om:msg:"+Al,"showMore",Aa);break;case"uninstallApp":var AE={source:"gallery",callback:function(i){if(AJ!=NeoConfig.om.crumb){i.crumb=NeoConfig.om.crumb;}I.returnAPI(AC,i);}};G.use("om-controller-addremoveapp",function(i){N.AddRemoveApp.uninstallApp(Aa.appId,AE);});break;case"addContact":var AW=NeoConfig.msgrData.message;if(AW){G.use("mail-ui-messageevents",function(i){i.mail.ui.MessageEvents.handleUI({action:"addcontact"},AW.fid,Aa,[AW]);});}else{G.fire("addContact",Aa.name,Aa.email);}break;case"contact-card-menu":var h=f.getIFrameById(Al),AU=h.getX()+Aa.region.left,AT=h.getY()+Aa.region.top;G.use("contacts-ui-contact-popup",function(x){var i=(Aa.email==="mailbot@yahoo.com"&&(/^\d+$/).test(Aa.name)),r=null,o;r=x.one(".dummy_menu_node");if(x.Lang.isNull(r)){r=x.Node.create("<div class='dummy_menu_node'></div>");r.setStyles({position:"absolute",opacity:"0"});x.one("body").appendChild(r);}r.setStyles({width:Aa.region.width+"px",height:Aa.region.height+"px",display:"block"});r.setXY([AU,AT]);if(r.menu){try{if(r.menu.isVisible()){r.menu.getMenuNode().hide();}}catch(m){}r.menu=false;}o={email:Aa.email,name:Aa.name,editable:false,inAB:Aa.isInAB,copyable:true};if(Aa.targetId){o.stateChangeCB=function(y){if(y.state=="hide"){x.fire("om:msg:"+Al,"sandboxSetFocus",{selector:"#"+Aa.targetId});}};}x.mail.ContactPopup.showContactMenu(x.mail.ContactPopup.TYPE_INTERMEDIATE,r,o);});break;case"iframe:event":G.one("#shellcontent").simulate(Aa.type,Aa);break;case"event.fire":Aa.__ctx__=AC;G.om.api.Event.fire(Aa);break;case"event.listen":Aa.__ctx__=AC;Aa.__crumb__=AJ;G.om.api.Event.listen(Aa,function(i){I.returnAPI(AC,i||W());});break;case"mail.send":G.use("om-api-mail",function(i){i.om.api.Mail.send(Aa,function(m){I.returnAPI(AC,m);});});break;case"mail.reply":G.use("om-api-mail",function(i){i.om.api.Mail.reply(Aa,function(m){I.returnAPI(AC,m);});});break;case"mail.replyall":G.use("om-api-mail",function(i){i.om.api.Mail.replyall(Aa,function(m){I.returnAPI(AC,m);});});break;case"mail.forward":G.use("om-api-mail",function(i){i.om.api.Mail.forward(Aa,function(m){I.returnAPI(AC,m);});});break;case"resolveStr":(function(){var i=G.common.Utils.substitute;function m(r){var o;if(S.isObject(r)){o=S.isArray(r)?[]:{};G.each(r,function(y,x){o[x]=m(y);});}else{if(S.isString(r)){o=i(r,0,0,0,strings);}else{o=r;}}return o;}AK={data:{value:m(Aa)}};})();I.returnAPI(AC,AK);break;case"contactChanged":G.fire("contacts:contactChanged",{});break;case"setTabTitle":var Af=B(AC.appid,Aa.id),Y=Af&&Af.get("tab");if(Y&&Y.elTab){if(Aa.fixedWidth){Y.elTab.setStyle("maxWidth",Y.elTab.getStyle("width"));}if(Aa.style){Y.elTab.setStyles(Aa.style);}if(Aa.title){Y.set("title",Aa.title);}}break;case"setMessengerConfig":for(var w in Aa){if(Aa.hasOwnProperty(w)){NeoConfig.Messenger[w]=Aa[w];}}break;case"getAttachmentHandlerInfo":AK=U.getAttachmentHandlerInfo(Aa);if(AK===-1){AK=E(P.ERR_BAD_ARG,"bad search argument");}else{AK=T(AK);}I.returnAPI(AC,AK);break;case"getAttachmentHandlers":AK=U.getAttachmentHandlers(Aa);if(AK===-1){AK=E(P.ERR_BAD_ARG,"bad search argument");}else{AK=T(AK);}I.returnAPI(AC,AK);break;case"openAttachmentViewer":AK=V(Aa.handlerId||null,G.Array(Aa.attachments||Aa));I.returnAPI(AC,AK);break;case"openAttachmentHandler":AK=C(Aa.handlerId,G.Array(Aa.attachments),Aa.fxn);I.returnAPI(AC,AK);break;case"setSearchConfig":try{G.fire("search:config",Aa);AK=T();}catch(Ai){AK=E(P.ERR_BAD_ARG,"bad search config argument");}I.returnAPI(AC,AK);break;default:var AB=Ag.split(".");if(AB.length===2){var v=AB[0][0].toUpperCase()+AB[0].slice(1),k=AB[1],AD="om-api-"+AB[0],AQ=function(){var i=G.om.api[v];if(i&&i[k]){i[k].call(i,AC,Aa,function(m){m=m||W();I.returnAPI(AC,m);});}};if(G.om.api[v]){AQ();return;}else{if(J[AD]){G.use(AD,function(){AQ();});return;}}}f.log(Ag+" is not supported yet","InternalAPI");I.returnAPI(AC,AK);}}(function c(){G.on("signout",function(){G.fire(f.getEventName(null,"mail.signout"),{});});G.on("contacts:sendSms",function(g){G.fire(f.getEventName(null,"contacts.sendsms"),{id:g.id});});G.on("contacts:sendIM",function(g){G.fire(f.getEventName(null,"contacts.sendim"),{id:g.id});});G.on("chats:sendIM",function(g){G.fire(f.getEventName(null,"chats.sendim"),g);});G.on("chats:sendSms",function(g){G.fire(f.getEventName(null,"chats.sendsms"),g);});var Y={"ct:addcontact":"add","ct:deletecontact":"delete","ct:editcontact":"update"};G.on("contacts:contactChanged",function(g){G.once("contacts:api:loaded",function(){g=g||{};G.fire(f.getEventName(null,"contacts.changed"),W(R.OK,{type:Y[g.type],list:g.id}));});});G.on("tabChange",function(g){G.fire(f.getEventName(null,"tab.changed"),{});});G.on("omsearch:input",function(g){G.fire(f.getEventName(null,"search.input"),g);});})();G.mix(X,{internalAPI:O},true);NeoConfig.Messenger=NeoConfig.Messenger||{};if(NeoConfig.setFinished){NeoConfig.setFinished("om");
f.log("Set OM loading time in RTB");}},"1.0.0",{requires:["om-controller-base","om-common-utils","om-common-apiutils","om-model-datastore","om-controller-openapi","rocket-stats","om-api-appdata","om-api-menu","om-api-event","om-api-message"]});YUI.add("om-ui-views-folderpane",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NAME="omFolderPaneView";A.ATTRS={height:{value:300}};B.extend(A,B.om.ui.views.Simple,{render:function(){A.superclass.render.call(this,".items-nav-applications",true);if(this.get("rendered")){if(B.mail.ui.searchTab&&B.mail.ui.searchTab.get("active")){this.node.addClass("hidden");}this.node.addClass("items om-views-folderpane");}}});B.namespace("om.ui.views").FolderPane=A;},"1.0.0",{requires:["om-ui-views-simple"]});YUI.add("mail-common-cachewarmer",function(B){B.namespace("mail.common.cachewarmer");var G=5000,J=3000,A=10,H=NeoConfig.pfm,L=50,C=B.Env._loader,I={isIdle:function(){return true;}},K=B.common.net.Session||I,F=B.common.net.SessionXDR||I,E=B.common.net.SessionFlash||I;var D=function(M){try{return function(){this.queue[M].apply(this.queue,arguments);};}catch(N){}return false;};B.mail.common.cachewarmer={queue:(function(){var M=new B.AsyncQueue();M.defaults.timeout=L;return M;})(),add:function(){this.queue.add.apply(this.queue,arguments);return this;},run:function(){this.queue.add(this.queue.stop);this.queue.run();return this;},clear:function(){this.queue.stop();B.detach("cachewarmer:stopMessagePrefetch");},warmUp:function(O,P,N,M){N&&this.addDelay(N);!M&&this.addIdleCheck();if(B.Lang.isArray(P)&&P.length){this.queue.add({fn:function(){B.use.apply(B,P);},timeout:10,id:O});return this;}return false;},addDelay:function(M){if(M){this.queue.add({fn:function(){},timeout:M});return true;}return false;},addIdleCheck:function(O){var M=0,N=this.queue;O=O||A;N.add({fn:function(){M++;},timeout:400,until:function(){return((K.isIdle()&&F.isIdle()&&E.isIdle())&&(!C||!C._loading))||(M==O&&N.stop());}});return true;},setupLaunch:function(M){this.addDelay(M?J:G);this.addIdleCheck();return true;},preFetchMessages:function(P,O,N,M){this.clear();N&&this.addDelay(N);(P=="Inbox"&&!M)?this.addInboxPreFetching():this._preFetchMessages(P,O,M);return this.run();},addInboxPreFetching:function(){this._preFetchMessages("Inbox",B.mail.ui.MessageList.getMsgHdrList());},_preFetchMessages:function(M,V,S){if(!H){return false;}var R,N,U=[],W,Y,Q,P=H.batch.split(","),T=H.count,X=H.maxSize,O=B.mail.ui.MessageList;if(S){U=S;}else{V&&O.getNeighbors(V,-1,U,M,T,X);}while((Q=P.shift()||10)&&(Y=U.splice(0,Q))&&(N=Y.length)){W=[];for(R=0;R<N;R++){W.push(Y[R]);}this.addIdleCheck();this.queue.add((function(Z){return{fn:function(){B.mail.Controller.Messages.get({fid:M,prefetch:Z,cachekey:"CacheWarmer"},{suppressCodes:["*"]});},timeout:10,id:"messagePrefetch"};})(W));}B.once("cachewarmer:stopMessagePrefetch",function(Z){var b=["messagePrefetch"];this.queue.remove("messagePrefetch");this.clear();if(!B.Lang.isUndefined(Z)&&B.Lang.isFunction(Z.done)){if(!B.Lang.isUndefined(Z.data)){b.push(Z.data);}Z.done.apply(this,b);}},this);this.queue.on("complete",function(){B.detach("cachewarmer:stopMessagePrefetch");});return true;},addCompose:function(N,M,O){this.warmUp("compose",O,N,M);},before:D("before"),on:D("on"),after:D("after"),fire:D("fire")};},"1.0.0",{requires:["async-queue","loader","common-net-session","mail-ui-messagelist-base","mail-controller-messages"]});