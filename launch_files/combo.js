YUI.add("lang/datatype-date-format",function(a){a.Intl.add("datatype-date-format","",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%Y-%m-%dT%H:%M:%S%z",p:["AM","PM"],P:["am","pm"],x:"%Y-%m-%d",X:"%H:%M:%S"});},"@VERSION@");YUI.add("lang/datatype-date",function(a){},"@VERSION@",{use:["lang/datatype-date-format"]});YUI.add("lang/datatype",function(a){},"@VERSION@",{use:["lang/datatype-date"]});YUI.add("datatype-number-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.Number"),{parse:function(d){var c=(d===null)?d:+d;if(a.isNumber(c)){return c;}else{return null;}}});b.namespace("Parsers").number=b.DataType.Number.parse;},"@VERSION@",{requires:["yui-base"]});YUI.add("datatype-number-format",function(b){var a=b.Lang;b.mix(b.namespace("DataType.Number"),{format:function(j,e){if(a.isNumber(j)){e=e||{};var d=(j<0),f=j+"",n=e.decimalPlaces,c=e.decimalSeparator||".",m=e.thousandsSeparator,l,g,k,h;if(a.isNumber(n)&&(n>=0)&&(n<=20)){f=j.toFixed(n);}if(c!=="."){f=f.replace(".",c);}if(m){l=f.lastIndexOf(c);l=(l>-1)?l:f.length;g=f.substring(l);for(k=0,h=l;h>0;h--){if((k%3===0)&&(h!==l)&&(!d||(h>1))){g=m+g;}g=f.charAt(h-1)+g;k++;}f=g;}f=(e.prefix)?e.prefix+f:f;f=(e.suffix)?f+e.suffix:f;return f;}else{return(a.isValue(j)&&j.toString)?j.toString():"";}}});},"@VERSION@",{requires:["yui-base"]});YUI.add("datatype-number",function(a){},"@VERSION@",{use:["datatype-number-parse","datatype-number-format"]});YUI.add("datatype-date-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.Date"),{parse:function(d){var c=null;if(!(a.isDate(d))){c=new Date(d);}else{return c;}if(a.isDate(c)&&(c!="Invalid Date")&&!isNaN(c)){return c;}else{return null;}}});b.namespace("Parsers").date=b.DataType.Date.parse;},"@VERSION@",{requires:["yui-base"]});YUI.add("datatype-date-format",function(d){var a=function(e,g,f){if(typeof f==="undefined"){f=10;}g=g.toString();for(;parseInt(e,10)<f&&f>1;f/=10){e=g+e;}return e.toString();};var c={formats:{a:function(f,e){return e.a[f.getDay()];},A:function(f,e){return e.A[f.getDay()];},b:function(f,e){return e.b[f.getMonth()];},B:function(f,e){return e.B[f.getMonth()];},C:function(e){return a(parseInt(e.getFullYear()/100,10),0);},d:["getDate","0"],e:["getDate"," "],g:function(e){return a(parseInt(c.formats.G(e)%100,10),0);},G:function(g){var h=g.getFullYear();var f=parseInt(c.formats.V(g),10);var e=parseInt(c.formats.W(g),10);if(e>f){h++;}else{if(e===0&&f>=52){h--;}}return h;},H:["getHours","0"],I:function(f){var e=f.getHours()%12;return a(e===0?12:e,0);},j:function(i){var h=new Date(""+i.getFullYear()+"/1/1 GMT");var f=new Date(""+i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" GMT");var e=f-h;var g=parseInt(e/60000/60/24,10)+1;return a(g,0,100);},k:["getHours"," "],l:function(f){var e=f.getHours()%12;return a(e===0?12:e," ");},m:function(e){return a(e.getMonth()+1,0);},M:["getMinutes","0"],p:function(f,e){return e.p[f.getHours()>=12?1:0];},P:function(f,e){return e.P[f.getHours()>=12?1:0];},s:function(f,e){return parseInt(f.getTime()/1000,10);},S:["getSeconds","0"],u:function(e){var f=e.getDay();return f===0?7:f;},U:function(h){var e=parseInt(c.formats.j(h),10);var g=6-h.getDay();var f=parseInt((e+g)/7,10);return a(f,0);},V:function(h){var g=parseInt(c.formats.W(h),10);var e=(new Date(""+h.getFullYear()+"/1/1")).getDay();var f=g+(e>4||e<=1?0:1);if(f===53&&(new Date(""+h.getFullYear()+"/12/31")).getDay()<4){f=1;}else{if(f===0){f=c.formats.V(new Date(""+(h.getFullYear()-1)+"/12/31"));}}return a(f,0);},w:"getDay",W:function(h){var e=parseInt(c.formats.j(h),10);var g=7-c.formats.u(h);var f=parseInt((e+g)/7,10);return a(f,0,10);},y:function(e){return a(e.getFullYear()%100,0);},Y:"getFullYear",z:function(g){var f=g.getTimezoneOffset();var e=a(parseInt(Math.abs(f/60),10),0);var h=a(Math.abs(f%60),0);return(f>0?"-":"+")+e+h;},Z:function(e){var f=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");if(f.length>4){f=c.formats.z(e);}return f;},"%":function(e){return"%";}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(o,j){j=j||{};if(!d.Lang.isDate(o)){return d.Lang.isValue(o)?o:"";}var n,e,i,g,m;n=j.format||d.config.dateFormat||"%Y-%m-%d";i=d.Lang.isUndefined(d.config.lang)&&(d.Lang.isValue(j.locale)||d.Lang.isValue(d.config.locale));if(i){g=j.locale||d.config.locale;m=d.DataType.Date.Locale;g=g.replace(/_/g,"-");if(!m[g]){var h=g.replace(/-[a-zA-Z]+$/,"");if(h in m){g=h;}else{if(d.config.locale in m){g=d.config.locale;}else{g="en";}}}e=m[g];}else{e=d.Intl.get("datatype-date-format");}var k=function(q,p){if(i&&p==="r"){return e[p];}var r=c.aggregates[p];return(r==="locale"?e[p]:r);};var f=function(q,p){var r=c.formats[p];switch(d.Lang.type(r)){case"string":return o[r]();case"function":return r.call(o,o,e);case"array":if(d.Lang.type(r[0])==="string"){return a(o[r[0]](),r[1]);}default:return p;}};while(n.match(/%[cDFhnrRtTxX]/)){n=n.replace(/%([cDFhnrRtTxX])/g,k);}var l=n.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,f);k=f=undefined;return l;}};d.mix(d.namespace("DataType.Date"),c);var b={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%d/%m/%y",X:"%T"};d.namespace("DataType.Date.Locale");d.DataType.Date.Locale["en"]=b;d.DataType.Date.Locale["en-US"]=d.merge(b,{c:"%a %d %b %Y %I:%M:%S %p %Z",x:"%m/%d/%Y",X:"%I:%M:%S %p"});d.DataType.Date.Locale["en-GB"]=d.merge(b,{r:"%l:%M:%S %P %Z"});d.DataType.Date.Locale["en-AU"]=d.merge(b);},"@VERSION@",{requires:["yui-base"],lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]});
YUI.add("datatype-date",function(a){},"@VERSION@",{use:["datatype-date-parse","datatype-date-format"]});YUI.add("datatype-xml-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{parse:function(f){var d=null;if(a.isString(f)){try{if(!a.isUndefined(ActiveXObject)){d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(f);}}catch(c){try{if(!a.isUndefined(DOMParser)){d=new DOMParser().parseFromString(f,"text/xml");}}catch(g){}}}if((a.isNull(d))||(a.isNull(d.documentElement))||(d.documentElement.nodeName==="parsererror")){}return d;}});b.namespace("Parsers").xml=b.DataType.XML.parse;},"@VERSION@",{requires:["yui-base"]});YUI.add("datatype-xml-format",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{format:function(c){try{if(!a.isUndefined(XMLSerializer)){return(new XMLSerializer()).serializeToString(c);}}catch(d){if(c&&c.xml){return c.xml;}else{return(a.isValue(c)&&c.toString)?c.toString():"";}}}});},"@VERSION@",{requires:["yui-base"]});YUI.add("datatype-xml",function(a){},"@VERSION@",{use:["datatype-xml-parse","datatype-xml-format"]});YUI.add("datatype",function(a){},"@VERSION@",{use:["datatype-number","datatype-date","datatype-xml"]});YUI.add("mail-common-downloader-v2",function(D){var H=244,V="scan:success",a="scan:failure",X="download:dialog_shown",Z=0,K=1,G=2,M=3,R=D.Node.one,L=D.ui.Templates,E=D.common.Utils,P=E.escapeHtml,S=E.substitute,F=E.rocketstats,C=D.mail.Controller,Q=C.Messages,W=D.DataType.Number.format,N=NeoConfig.isRTL,T=NeoConfig&&NeoConfig.retryDownloadErrors,A=strings.str_cfg_tog_ybox_enabled,U=0,J=null,B=null,O=false,I=function(){var Y={decimalSeparator:".",decimalPlaces:2};switch(NeoConfig.intl){case"uk":case"fr":case"de":case"it":case"nl":case"co":case"cl":case"ve":case"pe":case"br":case"ru":case"es":case"gr":case"ar":case"id":case"fi":case"pl":case"pt":case"ro":case"sk":Y.decimalSeparator=",";}return function(c){return W(c,Y);};}();window.AttachmentOutageHandler=function(c){F.stat("ATTACH","ERR:"+(U?"Retry:":"")+"AttachmentOutageFailure");if(T&&(U===0)&&D.mail.common.downloader.initiateDownload){U++;J(B);}else{var Y={"unable_to_get_message_info_or_part":"1","cred_decrypt_failed":"2","could_not_open_udb":"3","mailbox_open_err":"4","could_not_get_archive_content":"5","attachment_not_found":"6","internal_error":"7","no_credentials":"8","Illegal request":"9","tnef_not_found":"10","Illegal":"11"},d="50."+(Y[c]||"99");D.common.ui.DialogHelper.alert({hd:strings.str_comp_attach_outage_dialog_header,bd:S(strings.str_comp_attach_outage_message,{error_num:d})});}};function b(){var w=this,n=0,i=0,t=[],x=null,h=(A?"_shared_module_offscreen_bin_jp_modal_attach_download_rollup":"_shared_module_offscreen_bin_modal_attach_download_rollup"),z=null,r,g,e,AC="",c="",u="",y=0;D.augment(w,D.EventTarget);function AB(){if(x&&x.abort){x.abort();}}function AD(){var AG=NeoConfig.avTargetUrl;try{D.fire("globalUltBeaconEvent",{action:"attch_dwd_av_click"});}catch(AF){F.stat("ATTACH","BeaconException:GlobalULTBeaconEvent");}window.open(AG,"logoWin");}function d(AG){var AF={filename:[],filesize:(!AG.fileSize?strings.str_comp_attach_size_unknown:((AG.fileSize>1024)?((AG.fileSize>1048576)?I(AG.fileSize/1048576)+" "+strings.str_comp_attach_size_mb:I(AG.fileSize/1024)+" "+strings.str_comp_attach_size_kb):I(AG.fileSize)+" "+strings.str_comp_attach_size_byte))},AH=NeoConfig.isRTL?"rtl":"ltr";if(AG.fileName){switch(AG.errorCode){case G:AF.error="error";AF.filename.push(strings.str_comp_attach_virus_prefix);break;case Z:AF.error_else="success";break;case K:AF.error_else="success";AF.filename.push(strings.str_comp_attach_cleaned_prefix);break;default:AF.error="problems";AF.filename.push(strings.str_comp_attach_no_scan_prefix);}AF.filename.push(P(AG.fileName));AF.filename=AF.filename.join(" ");AF.filename_title=AF.filename;AF.filename=q(AF.filename);AF.filename_dir=(NeoConfig.isBidi?D.Intl.detectDirection(AF.filename,AH):"");}return AF;}function v(AF){k(B);}function l(AF){if(AF.downloadURL){var AG=R("#modal-downloadattach span.btn");if(A&&!r){e=R("#modal-downloadattach span.ybox-upload");e.removeClass("hidden");}if(!A||!g){AG.removeClass("hidden");AG.one("a").focus();}}}function Y(AH,AJ){(AH.filename)&&(AJ.fileName=AH.filename);var AK=AJ.fileName,AI=(AK&&AK.length)||0,AL=AJ.downloadUrl;if(AI>H){var AF=AK.lastIndexOf("."),AG=AI-AF;if((AG>1)&&(AG<7)){AK=AJ.fileName=AK.slice(0,H-AG)+AK.slice(-AG);}}switch(AJ.errorString){case"download_av_no_virus":AJ.errorCode=Z;break;case"download_cleaned":AJ.errorCode=K;break;default:if(AJ.virusFound&&AJ.virusFound.length){AJ.errorCode=G;}else{AJ.errorCode=M;F.stat("ATTACH","ERR:DownloadScanError");F.stat("ATTACH","ERR:DownloadScanError_"+AJ.errorString);}}if(AL){if(AK){AL=AL.replace(/prefFilename=([^&]*)/,"prefFilename="+encodeURIComponent(AK));}if(NeoConfig.isFullSSL&&!AL.match(/^https/)){AL=AL.replace(/^http/,"https");}AJ.downloadUrl=AL;}else{F.stat("ATTACH","NoURL"+(AJ.errorCode===M?"":"No")+"ScanError");}(AJ.errorCode==M||!AL)&&AJ.errorString&&F.stat("ATTACH","ErrorString_"+AJ.errorString.replace(/ /g,""));}function q(AI){var AG=AI,AH=AI.lastIndexOf("."),AF=(AI.indexOf("\u202D")!=-1||AI.indexOf("\u202E")!=-1);if(AH>=0&&AF){AG=['<div style="float:',(N?"right":"left"),'"><span style="float:left">',AI.substring(0,AH),'</span><span style="float:left">',AI.substring(AH),"</span></div>"].join("");}return AG;}function m(AL){var AJ=AL.attachInfoResult,AF=AJ.length,AK=R(".file-download ul"),AI=[],AH;for(var AG=0;AG<AF;AG++){AH=d(AJ[AG]);AH.fileNum=A?"attach_list_"+AG:"";AI.push(S(z.files_to_download,AH,0,0,strings));}AI=AI.join("");AK.append(D.Node.create(AI));if(N){AK.one(".file").setStyle("max-width","210px");}}function AA(AM){var AK=AM.attachInfoResult,AL=AK.virusCleaned,AJ=AK.scanError,AI=AK.virusFound,AF={error_status:[],status:[]},AH=R(".download-dlg-content"),AG=R(".download-status");if(AL){AF.status.push(S(z.status,{status_msg:strings.str_comp_attach_cleaned}));}if(AJ){AF.status.push(S(z.status,{status_msg:((B||AI)?strings.str_comp_attach_scan_failed_msg:strings.str_comp_attach_download_server_error)}));B&&AF.error_status.push(S(z.error_status,{status_msg:strings.str_comp_attach_scan_failed}));}if(AI){F.stat("ATTACH","ERR:virusFound");AF.status.push(S(z.status,{status_msg:S(strings.str_comp_attach_virus_found_no_dwnld,{warning_icon:'<span class="error">&nbsp;</span>'})}));AF.error_status.push(S(z.error_status,{status_msg:(!AJ?strings.str_comp_attach_virus_found:strings.str_comp_attach_multiple_errors)}));}if(AM.statusSummary==="success"){F.stat("ATTACH","Success");if(!AJ&&!AI&&!AL){AF.status.push(S(z.status,{status_msg:strings.str_comp_attach_no_virus}));}}else{if(!AI){F.stat("ATTACH","ERR:DownloadSummaryError");}if(AF.error_status.length===0&&!AL){AF.error_status.push(S(z.error_status,{status_msg:strings.str_error_DownloadError}));}}AF.error_status=AF.error_status.join("");AF.status=AF.status.join("");AG.set("innerHTML",S(z.dwnld_status,AF));AH.removeClass("hidden");}function p(AG,AI,AH){var AF=AI.length;if(AF==1){R("#modal-downloadattach .modal-hd").append(D.Node.create(S(z.multiple_file_download_header_else,{num_attachments_download:AF},0,0,strings)));}else{R("#modal-downloadattach .modal-hd").append(D.Node.create(S(z.multiple_file_download_header,{num_attachments_download:AF},0,0,strings)));
}AG.after("destroyedChange",function(){O=false;w.detach(AG.hScanSuccess);w.detach(AG.hScanFailure);AB();});AG.hScanSuccess=w.on(V,j);AG.hScanFailure=w.on(a,o);s(AI,AH);}function k(AL){var AM=document.location.host,AH=NeoConfig&&NeoConfig.buildSuffix?NeoConfig.buildSuffix:0,AG=NeoConfig&&NeoConfig.loginId?NeoConfig.loginId:"",AJ,AN=["http://",AM,"/neo","/php/outage.php","?b=",AH,"&mid=",encodeURIComponent(AC),"&fid=",encodeURIComponent(c),"&yid=",encodeURIComponent(AG),"&nAtt=",y].join("");F.stat("ATTACH","AttemptedNumberOfFilesDownloaded_"+y);if(AL){AJ="&redirectURL="+encodeURIComponent(AN);var AI=w.useFirst?"#dlFrame1":"#dlFrame2",AF=R(AI);w.useFirst=!w.useFirst;try{F.stat("ATTACH","StartActualDownload");if(!AF){AF=D.Node.create('<iframe class="offscreen download_iframe" role="presentation" tabindex="-1" id="'+AI+'" src="'+AL+AJ+'">');R("body").appendChild(AF);}else{AF.set("src",AL+AJ);}}catch(AK){F.stat("ATTACH","ERR:CouldNotCreateIframe");window.location.href=AL;}}}function f(AI,AJ){var AH=AJ.attachInfoResult,AF=Math.min(AI.length,AH.length);AJ.downloadURL=(AI.length>1?AJ.downloadArchiveUrl:AH&&AH[0]&&AH[0].downloadUrl);AH.scanError=(AF!==AI.length);AH.virusFound=false;AH.virusCleaned=false;if(!AH.scanError){for(var AG=0;AG<AF;AG++){Y(AI[AG],AH[AG]);AH.virusFound=AH.virusFound||(AH[AG].errorCode==G);AH.virusCleaned=AH.virusCleaned||(AH[AG].errorCode==K);AH.scanError=AH.scanError||(AH[AG].errorCode==M);}}return AH;}function o(AI){var AM=AI.error,AH=R(".download-status"),AG=R(".scanning"),AF=R(".download-dlg-content"),AL=R(".file-download ul"),AJ=S(z.error_status,{status_msg:strings.str_comp_attach_download_network_error}),AK=S(z.dwnld_status,{error_status:AJ});if(AM.code!=D.common.net.Error.abort){F.stat("ATTACH","ERR:"+(i?"Retry:":"")+AM.code);F.stat("ATTACH",(i?"Retry:":"")+"AVScanNetError");}if(T&&i===0){i++;s(AI.request,AI.appid);return;}AL&&AL.addClass("hidden");AG&&AG.addClass("hidden");AH.setContent(AK);AF.removeClass("hidden");}function j(AG){var AI=R(".scanning"),AJ=AG.request,AH=AG.response,AF;AI&&AI.addClass("hidden");f(AJ,AH);B=AH.downloadURL||null;if(!B){F.stat("ATTACH","ERR:"+(n?"Retry:":"")+"noDownloadUrl");if(T&&n===0){n++;s(AJ,AG.appid);return;}}m(AH);AA(AH);l(AH);}function AE(AF,AG){if(O){return;}O=true;D.use(h,function(){i=n=U=0;r=g=false;y=AF.length;AC=(y>0?AF[0].mid:"");c=(y>0?AF[0].fid:"");u=(y===1?AF[0].pid:"");z=(A?L._shared_module_offscreen_bin_jp_modal_attach_download_rollup:L._shared_module_offscreen_bin_modal_attach_download_rollup);var AH={num_attachments_download:AF.length,role:"alertdialog",rawTemplate:z.base},AI={download:{handler:function(){if(AG&&D.Lang.isObject(AG.urlParams)){B=E.mergeQueryString(B,AG.urlParams);}v.apply(this,arguments);}},av_sponsor:{handler:AD,stopDestroy:true}};if(A){D.use(" mail-common-ybox-uploader-jp",function(AJ){AJ.mail.common.BoxUploader.addYBoxUploadBtn(AI,AF);});}if(AG&&AG.restoreFocusNode){AH.restoreFocusNode=AG.restoreFocusNode;r=AG.restoreFocusNode.hasClass("alldownload");g=AG.restoreFocusNode.hasClass("allupload");}D.common.ui.DialogHelper.createCommon(AH,AI,function(AJ){p(AJ,AF,D.Object.getValue(AG,["urlParams","appid"]));try{D.fire("darlaEvent",{action:"attch_dwd_av_display"});}catch(AK){F.stat("ATTACH","BeaconException:DarlaEvent");}w.fire(X,{dialog:AJ});});});}function s(AJ,AI){var AF,AG=new Date(),AH=AG.getMonth()+1,AK={};if(AH<10){AH="0"+AH;}AK.downloadInfo=AJ;AK.archiveName="Attachments_"+AG.getFullYear()+"_"+AH+"_"+AG.getDate();AK.archive=(AJ.length>1?true:false);AF={success:function(AL){w.fire(V,{request:AJ,response:AL,appid:AI});},failure:function(AL){w.fire(a,{error:AL,request:AJ,appid:AI});}};if(AI){AF.appid=AI;}AB();x=Q.scan(AK,AF);}D.mix(w,{VIRUS_SCAN_SUCCESS:V,VIRUS_SCAN_FAILURE:a,DIALOG_SHOWN:X,SUCCESS:Z,VIRUSCLEANED:K,VIRUSNOTCLEANED:G,SCANERROR:M,initiateDownload:k,onScanFailure:o,onScanSuccess:j,processScanResults:f,render:AE,scan:s});}D.namespace("mail.common");D.mail.common.downloader=new b();J=D.mail.common.downloader.initiateDownload;},"1.0.0",{requires:["common-utils","mail-controller-messages","common-ui-dialog-helper","comms-ui-dialog-base","rocket-stats","datatype"]});